/*! For license information please see main.5eeea688.js.LICENSE.txt */
!function(){"use strict";var e={110:function(e,t,n){var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=h(n,y);try{c(t,y,g)}catch(k){}}}}return t}},746:function(e,t){var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},309:function(e,t,n){e.exports=n(746)},463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ee=null;function Se(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ie(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Oe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==_e||null!==Ee)&&(Ae(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,Et,St,It=!1,Tt=[],Ct=null,At=null,Nt=null,Ot=new Map,Pt=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){It=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),Ot.forEach(jt),Pt.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Ot.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ot.set(a,Mt(Ot.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return En}var In=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(In),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(On),Rn=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ie(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Qn(e){Ur(e,0)}function $n(e){if(H(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&$n(Hn)){var t=[];Gn(t,Hn,e,we(e)),Oe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Hn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Er={};function Sr(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return _r[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Ir=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Ar=Sr("transitionend"),Nr=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Nr.set(e,t),s(t,[e])}for(var Rr=0;Rr<Or.length;Rr++){var Dr=Or[Rr];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Ir,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Oe((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Ir:case Tr:case Cr:s=yn;break;case Ar:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(Kn(u))if(Jn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Wr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ei(e){return{current:e}}function Si(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ii(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Ei(Ti),Ai=Ei(!1),Ni=Ti;function Oi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Si(Ai),Si(Ci)}function Di(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ii(Ci,t),Ii(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ci.current,Ii(Ci,e),Ii(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Si(Ai),Si(Ci),Ii(Ci,e)):Si(Ai),Ii(Ai,n)}var Ui=null,ji=!1,Vi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,zi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Ki=0,Gi=null,Wi=0,Hi=[],Qi=0,$i=null,Yi=1,Ji="";function Xi(e,t){qi[Ki++]=Wi,qi[Ki++]=Gi,Gi=e,Wi=t}function Zi(e,t,n){Hi[Qi++]=Yi,Hi[Qi++]=Ji,Hi[Qi++]=$i,$i=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Yi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Wi=qi[--Ki],qi[Ki]=null;for(;e===$i;)$i=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,Yi=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ya.current;Si(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ia=null;function Ta(e){null===Ia?Ia=[e]:Ia.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&As)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Pi(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Oa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Pi(t)?Ni:Ci.current,i.context=Oi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case x:return(t=jc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Wa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Wa(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=$a(!0),Ja=$a(!1),Xa={},Za=Ei(Xa),eo=Ei(Xa),to=Ei(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ii(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ii(eo,e),Ii(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Oo(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Aa(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=Io();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Go(e,t){return zo(4,2,e,t)}function Wo(e,t){return zo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ho.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:Uo,useDebugValue:$o,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Io();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Ns.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){return Xo(To(),mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Ws=r),hu(0,t)},n}function vu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Ya(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=So(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Ds,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Ds,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ii(Ds,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ii(Ds,Rs),Rs|=r;return wu(e,t,i,n),t.child}function Iu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Pi(n)?Ni:Ci.current;return a=Oi(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=So(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Oi(t,c=Pi(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ai.current||Na?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Na||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Oi(t,s=Pi(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ai.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Iu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Ou(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Ru,Du,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):ju(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),rc(r,e,i,-1))}return mc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=Yi,Hi[Qi++]=Ji,Hi[Qi++]=$i,Yi=e.id,Ji=e.overflow,$i=t),t=ju(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Dc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Dc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ju(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=ju(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Hu(t),null;case 3:return r=t.stateNode,io(),Si(Ai),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ru(e,t),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Du(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),Ru(e,t),null===e&&zr(t.stateNode.containerInfo),Hu(t),null;case 10:return xa(t.type._context),Hu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Wu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Wu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qs&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Je()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Ii(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $u(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ai),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(){},Du=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Ju=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Ju||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Ju&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Ju&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Ju=(r=Ju)||null!==n.memoizedState,ds(e,t,n),Ju=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Sc(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Sc(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Sc(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=Je())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ju=(l=Ju)||f,ms(t,e),Ju=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==p?(p.return=d,Zu=p):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Sc(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Ju;u=Yu;var c=Ju;if(Yu=o,(Ju=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Zu=s):_s(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,Yu=u,Ju=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ju||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ju)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Ju||512&t.flags&&as(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{as(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Es,Ss=Math.ceil,Is=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,As=0,Ns=null,Os=null,Ps=0,Rs=0,Ds=Ei(0),Ls=0,Ms=null,Fs=0,Us=0,js=0,Vs=null,Bs=null,zs=0,qs=1/0,Ks=null,Gs=!1,Ws=null,Hs=null,Qs=!1,$s=null,Ys=0,Js=0,Xs=null,Zs=-1,ec=0;function tc(){return 0!==(6&As)?Je():-1!==Zs?Zs:Zs=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&As)&&0!==Ps?Ps&-Ps:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Js)throw Js=0,Xs=null,Error(a(185));yt(e,n,r),0!==(2&As)&&e===Ns||(e===Ns&&(0===(2&As)&&(Us|=n),4===Ls&&sc(e,Ps)),ic(e,r),1===n&&0===As&&0===(1&t.mode)&&(qs=Je()+500,ji&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Ps:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&As)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&As))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=As;As|=2;var o=vc();for(Ns===e&&Ps===t||(Ks=null,qs=Je()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Is.current=o,As=i,null!==Os?t=0:(Ns=null,Ps=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,Bs,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Bs,Ks),t);break}xc(e,Bs,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Bs,Ks),r);break}xc(e,Bs,Ks);break;default:throw Error(a(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bs,Bs=n,null!==t&&uc(t)),e}function uc(e){null===Bs?Bs=e:Bs.push.apply(Bs,e)}function sc(e,t){for(t&=~js,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&As))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bs,Ks),ic(e,Je()),null}function lc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(qs=Je()+500,ji&&zi())}}function fc(e){null!==$s&&0===$s.tag&&0===(6&As)&&_c();var t=As;As|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(As=t))&&zi()}}function hc(){Rs=Ds.current,Si(Ds)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Os)for(n=Os.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Si(Ai),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,Os=e=Dc(e.current,null),Ps=Rs=t,Ls=0,Ms=null,js=Us=Fs=0,Bs=Vs=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ia=null}return e}function pc(e,t){for(;;){var n=Os;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,Os=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Os===n&&null!==n&&(Os=n=n.return);continue}break}}function vc(){var e=Is.current;return Is.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ns||0===(268435455&Fs)&&0===(268435455&Us)||sc(Ns,Ps)}function yc(e,t){var n=As;As|=2;var r=vc();for(Ns===e&&Ps===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),As=n,Is.current=r,null!==Os)throw Error(a(261));return Ns=null,Ps=0,Ls}function gc(){for(;null!==Os;)bc(Os)}function kc(){for(;null!==Os&&!$e();)bc(Os)}function bc(e){var t=Es(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?wc(e):Os=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Rs)))return void(Os=n)}else{if(null!==(n=$u(n,t)))return n.flags&=32767,void(Os=n);if(null===e)return Ls=6,void(Os=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Os=t);Os=t=e}while(null!==t);0===Ls&&(Ls=5)}function xc(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==$s);if(0!==(6&As))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(Os=Ns=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=As;As|=4,Ts.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Ye(),As=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,$s=e,Ys=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Ws,Ws=null,e;0!==(1&Ys)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Xs?Js++:(Js=0,Xs=e):Js=0,zi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function _c(){if(null!==$s){var e=bt(Ys),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===$s)var r=!1;else{if(e=$s,$s=null,Ys=0,0!==(6&As))throw Error(a(331));var i=As;for(As|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){Sc(s,s.return,x)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(As=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ec(e,t,n){e=Da(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Da(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Ps&n)===n&&(4===Ls||3===Ls&&(130023424&Ps)===Ps&&500>Je()-zs?dc(e,0):js|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Aa(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return He(e,t)}function Oc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Oc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Mc(n.children,i,o,t);case E:u=8,i|=8;break;case S:return(e=Pc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case A:return(e=Pc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Pc(19,n,t,i)).elementType=N,e.lanes=o,e;case R:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:u=10;break e;case T:u=9;break e;case C:u=11;break e;case O:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(a),e}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Bc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Ra(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Ii(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ii(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Gu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Oi(t,Ci.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oa(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===O)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ou(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ou(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Iu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ii(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ku(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),qa(t,r,i),Ga(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Je()),0===(6&As)&&(qs=Je()+500,zi()))}break;case 13:fc((function(){var t=Aa(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},xt=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Aa(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},Et=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ae=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ie,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.s=r.createRoot,r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},459:function(e,t){var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){n(459)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,R(x);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(I),I=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&D(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,S=null,I=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function N(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?_():(E=!1,S=null)}}else E=!1}if("function"===typeof k)_=function(){k(N)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,P=O.port2;O.port1.onmessage=N,_=function(){P.postMessage(null)}}else _=function(){y(N,0)};function R(e){S=e,E||(E=!0,_())}function D(e,n){I=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(I),I=-1):m=!0,D(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)},561:function(e,t,n){var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},248:function(e,t,n){e.exports=n(561)},327:function(e,t,n){e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".440c4889.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="netflix_clone:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunknetflix_clone=self.webpackChunknetflix_clone||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return _a},SDK_VERSION:function(){return Po},_DEFAULT_ENTRY_NAME:function(){return ko},_addComponent:function(){return _o},_addOrOverwriteComponent:function(){return Eo},_apps:function(){return wo},_clearComponents:function(){return Co},_components:function(){return xo},_getProvider:function(){return Io},_registerComponent:function(){return So},_removeServiceInstance:function(){return To},deleteApp:function(){return Mo},getApp:function(){return Do},getApps:function(){return Lo},initializeApp:function(){return Ro},onLog:function(){return jo},registerVersion:function(){return Uo},setLogLevel:function(){return Vo}});var t=n(791),r=n.t(t,2),i=n(250),a=n(248),o=n(327),u=n(164);var s=function(e){e()},c=function(){return s};function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}function h(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=Symbol.for("react-redux-context-".concat(t.version)),p=globalThis;var v=new Proxy({},new Proxy({},{get:function(e,n){var r=function(){var e=p[d];return e||(e=(0,t.createContext)(null),p[d]=e),e}();return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return Reflect[n].apply(Reflect,[r].concat(i))}}}));function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return function(){return(0,t.useContext)(e)}}var y=m(),g=function(){throw new Error("uSES not initialized!")},k=function(e,t){return e===t};function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,n=e===v?y:m(e);return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="function"===typeof r?{equalityFn:r}:r,a=i.equalityFn,o=void 0===a?k:a,u=i.stabilityCheck,s=void 0===u?void 0:u;i.noopCheck;var c=n(),l=c.store,f=c.subscription,d=c.getServerState,p=c.stabilityCheck,v=(c.noopCheck,(0,t.useRef)(!0),(0,t.useCallback)(h({},e.name,(function(t){return e(t)}))[e.name],[e,p,s])),m=g(f.addNestedSub,l.getState,d||l.getState,v,o);return(0,t.useDebugValue)(m),m}}var w=b();n(110),n(900);var x={notify:function(){},get:function(){return[]}};function _(e,t){var n,r=x;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=c(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=x)},getListeners:function(){return r}};return o}var E=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;var S=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=e.stabilityCheck,u=void 0===o?"once":o,s=e.noopCheck,c=void 0===s?"once":s,l=(0,t.useMemo)((function(){var e=_(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0,stabilityCheck:u,noopCheck:c}}),[n,a,u,c]),f=(0,t.useMemo)((function(){return n.getState()}),[n]);E((function(){var e=l.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),f!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[l,f]);var h=r||v;return t.createElement(h.Provider,{value:l},i)};function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=e===v?y:m(e);return function(){return t().store}}var T=I();function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=e===v?T:I(e);return function(){return t().dispatch}}var A,N=C();function O(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function P(e){return!!e&&!!e[we]}function R(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===xe}(e)||Array.isArray(e)||!!e[be]||!!(null===(t=e.constructor)||void 0===t?void 0:t[be])||V(e)||B(e))}function D(e,t,n){void 0===n&&(n=!1),0===L(e)?(n?Object.keys:_e)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function L(e){var t=e[we];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:V(e)?2:B(e)?3:0}function M(e,t){return 2===L(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function F(e,t){return 2===L(e)?e.get(t):e[t]}function U(e,t,n){var r=L(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function j(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function V(e){return me&&e instanceof Map}function B(e){return ye&&e instanceof Set}function z(e){return e.o||e.t}function q(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Ee(e);delete t[we];for(var n=_e(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function K(e,t){return void 0===t&&(t=!1),W(e)||P(e)||!R(e)||(L(e)>1&&(e.set=e.add=e.clear=e.delete=G),Object.freeze(e),t&&D(e,(function(e,t){return K(t,!0)}),!0)),e}function G(){O(2)}function W(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function H(e){var t=Se[e];return t||O(18,e),t}function Q(e,t){Se[e]||(Se[e]=t)}function $(){return pe}function Y(e,t){t&&(H("Patches"),e.u=[],e.s=[],e.v=t)}function J(e){X(e),e.p.forEach(ee),e.p=null}function X(e){e===pe&&(pe=e.l)}function Z(e){return pe={p:[],l:pe,h:e,m:!0,_:0}}function ee(e){var t=e[we];0===t.i||1===t.i?t.j():t.g=!0}function te(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||H("ES5").S(t,e,r),r?(n[we].P&&(J(t),O(4)),R(e)&&(e=ne(t,e),t.l||ie(t,e)),t.u&&H("Patches").M(n[we].t,e,t.u,t.s)):e=ne(t,n,[]),J(t),t.u&&t.v(t.u,t.s),e!==ke?e:void 0}function ne(e,t,n){if(W(t))return t;var r=t[we];if(!r)return D(t,(function(i,a){return re(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return ie(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=q(r.k):r.o,a=i,o=!1;3===r.i&&(a=new Set(i),i.clear(),o=!0),D(a,(function(t,a){return re(e,r,i,t,a,n,o)})),ie(e,i,!1),n&&e.u&&H("Patches").N(r,n,e.u,e.s)}return r.o}function re(e,t,n,r,i,a,o){if(P(i)){var u=ne(e,i,a&&t&&3!==t.i&&!M(t.R,r)?a.concat(r):void 0);if(U(n,r,u),!P(u))return;e.m=!1}else o&&n.add(i);if(R(i)&&!W(i)){if(!e.h.D&&e._<1)return;ne(e,i),t&&t.A.l||ie(e,i)}}function ie(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&K(t,n)}function ae(e,t){var n=e[we];return(n?z(n):e)[t]}function oe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ue(e){e.P||(e.P=!0,e.l&&ue(e.l))}function se(e){e.o||(e.o=q(e.t))}function ce(e,t,n){var r=V(t)?H("MapSet").F(t,n):B(t)?H("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:$(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=Ie;n&&(i=[r],a=Te);var o=Proxy.revocable(i,a),u=o.revoke,s=o.proxy;return r.k=s,r.j=u,s}(t,n):H("ES5").J(t,n);return(n?n.A:$()).p.push(r),r}function le(e){return P(e)||O(22,e),function e(t){if(!R(t))return t;var n,r=t[we],i=L(t);if(r){if(!r.P&&(r.i<4||!H("ES5").K(r)))return r.t;r.I=!0,n=fe(t,i),r.I=!1}else n=fe(t,i);return D(n,(function(t,i){r&&F(r.t,t)===i||U(n,t,e(i))})),3===i?new Set(n):n}(e)}function fe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return q(e)}function he(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[we];return Ie.get(t,e)},set:function(t){var n=this[we];Ie.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][we];if(!i.P)switch(i.i){case 5:r(i)&&ue(i);break;case 4:n(i)&&ue(i)}}}function n(e){for(var t=e.t,n=e.k,r=_e(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==we){var o=t[a];if(void 0===o&&!M(t,a))return!0;var u=n[a],s=u&&u[we];if(s?s.t!==o:!j(u,o))return!0}}var c=!!t[we];return r.length!==_e(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};Q("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=Ee(n);delete a[we];for(var o=_e(a),u=0;u<o.length;u++){var s=o[u];a[s]=e(s,t||!!a[s].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:$(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,we,{value:a,writable:!0}),i},S:function(e,n,i){i?P(n)&&n[we].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[we];if(n){var i=n.t,a=n.k,o=n.R,u=n.i;if(4===u)D(a,(function(t){t!==we&&(void 0!==i[t]||M(i,t)?o[t]||e(a[t]):(o[t]=!0,ue(n)))})),D(i,(function(e){void 0!==a[e]||M(a,e)||(o[e]=!1,ue(n))}));else if(5===u){if(r(n)&&(ue(n),o.length=!0),a.length<i.length)for(var s=a.length;s<i.length;s++)o[s]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var l=Math.min(a.length,i.length),f=0;f<l;f++)a.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(a[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}!function(e){g=e}(o.useSyncExternalStoreWithSelector),function(e){e}(a.useSyncExternalStore),A=u.unstable_batchedUpdates,s=A;var de,pe,ve="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),me="undefined"!=typeof Map,ye="undefined"!=typeof Set,ge="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,ke=ve?Symbol.for("immer-nothing"):((de={})["immer-nothing"]=!0,de),be=ve?Symbol.for("immer-draftable"):"__$immer_draftable",we=ve?Symbol.for("immer-state"):"__$immer_state",xe=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),_e="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Ee=Object.getOwnPropertyDescriptors||function(e){var t={};return _e(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Se={},Ie={get:function(e,t){if(t===we)return e;var n=z(e);if(!M(n,t))return function(e,t,n){var r,i=oe(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!R(r)?r:r===ae(e.t,t)?(se(e),e.o[t]=ce(e.A.h,r,e)):r},has:function(e,t){return t in z(e)},ownKeys:function(e){return Reflect.ownKeys(z(e))},set:function(e,t,n){var r=oe(z(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=ae(z(e),t),a=null==i?void 0:i[we];if(a&&a.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(j(n,i)&&(void 0!==n||M(e.t,t)))return!0;se(e),ue(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==ae(e.t,t)||t in e.t?(e.R[t]=!1,se(e),ue(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=z(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){O(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){O(12)}},Te={};D(Ie,(function(e,t){Te[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Te.deleteProperty=function(e,t){return Te.set.call(this,e,t,void 0)},Te.set=function(e,t,n){return Ie.set.call(this,e[0],t,n,e[0])};var Ce=function(){function e(e){var t=this;this.O=ge,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&O(6),void 0!==r&&"function"!=typeof r&&O(7),R(e)){var u=Z(t),s=ce(t,e,void 0),c=!0;try{o=n(s),c=!1}finally{c?J(u):X(u)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return Y(u,r),te(e,u)}),(function(e){throw J(u),e})):(Y(u,r),te(o,u))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===ke&&(o=void 0),t.D&&K(o,!0),r){var l=[],f=[];H("Patches").M(e,o,l,f),r(l,f)}return o}O(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){R(e)||O(8),P(e)&&(e=le(e));var t=Z(this),n=ce(this,e,void 0);return n[we].C=!0,X(t),n},t.finishDraft=function(e,t){var n=(e&&e[we]).A;return Y(n,t),te(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!ge&&O(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=H("Patches").$;return P(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Ae=new Ce,Ne=Ae.produce,Oe=(Ae.produceWithPatches.bind(Ae),Ae.setAutoFreeze.bind(Ae),Ae.setUseProxies.bind(Ae),Ae.applyPatches.bind(Ae),Ae.createDraft.bind(Ae),Ae.finishDraft.bind(Ae),Ne);function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Le="function"===typeof Symbol&&Symbol.observable||"@@observable",Me=function(){return Math.random().toString(36).substring(7).split("").join(".")},Fe={INIT:"@@redux/INIT"+Me(),REPLACE:"@@redux/REPLACE"+Me(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Me()}};function Ue(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function je(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(De(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(De(1));return n(je)(e,t)}if("function"!==typeof e)throw new Error(De(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(De(3));return a}function f(e){if("function"!==typeof e)throw new Error(De(4));if(s)throw new Error(De(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(De(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!Ue(e))throw new Error(De(7));if("undefined"===typeof e.type)throw new Error(De(8));if(s)throw new Error(De(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:Fe.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(De(10));i=e,h({type:Fe.REPLACE})}})[Le]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(De(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[Le]=function(){return this},e},r}function Ve(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:Fe.INIT}))throw new Error(De(12));if("undefined"===typeof n(void 0,{type:Fe.PROBE_UNKNOWN_ACTION()}))throw new Error(De(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(De(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function Be(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function ze(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(De(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=Be.apply(void 0,a)(n.dispatch),Re(Re({},n),{},{dispatch:r})}}}function qe(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var Ke=qe();Ke.withExtraArgument=qe;var Ge=Ke,We=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),He=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Qe=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},$e=Object.defineProperty,Ye=Object.defineProperties,Je=Object.getOwnPropertyDescriptors,Xe=Object.getOwnPropertySymbols,Ze=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable,tt=function(e,t,n){return t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},nt=function(e,t){for(var n in t||(t={}))Ze.call(t,n)&&tt(e,n,t[n]);if(Xe)for(var r=0,i=Xe(t);r<i.length;r++){n=i[r];et.call(t,n)&&tt(e,n,t[n])}return e},rt=function(e,t){return Ye(e,Je(t))},it=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{u(n.next(e))}catch(t){i(t)}},o=function(e){try{u(n.throw(e))}catch(t){i(t)}},u=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};u((n=n.apply(e,t)).next())}))},at="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Be:Be.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function ot(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var ut=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return We(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Qe([void 0],e[0].concat(this)))):new(t.bind.apply(t,Qe([void 0],e.concat(this))))},t}(Array),st=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return We(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Qe([void 0],e[0].concat(this)))):new(t.bind.apply(t,Qe([void 0],e.concat(this))))},t}(Array);function ct(e){return R(e)?Oe(e,(function(){})):e}function lt(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new ut);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(Ge.withExtraArgument(n.extraArgument)):r.push(Ge));0;return r}(e)}}function ft(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return nt(nt({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function ht(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}var dt=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},pt=["name","message","stack","code"],vt=function(e,t){this.payload=e,this.meta=t},mt=function(e,t){this.payload=e,this.meta=t},yt=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=pt;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};!function(){function e(e,t,n){var r=ft(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:rt(nt({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=ft(e+"/pending",(function(e,t,n){return{payload:void 0,meta:rt(nt({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=ft(e+"/rejected",(function(e,t,r,i,a){return{payload:i,error:(n&&n.serializeError||yt)(e||"Rejected"),meta:rt(nt({},a||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(u,s,c){var l,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):dt(),h=new o;function d(e){l=e,h.abort()}var p=function(){return it(this,null,(function(){var o,p,v,m,y,g;return He(this,(function(k){switch(k.label){case 0:return k.trys.push([0,4,,5]),m=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:s,extra:c}),null===(b=m)||"object"!==typeof b||"function"!==typeof b.then?[3,2]:[4,m];case 1:m=k.sent(),k.label=2;case 2:if(!1===m||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,y=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),u(i(f,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:f,arg:e},{getState:s,extra:c}))),[4,Promise.race([y,Promise.resolve(t(e,{dispatch:u,getState:s,extra:c,requestId:f,signal:h.signal,abort:d,rejectWithValue:function(e,t){return new vt(e,t)},fulfillWithValue:function(e,t){return new mt(e,t)}})).then((function(t){if(t instanceof vt)throw t;return t instanceof mt?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return v=k.sent(),[3,5];case 4:return g=k.sent(),v=g instanceof vt?a(null,f,e,g.payload,g.meta):a(g,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&a.match(v)&&v.meta.condition||u(v),[2,v]}var b}))}))}();return Object.assign(p,{abort:d,requestId:f,arg:e,unwrap:function(){return p.then(gt)}})}}),{pending:i,rejected:a,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();function gt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var kt="listenerMiddleware";ft(kt+"/add"),ft(kt+"/removeAll"),ft(kt+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var bt,wt=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:wt(10);he();var xt,_t=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:ct(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},u={},s={};function c(){var t="function"===typeof e.extraReducers?ht(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,s=t[2],c=void 0===s?void 0:s,l=nt(nt({},i),u);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?ht(t):[t,n,r],o=a[0],u=a[1],s=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return ct(e())};else{var c=ct(e);i=function(){return c}}function l(e,t){void 0===e&&(e=i());var n=Qe([o[t.type]],u.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[s]),n.reduce((function(e,n){if(n){var r;if(P(e))return void 0===(r=n(e,t))?e:r;if(R(e))return Oe(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=o;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)}))}return a.forEach((function(e){var n,r,a=i[e],c=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,u[c]=n,s[e]=r?ft(c,r):ft(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:s,caseReducers:o,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}({name:"user",initialState:{user:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null}}}),Et=_t.actions,St=Et.login,It=Et.logout,Tt=function(e){return e.user.user},Ct=function(e){var t,n=lt(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,u=void 0===o?n():o,s=r.devTools,c=void 0===s||s,l=r.preloadedState,f=void 0===l?void 0:l,h=r.enhancers,d=void 0===h?void 0:h;if("function"===typeof a)t=a;else{if(!ot(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=Ve(a)}var p=u;"function"===typeof p&&(p=p(n));var v=ze.apply(void 0,p),m=Be;c&&(m=at(nt({trace:!1},"object"===typeof c&&c)));var y=new st(v),g=y;return Array.isArray(d)?g=Qe([v],d):"function"===typeof d&&(g=d(y)),je(t,f,m.apply(void 0,g))}({reducer:{user:_t.reducer}});function At(e){if(Array.isArray(e))return e}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ot(e,t){if(e){if("string"===typeof e)return Nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nt(e,t):void 0}}function Pt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rt(e,t){return At(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||Ot(e,t)||Pt()}function Dt(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Lt(e){return function(e){if(Array.isArray(e))return Nt(e)}(e)||Dt(e)||Ot(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function Ut(e,t,n){return t&&Ft(e.prototype,t),n&&Ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function jt(e,t){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jt(e,t)}function Vt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jt(e,t)}function Bt(e){return Bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bt(e)}function zt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kt(e){var t=zt();return function(){var n,r=Bt(e);if(t){var i=Bt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qt(e)}(this,n)}}function Gt(e,t,n){return Gt=zt()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&jt(i,n.prototype),i},Gt.apply(null,arguments)}function Wt(e){var t="function"===typeof Map?new Map:void 0;return Wt=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Gt(e,arguments,Bt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),jt(n,e)},Wt(e)}function Ht(e){return At(e)||Dt(e)||Ot(e)||Pt()}function Qt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ot(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function $t(){return $t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$t.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(xt||(xt={}));var Yt,Jt="popstate";function Xt(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Zt(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function en(e,t){return{usr:e.state,key:e.key,idx:t}}function tn(e,t,n,r){return void 0===n&&(n=null),$t({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?rn(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function nn(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function rn(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function an(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=xt.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=xt.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:m.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:nn(e);return Xt(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState($t({},c.state,{idx:h}),""));var m={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Jt,p),f=e,function(){o.removeEventListener(Jt,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=xt.Push;var r=tn(m.location,e,t);n&&n(r,e);var i=en(r,h=d()+1),a=m.createHref(r);try{c.pushState(i,"",a)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(a)}s&&f&&f({action:l,location:m.location,delta:1})},replace:function(e,t){l=xt.Replace;var r=tn(m.location,e,t);n&&n(r,e);var i=en(r,h=d()),a=m.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:m.location,delta:0})},go:function(e){return c.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Yt||(Yt={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function on(e,t,n){void 0===n&&(n="/");var r=bn(("string"===typeof t?rn(t):t).pathname||"/",n);if(null==r)return null;var i=un(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=yn(i[o],kn(r));return a}function un(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(Xt(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=En([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(Xt(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),un(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:mn(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=Qt(sn(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function sn(e){var t=e.split("/");if(0===t.length)return[];var n=Ht(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=sn(i.join("/")),s=[];return s.push.apply(s,Lt(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,Lt(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var cn=/^:\w+$/,ln=3,fn=2,hn=1,dn=10,pn=-2,vn=function(e){return"*"===e};function mn(e,t){var n=e.split("/"),r=n.length;return n.some(vn)&&(r+=pn),t&&(r+=fn),n.filter((function(e){return!vn(e)})).reduce((function(e,t){return e+(cn.test(t)?ln:""===t?hn:dn)}),r)}function yn(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=gn({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:En([i,l.pathname]),pathnameBase:Sn(En([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=En([i,l.pathnameBase]))}return a}function gn(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Zt("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=Rt(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return Zt(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function kn(e){try{return decodeURI(e)}catch(t){return Zt(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function bn(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function wn(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function xn(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function _n(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=rn(e):(Xt(!(i=$t({},e)).pathname||!i.pathname.includes("?"),wn("?","pathname","search",i)),Xt(!i.pathname||!i.pathname.includes("#"),wn("#","pathname","hash",i)),Xt(!i.search||!i.search.includes("#"),wn("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?rn(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:In(a),hash:Tn(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var En=function(e){return e.join("/").replace(/\/\/+/g,"/")},Sn=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},In=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Tn=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},Cn=function(e){Vt(n,e);var t=Kt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n)}(Wt(Error));function An(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Nn=["post","put","patch","delete"],On=(new Set(Nn),["get"].concat(Nn));new Set(On),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Pn(){return Pn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pn.apply(this,arguments)}var Rn=t.createContext(null);var Dn=t.createContext(null);var Ln=t.createContext(null);var Mn=t.createContext(null);var Fn=t.createContext(null);var Un=t.createContext({outlet:null,matches:[],isDataRoute:!1});var jn=t.createContext(null);function Vn(){return null!=t.useContext(Fn)}function Bn(){return Vn()||Xt(!1),t.useContext(Fn).location}function zn(e){t.useContext(Mn).static||t.useLayoutEffect(e)}function qn(){return t.useContext(Un).isDataRoute?function(){var e=Xn(Wn.UseNavigateStable).router,n=er(Hn.UseNavigateStable),r=t.useRef(!1);zn((function(){r.current=!0}));var i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,Pn({fromRouteId:n},i)))}),[e,n]);return i}():function(){Vn()||Xt(!1);var e=t.useContext(Rn),n=t.useContext(Mn),r=n.basename,i=n.navigator,a=t.useContext(Un).matches,o=Bn().pathname,u=JSON.stringify(xn(a).map((function(e){return e.pathnameBase}))),s=t.useRef(!1);zn((function(){s.current=!0}));var c=t.useCallback((function(t,n){if(void 0===n&&(n={}),s.current)if("number"!==typeof t){var a=_n(t,JSON.parse(u),o,"path"===n.relative);null==e&&"/"!==r&&(a.pathname="/"===a.pathname?r:En([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(t)}),[r,i,u,o,e]);return c}()}function Kn(e,n,r){Vn()||Xt(!1);var i,a=t.useContext(Mn).navigator,o=t.useContext(Un).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,Bn());if(n){var f,h="string"===typeof n?rn(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||Xt(!1),i=h}else i=l;var d=i.pathname||"/",p=on(e,{pathname:"/"===c?d:d.slice(c.length)||"/"});var v=Jn(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:En([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:En([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&v?t.createElement(Fn.Provider,{value:{location:Pn({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:xt.Pop}},v):v}function Gn(){var e=function(){var e,n=t.useContext(jn),r=Zn(Hn.UseRouteError),i=er(Hn.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=An(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var Wn,Hn,Qn=t.createElement(Gn,null),$n=function(e){Vt(r,e);var n=Kt(r);function r(e){var t;return Mt(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return Ut(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(Un.Provider,{value:this.props.routeContext},t.createElement(jn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(t.Component);function Yn(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(Rn);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Un.Provider,{value:n},i)}function Jn(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}var o=e,u=null==(i=r)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||Xt(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;r&&(c=i.route.errorElement||Qn);var l=n.concat(o.slice(0,a+1)),f=function(){var n;return n=s?c:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(Yn,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement($n,{location:r.location,revalidation:r.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}function Xn(e){var n=t.useContext(Rn);return n||Xt(!1),n}function Zn(e){var n=t.useContext(Dn);return n||Xt(!1),n}function er(e){var n=function(e){var n=t.useContext(Un);return n||Xt(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||Xt(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(Wn||(Wn={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(Hn||(Hn={}));var tr;r.startTransition;function nr(e){Xt(!1)}function rr(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?xt.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;Vn()&&Xt(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=rn(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,b=void 0===k?"":k,w=p.state,x=void 0===w?null:w,_=p.key,E=void 0===_?"default":_,S=t.useMemo((function(){var e=bn(m,h);return null==e?null:{location:{pathname:e,search:g,hash:b,state:x,key:E},navigationType:s}}),[h,m,g,b,x,E,s]);return null==S?null:t.createElement(Mn.Provider,{value:d},t.createElement(Fn.Provider,{children:a,value:S}))}function ir(e){var t=e.children,n=e.location;return Kn(or(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(tr||(tr={}));var ar=new Promise((function(){}));t.Component;function or(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat(Lt(n),[i]);if(e.type!==t.Fragment){e.type!==nr&&Xt(!1),e.props.index&&e.props.children&&Xt(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=or(e.props.children,a)),r.push(o)}else r.push.apply(r,or(e.props.children,a))}})),r}var ur=n(184);function sr(){var e=Rt((0,t.useState)(!1),2),n=e[0],r=e[1],i=qn(),a=function(){window.scrollY>100?r(!0):r(!1)};return(0,t.useEffect)((function(){return window.addEventListener("scroll",a),function(){return window.removeEventListener("scroll",a)}}),[]),(0,ur.jsxs)("div",{className:"nav ".concat(n&&"nav__black"),children:[(0,ur.jsxs)("div",{className:"nav_contents",children:[(0,ur.jsx)("img",{onClick:function(){i("/")},className:"nav_logo",src:"https://www.freepnglogos.com/uploads/netflix-logo-0.png",alt:""}),(0,ur.jsxs)("div",{className:"nav__items",children:[(0,ur.jsx)("p",{onClick:function(){i("/")},children:"Home"}),(0,ur.jsx)("p",{children:"Series"}),(0,ur.jsx)("p",{children:"Films"}),(0,ur.jsx)("p",{children:"My list"}),(0,ur.jsx)("p",{children:"Trending"})]})]}),(0,ur.jsx)("img",{onClick:function(){i("/profile")},className:"nav_avatar",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQJY8ri89jq-__7Lt6F8AHtVw1RLdRUIiWtYa6mnb6SUA&s",alt:""})]})}function cr(){cr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),u=new I(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var m={};s(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=v.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=f(e[r],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==l(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function lr(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function fr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){lr(a,r,i,o,u,"next",e)}function u(e){lr(a,r,i,o,u,"throw",e)}o(void 0)}))}}var hr="ff15ffaae05e562592938de927f5448a",dr={fetchTrending:"/trending/all/week?api_key=".concat(hr,"&language=en-US"),fetchNetflixOriginals:"/discover/tv?api_key=".concat(hr,"&with_networks=213"),fetchTopRated:"/movie/top_rated?api_key=".concat(hr,"&language=en-US"),fetchActionMovies:"/discover/movie?api_key=".concat(hr,"&with_genres=28"),fetchHorrorMovies:"/discover/movie?api_key=".concat(hr,"&with_genres=27"),fetchRomanceMovies:"/discover/movie?api_key=".concat(hr,"&with_genres-10749"),fetchDocumentaries:"/discover/movie?api_key=".concat(hr,"&with_genres=99")};function pr(e,t){return function(){return e.apply(t,arguments)}}var vr,mr=Object.prototype.toString,yr=Object.getPrototypeOf,gr=(vr=Object.create(null),function(e){var t=mr.call(e);return vr[t]||(vr[t]=t.slice(8,-1).toLowerCase())}),kr=function(e){return e=e.toLowerCase(),function(t){return gr(t)===e}},br=function(e){return function(t){return typeof t===e}},wr=Array.isArray,xr=br("undefined");var _r=kr("ArrayBuffer");var Er=br("string"),Sr=br("function"),Ir=br("number"),Tr=function(e){return null!==e&&"object"===typeof e},Cr=function(e){if("object"!==gr(e))return!1;var t=yr(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ar=kr("Date"),Nr=kr("File"),Or=kr("Blob"),Pr=kr("FileList"),Rr=kr("URLSearchParams");function Dr(e,t){var n,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,a=void 0!==i&&i;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),wr(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var o,u=a?Object.getOwnPropertyNames(e):Object.keys(e),s=u.length;for(n=0;n<s;n++)o=u[n],t.call(null,e[o],o,e)}}function Lr(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var Mr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Fr=function(e){return!xr(e)&&e!==Mr};var Ur,jr=(Ur="undefined"!==typeof Uint8Array&&yr(Uint8Array),function(e){return Ur&&e instanceof Ur}),Vr=kr("HTMLFormElement"),Br=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),zr=kr("RegExp"),qr=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};Dr(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},Kr="abcdefghijklmnopqrstuvwxyz",Gr="0123456789",Wr={DIGIT:Gr,ALPHA:Kr,ALPHA_DIGIT:Kr+Kr.toUpperCase()+Gr};var Hr=kr("AsyncFunction"),Qr={isArray:wr,isArrayBuffer:_r,isBuffer:function(e){return null!==e&&!xr(e)&&null!==e.constructor&&!xr(e.constructor)&&Sr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"===typeof FormData&&e instanceof FormData||Sr(e.append)&&("formdata"===(t=gr(e))||"object"===t&&Sr(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&_r(e.buffer)},isString:Er,isNumber:Ir,isBoolean:function(e){return!0===e||!1===e},isObject:Tr,isPlainObject:Cr,isUndefined:xr,isDate:Ar,isFile:Nr,isBlob:Or,isRegExp:zr,isFunction:Sr,isStream:function(e){return Tr(e)&&Sr(e.pipe)},isURLSearchParams:Rr,isTypedArray:jr,isFileList:Pr,forEach:Dr,merge:function e(){for(var t=(Fr(this)&&this||{}).caseless,n={},r=function(r,i){var a=t&&Lr(n,i)||i;Cr(n[a])&&Cr(r)?n[a]=e(n[a],r):Cr(r)?n[a]=e({},r):wr(r)?n[a]=r.slice():n[a]=r},i=0,a=arguments.length;i<a;i++)arguments[i]&&Dr(arguments[i],r);return n},extend:function(e,t,n){return Dr(t,(function(t,r){n&&Sr(t)?e[r]=pr(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,u={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||u[o]||(t[o]=e[o],u[o]=!0);e=!1!==n&&yr(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:gr,kindOfTest:kr,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(wr(e))return e;var t=e.length;if(!Ir(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Vr,hasOwnProperty:Br,hasOwnProp:Br,reduceDescriptors:qr,freezeMethods:function(e){qr(e,(function(t,n){if(Sr(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];Sr(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return wr(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:Lr,global:Mr,isContextDefined:Fr,ALPHABET:Wr,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wr.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&Sr(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(Tr(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=wr(n)?[]:{};return Dr(n,(function(t,n){var a=e(t,r+1);!xr(a)&&(i[n]=a)})),t[r]=void 0,i}}return n}(e,0)},isAsyncFn:Hr,isThenable:function(e){return e&&(Tr(e)||Sr(e))&&Sr(e.then)&&Sr(e.catch)}};function $r(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Qr.inherits($r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Qr.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Yr=$r.prototype,Jr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){Jr[e]={value:e}})),Object.defineProperties($r,Jr),Object.defineProperty(Yr,"isAxiosError",{value:!0}),$r.from=function(e,t,n,r,i,a){var o=Object.create(Yr);return Qr.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),$r.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var Xr=$r;function Zr(e){return Qr.isPlainObject(e)||Qr.isArray(e)}function ei(e){return Qr.endsWith(e,"[]")?e.slice(0,-2):e}function ti(e,t,n){return e?e.concat(t).map((function(e,t){return e=ei(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var ni=Qr.toFlatObject(Qr,{},null,(function(e){return/^is[A-Z]/.test(e)}));var ri=function(e,t,n){if(!Qr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=Qr.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Qr.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,a=n.dots,o=n.indexes,u=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Qr.isSpecCompliantForm(t);if(!Qr.isFunction(i))throw new TypeError("visitor must be a function");function s(e){if(null===e)return"";if(Qr.isDate(e))return e.toISOString();if(!u&&Qr.isBlob(e))throw new Xr("Blob is not supported. Use a Buffer instead.");return Qr.isArrayBuffer(e)||Qr.isTypedArray(e)?u&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){var u=e;if(e&&!i&&"object"===typeof e)if(Qr.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Qr.isArray(e)&&function(e){return Qr.isArray(e)&&!e.some(Zr)}(e)||(Qr.isFileList(e)||Qr.endsWith(n,"[]"))&&(u=Qr.toArray(e)))return n=ei(n),u.forEach((function(e,r){!Qr.isUndefined(e)&&null!==e&&t.append(!0===o?ti([n],r,a):null===o?n:n+"[]",s(e))})),!1;return!!Zr(e)||(t.append(ti(i,n,a),s(e)),!1)}var l=[],f=Object.assign(ni,{defaultVisitor:c,convertValue:s,isVisitable:Zr});if(!Qr.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Qr.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),Qr.forEach(n,(function(n,a){!0===(!(Qr.isUndefined(n)||null===n)&&i.call(t,n,Qr.isString(a)?a.trim():a,r,f))&&e(n,r?r.concat(a):[a])})),l.pop()}}(e),t};function ii(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ai(e,t){this._pairs=[],e&&ri(e,this,t)}var oi=ai.prototype;oi.append=function(e,t){this._pairs.push([e,t])},oi.toString=function(e){var t=e?function(t){return e.call(this,t,ii)}:ii;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var ui=ai;function si(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ci(e,t,n){if(!t)return e;var r,i=n&&n.encode||si,a=n&&n.serialize;if(r=a?a(t,n):Qr.isURLSearchParams(t)?t.toString():new ui(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var li=function(){function e(){Mt(this,e),this.handlers=[]}return Ut(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){Qr.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),fi=li,hi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},di={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ui,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var pi=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),u=i>=e.length;return a=!a&&Qr.isArray(r)?r.length:a,u?(Qr.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&Qr.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&Qr.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(Qr.isFormData(e)&&Qr.isFunction(e.entries)){var n={};return Qr.forEachEntry(e,(function(e,r){t(function(e){return Qr.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null},vi={"Content-Type":void 0};var mi={transitional:hi,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=Qr.isObject(e);if(a&&Qr.isHTMLForm(e)&&(e=new FormData(e)),Qr.isFormData(e))return i&&i?JSON.stringify(pi(e)):e;if(Qr.isArrayBuffer(e)||Qr.isBuffer(e)||Qr.isStream(e)||Qr.isFile(e)||Qr.isBlob(e))return e;if(Qr.isArrayBufferView(e))return e.buffer;if(Qr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ri(e,new di.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return di.isNode&&Qr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=Qr.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return ri(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(Qr.isString(e))try{return(t||JSON.parse)(e),Qr.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||mi.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&Qr.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i){if("SyntaxError"===a.name)throw Xr.from(a,Xr.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:di.classes.FormData,Blob:di.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Qr.forEach(["delete","get","head"],(function(e){mi.headers[e]={}})),Qr.forEach(["post","put","patch"],(function(e){mi.headers[e]=Qr.merge(vi)}));var yi=mi,gi=Qr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ki=Symbol("internals");function bi(e){return e&&String(e).trim().toLowerCase()}function wi(e){return!1===e||null==e?e:Qr.isArray(e)?e.map(wi):String(e)}function xi(e,t,n,r,i){return Qr.isFunction(r)?r.call(this,t,n):(i&&(t=n),Qr.isString(t)?Qr.isString(r)?-1!==t.indexOf(r):Qr.isRegExp(r)?r.test(t):void 0:void 0)}var _i=function(e,t){function n(e){Mt(this,n),e&&this.set(e)}return Ut(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=bi(t);if(!i)throw new Error("header name must be a non-empty string");var a=Qr.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=wi(e))}var a=function(e,t){return Qr.forEach(e,(function(e,n){return i(e,n,t)}))};return Qr.isPlainObject(e)||e instanceof this.constructor?a(e,t):Qr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&gi[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=bi(e)){var n=Qr.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(Qr.isFunction(t))return t.call(this,r,n);if(Qr.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=bi(e)){var n=Qr.findKey(this,e);return!(!n||void 0===this[n]||t&&!xi(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=bi(e)){var i=Qr.findKey(n,e);!i||t&&!xi(0,n[i],i,t)||(delete n[i],r=!0)}}return Qr.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!xi(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return Qr.forEach(this,(function(r,i){var a=Qr.findKey(n,i);if(a)return t[a]=wi(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=wi(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return Qr.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&Qr.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=Rt(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[ki]=this[ki]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=bi(e);t[r]||(!function(e,t){var n=Qr.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Qr.isArray(e)?e.forEach(r):r(e),this}}]),n}();_i.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Qr.freezeMethods(_i.prototype),Qr.freezeMethods(_i);var Ei=_i;function Si(e,t){var n=this||yi,r=t||n,i=Ei.from(r.headers),a=r.data;return Qr.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function Ii(e){return!(!e||!e.__CANCEL__)}function Ti(e,t,n){Xr.call(this,null==e?"canceled":e,Xr.ERR_CANCELED,t,n),this.name="CanceledError"}Qr.inherits(Ti,Xr,{__CANCEL__:!0});var Ci=Ti;var Ai=di.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),Qr.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Qr.isString(r)&&o.push("path="+r),Qr.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Ni(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Oi=di.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=Qr.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var Pi=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(u){var s=Date.now(),c=i[o];n||(n=s),r[a]=u,i[a]=s;for(var l=o,f=0;l!==a;)f+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(s-n<t)){var h=c&&s-c;return h?Math.round(1e3*f/h):void 0}}};function Ri(e,t){var n=0,r=Pi(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,u=a-n,s=r(u);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:u,rate:s||void 0,estimated:s&&o&&a<=o?(o-a)/s:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var Di="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,a=Ei.from(e.headers).normalize(),o=e.responseType;function u(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}Qr.isFormData(i)&&(di.isStandardBrowserEnv||di.isStandardBrowserWebWorkerEnv?a.setContentType(!1):a.setContentType("multipart/form-data;",!1));var s=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+l))}var f=Ni(e.baseURL,e.url);function h(){if(s){var r=Ei.from("getAllResponseHeaders"in s&&s.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Xr("Request failed with status code "+n.status,[Xr.ERR_BAD_REQUEST,Xr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),u()}),(function(e){n(e),u()}),{data:o&&"text"!==o&&"json"!==o?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:r,config:e,request:s}),s=null}}if(s.open(e.method.toUpperCase(),ci(f,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,"onloadend"in s?s.onloadend=h:s.onreadystatechange=function(){s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&setTimeout(h)},s.onabort=function(){s&&(n(new Xr("Request aborted",Xr.ECONNABORTED,e,s)),s=null)},s.onerror=function(){n(new Xr("Network Error",Xr.ERR_NETWORK,e,s)),s=null},s.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||hi;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Xr(t,r.clarifyTimeoutError?Xr.ETIMEDOUT:Xr.ECONNABORTED,e,s)),s=null},di.isStandardBrowserEnv){var d=(e.withCredentials||Oi(f))&&e.xsrfCookieName&&Ai.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in s&&Qr.forEach(a.toJSON(),(function(e,t){s.setRequestHeader(t,e)})),Qr.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),o&&"json"!==o&&(s.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&s.addEventListener("progress",Ri(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",Ri(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){s&&(n(!t||t.type?new Ci(null,e,s):t),s.abort(),s=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(f);p&&-1===di.protocols.indexOf(p)?n(new Xr("Unsupported protocol "+p+":",Xr.ERR_BAD_REQUEST,e)):s.send(i||null)}))},Li={http:null,xhr:Di};Qr.forEach(Li,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));var Mi=function(e){for(var t,n,r=(e=Qr.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=Qr.isString(t)?Li[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new Xr("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(Qr.hasOwnProp(Li,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!Qr.isFunction(n))throw new TypeError("adapter is not a function");return n};function Fi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ci(null,e)}function Ui(e){return Fi(e),e.headers=Ei.from(e.headers),e.data=Si.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Mi(e.adapter||yi.adapter)(e).then((function(t){return Fi(e),t.data=Si.call(e,e.transformResponse,t),t.headers=Ei.from(t.headers),t}),(function(t){return Ii(t)||(Fi(e),t&&t.response&&(t.response.data=Si.call(e,e.transformResponse,t.response),t.response.headers=Ei.from(t.response.headers))),Promise.reject(t)}))}var ji=function(e){return e instanceof Ei?e.toJSON():e};function Vi(e,t){t=t||{};var n={};function r(e,t,n){return Qr.isPlainObject(e)&&Qr.isPlainObject(t)?Qr.merge.call({caseless:n},e,t):Qr.isPlainObject(t)?Qr.merge({},t):Qr.isArray(t)?t.slice():t}function i(e,t,n){return Qr.isUndefined(t)?Qr.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!Qr.isUndefined(t))return r(void 0,t)}function o(e,t){return Qr.isUndefined(t)?Qr.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function u(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}var s={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:function(e,t){return i(ji(e),ji(t),!0)}};return Qr.forEach(Object.keys(Object.assign({},e,t)),(function(r){var a=s[r]||i,o=a(e[r],t[r],r);Qr.isUndefined(o)&&a!==u||(n[r]=o)})),n}var Bi="1.4.0",zi={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){zi[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var qi={};zi.transitional=function(e,t,n){function r(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new Xr(r(i," has been removed"+(t?" in "+t:"")),Xr.ERR_DEPRECATED);return t&&!qi[i]&&(qi[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var Ki={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Xr("options must be an object",Xr.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var u=e[a],s=void 0===u||o(u,a,e);if(!0!==s)throw new Xr("option "+a+" must be "+s,Xr.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Xr("Unknown option "+a,Xr.ERR_BAD_OPTION)}},validators:zi},Gi=Ki.validators,Wi=function(){function e(t){Mt(this,e),this.defaults=t,this.interceptors={request:new fi,response:new fi}}return Ut(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n,r=t=Vi(this.defaults,t),i=r.transitional,a=r.paramsSerializer,o=r.headers;void 0!==i&&Ki.assertOptions(i,{silentJSONParsing:Gi.transitional(Gi.boolean),forcedJSONParsing:Gi.transitional(Gi.boolean),clarifyTimeoutError:Gi.transitional(Gi.boolean)},!1),null!=a&&(Qr.isFunction(a)?t.paramsSerializer={serialize:a}:Ki.assertOptions(a,{encode:Gi.function,serialize:Gi.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=o&&Qr.merge(o.common,o[t.method]))&&Qr.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete o[e]})),t.headers=Ei.concat(n,o);var u=[],s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,u.unshift(e.fulfilled,e.rejected))}));var c,l=[];this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));var f,h=0;if(!s){var d=[Ui.bind(this),void 0];for(d.unshift.apply(d,u),d.push.apply(d,l),f=d.length,c=Promise.resolve(t);h<f;)c=c.then(d[h++],d[h++]);return c}f=u.length;var p=t;for(h=0;h<f;){var v=u[h++],m=u[h++];try{p=v(p)}catch(y){m.call(this,y);break}}try{c=Ui.call(this,p)}catch(y){return Promise.reject(y)}for(h=0,f=l.length;h<f;)c=c.then(l[h++],l[h++]);return c}},{key:"getUri",value:function(e){return ci(Ni((e=Vi(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();Qr.forEach(["delete","get","head","options"],(function(e){Wi.prototype[e]=function(t,n){return this.request(Vi(n||{},{method:e,url:t,data:(n||{}).data}))}})),Qr.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Vi(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Wi.prototype[e]=t(),Wi.prototype[e+"Form"]=t(!0)}));var Hi=Wi,Qi=function(){function e(t){if(Mt(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new Ci(e,t,i),n(r.reason))}))}return Ut(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t,n=new e((function(e){t=e}));return{token:n,cancel:t}}}]),e}(),$i=Qi;var Yi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Yi).forEach((function(e){var t=Rt(e,2),n=t[0],r=t[1];Yi[r]=n}));var Ji=Yi;var Xi=function e(t){var n=new Hi(t),r=pr(Hi.prototype.request,n);return Qr.extend(r,Hi.prototype,n,{allOwnKeys:!0}),Qr.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Vi(t,n))},r}(yi);Xi.Axios=Hi,Xi.CanceledError=Ci,Xi.CancelToken=$i,Xi.isCancel=Ii,Xi.VERSION=Bi,Xi.toFormData=ri,Xi.AxiosError=Xr,Xi.Cancel=Xi.CanceledError,Xi.all=function(e){return Promise.all(e)},Xi.spread=function(e){return function(t){return e.apply(null,t)}},Xi.isAxiosError=function(e){return Qr.isObject(e)&&!0===e.isAxiosError},Xi.mergeConfig=Vi,Xi.AxiosHeaders=Ei,Xi.formToJSON=function(e){return pi(Qr.isHTMLForm(e)?new FormData(e):e)},Xi.HttpStatusCode=Ji,Xi.default=Xi;var Zi=Xi.create({baseURL:"https://api.themoviedb.org/3"});function ea(){var e=Rt((0,t.useState)([]),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){function e(){return e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zi.get(dr.fetchNetflixOriginals);case 2:return t=e.sent,r(t.data.results[Math.floor(Math.random()*t.data.results.length-1)]),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),console.log(n),(0,ur.jsxs)("header",{className:"banner",style:{backgroundSize:"cover",backgroundImage:'url("https://image.tmdb.org/t/p/original/'.concat(null===n||void 0===n?void 0:n.backdrop_path,'")'),backgroundPosition:"center center"},children:[(0,ur.jsxs)("div",{className:"banner_contents",children:[(0,ur.jsx)("h1",{className:"banner_title",children:"".concat(null===n||void 0===n?void 0:n.name)}),(0,ur.jsxs)("div",{className:"banner_buttons",children:[(0,ur.jsx)("button",{className:"banner_button",children:"Play"}),(0,ur.jsx)("button",{className:"banner_button",children:"My list"})]}),(0,ur.jsx)("h1",{className:"banner_description",children:function(e,t){return(null===e||void 0===e?void 0:e.length)>t?e.substring(0,t-1)+"...":e}("".concat(null===n||void 0===n?void 0:n.overview),150)})]}),(0,ur.jsx)("div",{className:"banner_fadeBottom"})]})}function ta(e){var n=e.title,r=e.fetchUrl,i=e.isLargeRow,a=void 0!==i&&i,o=Rt((0,t.useState)([]),2),u=o[0],s=o[1];return(0,t.useEffect)((function(){function e(){return e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zi.get(r);case 2:return t=e.sent,s(t.data.results),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]),(0,ur.jsxs)("div",{className:"row",children:[(0,ur.jsx)("h1",{children:n}),(0,ur.jsx)("div",{className:"row__posters",children:u.map((function(e){return(a&&e.poster_path||!a&&e.backdrop_path)&&(0,ur.jsx)("img",{className:"row__poster ".concat(a&&"row__posterLarge"),src:"".concat("https://image.tmdb.org/t/p/original/").concat(a?e.poster_path:e.backdrop_path),alt:e.name},e.id)}))})]})}function na(){return(0,ur.jsxs)("div",{className:"home-screen",children:[(0,ur.jsx)(sr,{}),(0,ur.jsx)(ea,{}),(0,ur.jsx)(ta,{title:"NETFLIX_ORIGINALS",fetchUrl:dr.fetchNetflixOriginals,isLargeRow:!0}),(0,ur.jsx)(ta,{title:"Trending Now",fetchUrl:dr.fetchTrending}),(0,ur.jsx)(ta,{title:"TopRated Movies",fetchUrl:dr.fetchTopRated}),(0,ur.jsx)(ta,{title:"Action Movies",fetchUrl:dr.fetchActionMovies}),(0,ur.jsx)(ta,{title:"Horror Movies",fetchUrl:dr.fetchHorrorMovies}),(0,ur.jsx)(ta,{title:"Romance Movies",fetchUrl:dr.fetchRomanceMovies}),(0,ur.jsx)(ta,{title:"Documentaries",fetchUrl:dr.fetchDocumentaries})]})}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var ra=r.startTransition;function ia(e){var n,r=e.basename,i=e.children,a=e.future,o=e.window,u=t.useRef();null==u.current&&(u.current=(void 0===(n={window:o,v5Compat:!0})&&(n={}),an((function(e,t){var n=e.location;return tn("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:nn(t)}),null,n)));var s=u.current,c=Rt(t.useState({action:s.action,location:s.location}),2),l=c[0],f=c[1],h=(a||{}).v7_startTransition,d=t.useCallback((function(e){h&&ra?ra((function(){return f(e)})):f(e)}),[f,h]);return t.useLayoutEffect((function(){return s.listen(d)}),[s,d]),t.createElement(rr,{basename:r,children:i,location:l.location,navigationType:l.action,navigator:s})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var aa,oa;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(aa||(aa={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(oa||(oa={}));var ua=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},sa={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ua(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new ca;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ca=function(e){Vt(n,e);var t=Kt(n);function n(){var e;return Mt(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return Ut(n)}(Wt(Error)),la=function(e){return function(e){var t=ua(e);return sa.encodeByteArray(t,!0)}(e).replace(/\./g,"")},fa=function(e){try{return sa.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ha(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ha(e[n],t[n]));return e}var da=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},pa=function(){try{return da()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&fa(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},va=function(){var e;return null===(e=pa())||void 0===e?void 0:e.config},ma=function(){function e(){var t=this;Mt(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Ut(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ya(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ga(){var e,t=null===(e=pa())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function ka(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function ba(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function wa(){var e=ya();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function xa(){try{return"object"===typeof indexedDB}catch(e){return!1}}var _a=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(qt(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(qt(a),Ea.prototype.create),a}return Ut(n)}(Wt(Error)),Ea=function(){function e(t,n,r){Mt(this,e),this.service=t,this.serviceName=n,this.errors=r}return Ut(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Sa,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new _a(n,a,t)}}]),e}();var Sa=/\{\$([^}]+)}/g;function Ia(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ta(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ca(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Aa(u)&&Aa(s)){if(!Ca(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Aa(e){return null!==e&&"object"===typeof e}function Na(e){for(var t=[],n=function(){var e=Rt(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Oa(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=Rt(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Pa(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Ra(e,t){var n=new Da(e,t);return n.subscribe.bind(n)}var Da=function(){function e(t,n){var r=this;Mt(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Ut(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Qt(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=La),void 0===r.error&&(r.error=La),void 0===r.complete&&(r.complete=La);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function La(){}function Ma(e){return e&&e._delegate?e._delegate:e}var Fa=function(){function e(t,n,r){Mt(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ut(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ua="[DEFAULT]",ja=function(){function e(t,n){Mt(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ut(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ma;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ua})}catch(s){}var t,n=Qt(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=Rt(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Lt(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Lt(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Qt(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=Rt(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Qt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Bw){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ua?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Bw){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua;return this.component?this.component.multipleInstances?e:Ua:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Va,Ba,za=function(){function e(t){Mt(this,e),this.name=t,this.providers=new Map}return Ut(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ja(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),qa=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ba||(Ba={}));var Ka={debug:Ba.DEBUG,verbose:Ba.VERBOSE,info:Ba.INFO,warn:Ba.WARN,error:Ba.ERROR,silent:Ba.SILENT},Ga=Ba.INFO,Wa=(h(Va={},Ba.DEBUG,"log"),h(Va,Ba.VERBOSE,"log"),h(Va,Ba.INFO,"info"),h(Va,Ba.WARN,"warn"),h(Va,Ba.ERROR,"error"),Va),Ha=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Wa[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Qa=function(){function e(t){Mt(this,e),this.name=t,this._logLevel=Ga,this._logHandler=Ha,this._userLogHandler=null,qa.push(this)}return Ut(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ba))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ka[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ba.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ba.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ba.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ba.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ba.INFO].concat(t)),this._logHandler.apply(this,[this,Ba.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ba.WARN].concat(t)),this._logHandler.apply(this,[this,Ba.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ba.ERROR].concat(t)),this._logHandler.apply(this,[this,Ba.ERROR].concat(t))}}]),e}();var $a,Ya,Ja=function(e,t){return t.some((function(t){return e instanceof t}))};var Xa=new WeakMap,Za=new WeakMap,eo=new WeakMap,to=new WeakMap,no=new WeakMap;var ro={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Za.get(e);if("objectStoreNames"===t)return e.objectStoreNames||eo.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return oo(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function io(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ya||(Ya=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(uo(this),n),oo(Xa.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return oo(e.apply(uo(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[uo(this),t].concat(r));return eo.set(a,t.sort?t.sort():[t]),oo(a)}}function ao(e){return"function"===typeof e?io(e):(e instanceof IDBTransaction&&function(e){if(!Za.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Za.set(e,t)}}(e),Ja(e,$a||($a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ro):e)}function oo(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(oo(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Xa.set(t,e)})).catch((function(){})),no.set(t,e),t}(e);if(to.has(e))return to.get(e);var t=ao(e);return t!==e&&(to.set(e,t),no.set(t,e)),t}var uo=function(e){return no.get(e)};var so,co,lo=["get","getKey","getAll","getAllKeys","count"],fo=["put","add","delete","clear"],ho=new Map;function po(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(ho.get(t))return ho.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=fo.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||lo.includes(n))){var a=function(){var e=fr(cr().mark((function e(t){var a,o,u,s,c,l,f=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return ho.set(t,a),a}}}ro=function(e){return Re(Re({},e),{},{get:function(t,n,r){return po(t,n)||e.get(t,n,r)},has:function(t,n){return!!po(t,n)||e.has(t,n)}})}(ro);var vo=function(){function e(t){Mt(this,e),this.container=t}return Ut(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var mo="@firebase/app",yo="0.9.13",go=new Qa("@firebase/app"),ko="[DEFAULT]",bo=(h(so={},mo,"fire-core"),h(so,"@firebase/app-compat","fire-core-compat"),h(so,"@firebase/analytics","fire-analytics"),h(so,"@firebase/analytics-compat","fire-analytics-compat"),h(so,"@firebase/app-check","fire-app-check"),h(so,"@firebase/app-check-compat","fire-app-check-compat"),h(so,"@firebase/auth","fire-auth"),h(so,"@firebase/auth-compat","fire-auth-compat"),h(so,"@firebase/database","fire-rtdb"),h(so,"@firebase/database-compat","fire-rtdb-compat"),h(so,"@firebase/functions","fire-fn"),h(so,"@firebase/functions-compat","fire-fn-compat"),h(so,"@firebase/installations","fire-iid"),h(so,"@firebase/installations-compat","fire-iid-compat"),h(so,"@firebase/messaging","fire-fcm"),h(so,"@firebase/messaging-compat","fire-fcm-compat"),h(so,"@firebase/performance","fire-perf"),h(so,"@firebase/performance-compat","fire-perf-compat"),h(so,"@firebase/remote-config","fire-rc"),h(so,"@firebase/remote-config-compat","fire-rc-compat"),h(so,"@firebase/storage","fire-gcs"),h(so,"@firebase/storage-compat","fire-gcs-compat"),h(so,"@firebase/firestore","fire-fst"),h(so,"@firebase/firestore-compat","fire-fst-compat"),h(so,"fire-js","fire-js"),h(so,"firebase","fire-js-all"),so),wo=new Map,xo=new Map;function _o(e,t){try{e.container.addComponent(t)}catch(n){go.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Eo(e,t){e.container.addOrOverwriteComponent(t)}function So(e){var t=e.name;if(xo.has(t))return go.debug("There were multiple attempts to register component ".concat(t,".")),!1;xo.set(t,e);var n,r=Qt(wo.values());try{for(r.s();!(n=r.n()).done;){_o(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Io(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function To(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ko;Io(e,t).clearInstance(n)}function Co(){xo.clear()}var Ao=(h(co={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),h(co,"bad-app-name","Illegal App name: '{$appName}"),h(co,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),h(co,"app-deleted","Firebase App named '{$appName}' already deleted"),h(co,"no-options","Need to provide options, when not being deployed to hosting via source."),h(co,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),h(co,"invalid-log-argument","First argument to `onLog` must be null or a function."),h(co,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),h(co,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),h(co,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),h(co,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),co),No=new Ea("app","Firebase",Ao),Oo=function(){function e(t,n,r){var i=this;Mt(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fa("app",(function(){return i}),"PUBLIC"))}return Ut(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw No.create("app-deleted",{appName:this._name})}}]),e}(),Po="9.23.0";function Ro(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:ko,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw No.create("bad-app-name",{appName:String(i)});if(n||(n=va()),!n)throw No.create("no-options");var a=wo.get(i);if(a){if(Ca(n,a.options)&&Ca(r,a.config))return a;throw No.create("duplicate-app",{appName:i})}var o,u=new za(i),s=Qt(xo.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Oo(n,r,u);return wo.set(i,l),l}function Do(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ko,t=wo.get(e);if(!t&&e===ko&&va())return Ro();if(!t)throw No.create("no-app",{appName:e});return t}function Lo(){return Array.from(wo.values())}function Mo(e){return Fo.apply(this,arguments)}function Fo(){return(Fo=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!wo.has(n)){e.next=6;break}return wo.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uo(e,t,n){var r,i=null!==(r=bo[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void go.warn(u.join(" "))}So(new Fa("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function jo(e,t){if(null!==e&&"function"!==typeof e)throw No.create("invalid-log-argument");!function(e,t){var n,r=Qt(qa);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Ka[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ba[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Vo(e){var t;t=e,qa.forEach((function(e){e.setLogLevel(t)}))}var Bo="firebase-heartbeat-database",zo=1,qo="firebase-heartbeat-store",Ko=null;function Go(){return Ko||(Ko=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=oo(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(oo(u.result),e.oldVersion,e.newVersion,oo(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Bo,zo,{upgrade:function(e,t){if(0===t)e.createObjectStore(qo)}}).catch((function(e){throw No.create("idb-open",{originalErrorMessage:e.message})}))),Ko}function Wo(e){return Ho.apply(this,arguments)}function Ho(){return Ho=fr(cr().mark((function e(t){var n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Go();case 3:return n=e.sent,e.next=6,n.transaction(qo).objectStore(qo).get(Yo(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof _a?go.warn(e.t0.message):(i=No.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),go.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Ho.apply(this,arguments)}function Qo(e,t){return $o.apply(this,arguments)}function $o(){return $o=fr(cr().mark((function e(t,n){var r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Go();case 3:return r=e.sent,i=r.transaction(qo,"readwrite"),a=i.objectStore(qo),e.next=8,a.put(n,Yo(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof _a?go.warn(e.t0.message):(o=No.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),go.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),$o.apply(this,arguments)}function Yo(e){return"".concat(e.name,"!").concat(e.options.appId)}var Jo=function(){function e(t){var n=this;Mt(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new nu(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Ut(e,[{key:"triggerHeartbeat",value:function(){var e=fr(cr().mark((function e(){var t,n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Xo(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Xo(),n=Zo(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=la(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Xo(){return(new Date).toISOString().substring(0,10)}function Zo(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Qt(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),ru(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ru(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var eu,tu,nu=function(){function e(t){Mt(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Ut(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xa()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Wo(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Qo(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Qo(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Lt(r.heartbeats),Lt(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ru(e){return la(JSON.stringify({version:2,heartbeats:e})).length}eu="",So(new Fa("platform-logger",(function(e){return new vo(e)}),"PRIVATE")),So(new Fa("heartbeat",(function(e){return new Jo(e)}),"PRIVATE")),Uo(mo,yo,eu),Uo(mo,yo,"esm2017"),Uo("fire-js","");var iu=function(){function e(t,n){var r=this;Mt(this,e),this._delegate=t,this.firebase=n,_o(t,new Fa("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Ut(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Mo(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ko;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ko;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){_o(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Eo(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),au=(h(tu={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),h(tu,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),tu),ou=new Ea("app-compat","Firebase",au);var uu=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ro(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ia(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Uo,setLogLevel:Vo,onLog:jo,apps:null,SDK_VERSION:Po,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(So(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw ou.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ha(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ia(n,e=e||ko))throw ou.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(iu);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ha(n,e)},createSubscribe:Ra,ErrorFactory:Ea,deepExtend:ha}),n}(),su=new Qa("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){su.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var cu=self.firebase.SDK_VERSION;cu&&cu.indexOf("LITE")>=0&&su.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var lu=uu;!function(e){Uo("@firebase/app-compat","0.2.13",e)}();function fu(){return fu="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},fu.apply(this,arguments)}lu.registerVersion("firebase","9.23.0","app-compat");var hu,du="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},pu={},vu=vu||{},mu=du||self;function yu(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function gu(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ku="closure_uid_"+(1e9*Math.random()>>>0),bu=0;function wu(e,t,n){return e.call.apply(e.bind,arguments)}function xu(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function _u(e,t,n){return(_u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wu:xu).apply(null,arguments)}function Eu(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Su(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Iu(){this.s=this.s,this.o=this.o}Iu.prototype.s=!1,Iu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,ku)&&e[ku]||(e[ku]=++bu)}(this)},Iu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Tu=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Cu(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Au(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(yu(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Nu(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Nu.prototype.h=function(){this.defaultPrevented=!0};var Ou=function(){if(!mu.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{mu.addEventListener("test",(function(){}),t),mu.removeEventListener("test",(function(){}),t)}catch(j){}return e}();function Pu(e){return/^[\s\xa0]*$/.test(e)}function Ru(){var e=mu.navigator;return e&&(e=e.userAgent)?e:""}function Du(e){return-1!=Ru().indexOf(e)}function Lu(e){return Lu[" "](e),e}Lu[" "]=function(){};var Mu,Fu,Uu=Du("Opera"),ju=Du("Trident")||Du("MSIE"),Vu=Du("Edge"),Bu=Vu||ju,zu=Du("Gecko")&&!(-1!=Ru().toLowerCase().indexOf("webkit")&&!Du("Edge"))&&!(Du("Trident")||Du("MSIE"))&&!Du("Edge"),qu=-1!=Ru().toLowerCase().indexOf("webkit")&&!Du("Edge");function Ku(){var e=mu.document;return e?e.documentMode:void 0}e:{var Gu="",Wu=function(){var e=Ru();return zu?/rv:([^\);]+)(\)|;)/.exec(e):Vu?/Edge\/([\d\.]+)/.exec(e):ju?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):qu?/WebKit\/(\S+)/.exec(e):Uu?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Wu&&(Gu=Wu?Wu[1]:""),ju){var Hu=Ku();if(null!=Hu&&Hu>parseFloat(Gu)){Mu=String(Hu);break e}}Mu=Gu}if(mu.document&&ju){var Qu=Ku();Fu=Qu||(parseInt(Mu,10)||void 0)}else Fu=void 0;var $u=Fu;function Yu(e,t){if(Nu.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(zu){e:{try{Lu(t.nodeName);var i=!0;break e}catch(U){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ju[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Yu.$.h.call(this)}}Su(Yu,Nu);var Ju={2:"touch",3:"pen",4:"mouse"};Yu.prototype.h=function(){Yu.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Xu="closure_listenable_"+(1e6*Math.random()|0),Zu=0;function es(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Zu,this.fa=this.ia=!1}function ts(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ns(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function rs(e){var t={};for(var n in e)t[n]=e[n];return t}var is="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function as(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<is.length;a++)n=is[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function os(e){this.src=e,this.g={},this.h=0}function us(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Tu(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ts(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ss(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}os.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ss(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new es(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var cs="closure_lm_"+(1e6*Math.random()|0),ls={};function fs(e,t,n,r,i){if(r&&r.once)return ds(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)fs(e,t[a],n,r,i);return null}return n=bs(n),e&&e[Xu]?e.O(t,n,gu(r)?!!r.capture:!!r,i):hs(e,t,n,!1,r,i)}function hs(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=gu(i)?!!i.capture:!!i,u=gs(e);if(u||(e[cs]=u=new os(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ys;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ou||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ms(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ds(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ds(e,t[a],n,r,i);return null}return n=bs(n),e&&e[Xu]?e.P(t,n,gu(r)?!!r.capture:!!r,i):hs(e,t,n,!0,r,i)}function ps(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ps(e,t[a],n,r,i);else r=gu(r)?!!r.capture:!!r,n=bs(n),e&&e[Xu]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ss(a=e.g[t],n,r,i))&&(ts(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=gs(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ss(t,n,r,i)),(n=-1<e?t[e]:null)&&vs(n))}function vs(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Xu])us(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ms(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=gs(t))?(us(n,e),0==n.h&&(n.src=null,t[cs]=null)):ts(e)}}}function ms(e){return e in ls?ls[e]:ls[e]="on"+e}function ys(e,t){if(e.fa)e=!0;else{t=new Yu(t,this);var n=e.listener,r=e.la||e.src;e.ia&&vs(e),e=n.call(r,t)}return e}function gs(e){return(e=e[cs])instanceof os?e:null}var ks="__closure_events_fn_"+(1e9*Math.random()>>>0);function bs(e){return"function"===typeof e?e:(e[ks]||(e[ks]=function(t){return e.handleEvent(t)}),e[ks])}function ws(){Iu.call(this),this.i=new os(this),this.S=this,this.J=null}function xs(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Nu(t,e);else if(t instanceof Nu)t.target=t.target||e;else{var i=t;as(t=new Nu(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=_s(o,r,!0,t)&&i}if(i=_s(o=t.g=e,r,!0,t)&&i,i=_s(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=_s(o=t.g=n[a],r,!1,t)&&i}function _s(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&us(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Su(ws,Iu),ws.prototype[Xu]=!0,ws.prototype.removeEventListener=function(e,t,n,r){ps(this,e,t,n,r)},ws.prototype.N=function(){if(ws.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ts(n[r]);delete t.g[e],t.h--}}this.J=null},ws.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ws.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Es=mu.JSON.stringify,Ss=function(){function e(t,n){Mt(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Ut(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Is(){var e=Ds,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ts=function(){function e(){Mt(this,e),this.h=this.g=null}return Ut(e,[{key:"add",value:function(e,t){var n=Cs.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Cs=new Ss((function(){return new As}),(function(e){return e.reset()})),As=function(){function e(){Mt(this,e),this.next=this.g=this.h=null}return Ut(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Ns(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Os(e){mu.setTimeout((function(){throw e}),0)}var Ps,Rs=!1,Ds=new Ts,Ls=function(){var e=mu.Promise.resolve(void 0);Ps=function(){e.then(Ms)}},Ms=function(){for(var e;e=Is();){try{e.h.call(e.g)}catch(j){Os(j)}var t=Cs;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Rs=!1};function Fs(e,t){ws.call(this),this.h=e||1,this.g=t||mu,this.j=_u(this.qb,this),this.l=Date.now()}function Us(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function js(e,t,n){if("function"===typeof e)n&&(e=_u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=_u(e.handleEvent,e)}return 2147483647<Number(t)?-1:mu.setTimeout(e,t||0)}function Vs(e){e.g=js((function(){e.g=null,e.i&&(e.i=!1,Vs(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Su(Fs,ws),(hu=Fs.prototype).ga=!1,hu.T=null,hu.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),xs(this,"tick"),this.ga&&(Us(this),this.start()))}},hu.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},hu.N=function(){Fs.$.N.call(this),Us(this),delete this.g};var Bs=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Ut(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Vs(this)}},{key:"N",value:function(){fu(Bt(n.prototype),"N",this).call(this),this.g&&(mu.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Iu);function zs(e){Iu.call(this),this.h=e,this.g={}}Su(zs,Iu);var qs=[];function Ks(e,t,n,r){Array.isArray(n)||(n&&(qs[0]=n.toString()),n=qs);for(var i=0;i<n.length;i++){var a=fs(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Gs(e){ns(e.g,(function(e,t){this.g.hasOwnProperty(t)&&vs(e)}),e),e.g={}}function Ws(){this.g=!0}function Hs(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Es(n)}catch(O){return t}}(e,n)+(r?" "+r:"")}))}zs.prototype.N=function(){zs.$.N.call(this),Gs(this)},zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ws.prototype.Ea=function(){this.g=!1},Ws.prototype.info=function(){};var Qs={},$s=null;function Ys(){return $s=$s||new ws}function Js(e){Nu.call(this,Qs.Ta,e)}function Xs(e){var t=Ys();xs(t,new Js(t))}function Zs(e,t){Nu.call(this,Qs.STAT_EVENT,e),this.stat=t}function ec(e){var t=Ys();xs(t,new Zs(t,e))}function tc(e,t){Nu.call(this,Qs.Ua,e),this.size=t}function nc(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return mu.setTimeout((function(){e()}),t)}Qs.Ta="serverreachability",Su(Js,Nu),Qs.STAT_EVENT="statevent",Su(Zs,Nu),Qs.Ua="timingevent",Su(tc,Nu);var rc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ic={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ac(){}function oc(e){return e.h||(e.h=e.i())}function uc(){}ac.prototype.h=null;var sc,cc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function lc(){Nu.call(this,"d")}function fc(){Nu.call(this,"c")}function hc(){}function dc(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new zs(this),this.P=vc,e=Bu?125:void 0,this.V=new Fs(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new pc}function pc(){this.i=null,this.g="",this.h=!1}Su(lc,Nu),Su(fc,Nu),Su(hc,ac),hc.prototype.g=function(){return new XMLHttpRequest},hc.prototype.i=function(){return{}},sc=new hc;var vc=45e3,mc={},yc={};function gc(e,t,n){e.L=1,e.v=Fc(Pc(t)),e.s=n,e.S=!0,kc(e,null)}function kc(e,t){e.G=Date.now(),_c(e),e.A=Pc(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Yc(n.i,"t",r),e.C=0,n=e.l.J,e.h=new pc,e.g=Yl(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Bs(_u(e.Pa,e,e.g),e.O)),Ks(e.U,e.g,"readystatechange",e.nb),t=e.I?rs(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Xs(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function bc(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function wc(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=xc(e,n))==yc){4==t&&(e.o=4,ec(14),i=!1),Hs(e.j,e.m,null,"[Incomplete Response]");break}if(r==mc){e.o=4,ec(15),Hs(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Hs(e.j,e.m,r,null),Cc(e,r)}bc(e)&&r!=yc&&r!=mc&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ec(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),zl(t),t.M=!0,ec(11))):(Hs(e.j,e.m,n,"[Invalid Chunked Response]"),Tc(e),Ic(e))}function xc(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?yc:(n=Number(t.substring(n,r)),isNaN(n)?mc:(r+=1)+n>t.length?yc:(t=t.slice(r,r+n),e.C=r+n,t))}function _c(e){e.Y=Date.now()+e.P,Ec(e,e.P)}function Ec(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=nc(_u(e.lb,e),t)}function Sc(e){e.B&&(mu.clearTimeout(e.B),e.B=null)}function Ic(e){0==e.l.H||e.J||Gl(e.l,e)}function Tc(e){Sc(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Us(e.V),Gs(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Cc(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||rl(n.i,e)))if(!e.K&&rl(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Kl(n),Dl(n)}Bl(n),ec(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=nc(_u(n.ib,n),6e3));if(1>=nl(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Hl(n,11)}else if((e.K||n.g==e)&&Kl(n),!Pu(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(il(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,Mc(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=$l(r,r.J?r.pa:null,r.Y),d.K){al(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(Sc(p),_c(p)),r.g=d}else Vl(r);0<n.j.length&&Ml(n)}else"stop"!=a[0]&&"close"!=a[0]||Hl(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Hl(n,7):Rl(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Xs()}catch(a){}}function Ac(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(yu(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(yu(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(yu(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(hu=dc.prototype).setTimeout=function(e){this.P=e},hu.nb=function(e){e=e.target;var t=this.M;t&&3==Tl(e)?t.l():this.Pa(e)},hu.Pa=function(e){try{if(e==this.g)e:{var t=Tl(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Bu||this.g&&(this.h.h||this.g.ja()||Cl(this.g)))){this.J||4!=t||7==n||Xs(),Sc(this);var r=this.g.da();this.ca=r;t:if(bc(this)){var i=Cl(this.g);e="";var a=i.length,o=4==Tl(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Tc(this),Ic(this);var u="";break t}this.h.i=new mu.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pu(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,ec(12),Tc(this),Ic(this);break e}Hs(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cc(this,r)}this.S?(wc(this,t,u),Bu&&this.i&&3==t&&(Ks(this.U,this.V,"tick",this.mb),this.V.start())):(Hs(this.j,this.m,u,null),Cc(this,u)),4==t&&Tc(this),this.i&&!this.J&&(4==t?Gl(this.l,this):(this.i=!1,_c(this)))}else(function(e){var t={};e=(e.g&&2<=Tl(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Pu(e[n])){var r=Ns(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,ec(12)):(this.o=0,ec(13)),Tc(this),Ic(this)}}}catch(t){}},hu.mb=function(){if(this.g){var e=Tl(this.g),t=this.g.ja();this.C<t.length&&(Sc(this),wc(this,e,t),this.i&&4!=e&&_c(this))}},hu.cancel=function(){this.J=!0,Tc(this)},hu.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Xs(),ec(17)),Tc(this),this.o=2,Ic(this)):Ec(this,this.Y-e)};var Nc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oc(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Oc){this.h=e.h,Rc(this,e.j),this.s=e.s,this.g=e.g,Dc(this,e.m),this.l=e.l;var t=e.i,n=new Wc;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Lc(this,n),this.o=e.o}else e&&(t=String(e).match(Nc))?(this.h=!1,Rc(this,t[1]||"",!0),this.s=Uc(t[2]||""),this.g=Uc(t[3]||"",!0),Dc(this,t[4]),this.l=Uc(t[5]||"",!0),Lc(this,t[6]||"",!0),this.o=Uc(t[7]||"")):(this.h=!1,this.i=new Wc(null,this.h))}function Pc(e){return new Oc(e)}function Rc(e,t,n){e.j=n?Uc(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Dc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Lc(e,t,n){t instanceof Wc?(e.i=t,function(e,t){t&&!e.j&&(Hc(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Qc(this,t),Yc(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=jc(t,Kc)),e.i=new Wc(t,e.h))}function Mc(e,t,n){e.i.set(t,n)}function Fc(e){return Mc(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Uc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function jc(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Vc),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Vc(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Oc.prototype.toString=function(){var e=[],t=this.j;t&&e.push(jc(t,Bc,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(jc(t,Bc,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(jc(n,"/"==n.charAt(0)?qc:zc,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",jc(n,Gc)),e.join("")};var Bc=/[#\/\?@]/g,zc=/[#\?:]/g,qc=/[#\?]/g,Kc=/[#\?@]/g,Gc=/#/g;function Wc(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Hc(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Qc(e,t){Hc(e),t=Jc(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function $c(e,t){return Hc(e),t=Jc(e,t),e.g.has(t)}function Yc(e,t,n){Qc(e,t),0<n.length&&(e.i=null,e.g.set(Jc(e,t),Cu(n)),e.h+=n.length)}function Jc(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(hu=Wc.prototype).add=function(e,t){Hc(this),this.i=null,e=Jc(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},hu.forEach=function(e,t){Hc(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},hu.ta=function(){Hc(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},hu.Z=function(e){Hc(this);var t=[];if("string"===typeof e)$c(this,e)&&(t=t.concat(this.g.get(Jc(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},hu.set=function(e,t){return Hc(this),this.i=null,$c(this,e=Jc(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},hu.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},hu.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Xc=Ut((function e(t,n){Mt(this,e),this.g=t,this.map=n}));function Zc(e){this.l=e||el,mu.PerformanceNavigationTiming?e=0<(e=mu.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(mu.g&&mu.g.Ka&&mu.g.Ka()&&mu.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var el=10;function tl(e){return!!e.h||!!e.g&&e.g.size>=e.j}function nl(e){return e.h?1:e.g?e.g.size:0}function rl(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function il(e,t){e.g?e.g.add(t):e.h=t}function al(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ol(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Qt(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Cu(e.i)}Zc.prototype.cancel=function(){if(this.i=ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Qt(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var ul=function(){function e(){Mt(this,e)}return Ut(e,[{key:"stringify",value:function(e){return mu.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return mu.JSON.parse(e,void 0)}}]),e}();function sl(){this.g=new ul}function cl(e,t,n){var r=n||"";try{Ac(e,(function(e,n){var i=e;gu(e)&&(i=Es(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ll(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(U){}}function fl(e){this.l=e.fc||null,this.j=e.ob||!1}function hl(e,t){ws.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=dl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Su(fl,ac),fl.prototype.g=function(){return new hl(this.l,this.j)},fl.prototype.i=function(e){return function(){return e}}({}),Su(hl,ws);var dl=0;function pl(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function vl(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ml(e)}function ml(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(hu=hl.prototype).open=function(e,t){if(this.readyState!=dl)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ml(this)},hu.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||mu).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},hu.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,vl(this)),this.readyState=dl},hu.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ml(this)),this.g&&(this.readyState=3,ml(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof mu.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pl(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},hu.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?vl(this):ml(this),3==this.readyState&&pl(this)}},hu.Za=function(e){this.g&&(this.response=this.responseText=e,vl(this))},hu.Ya=function(e){this.g&&(this.response=e,vl(this))},hu.ka=function(){this.g&&vl(this)},hu.setRequestHeader=function(e,t){this.v.append(e,t)},hu.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},hu.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(hl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var yl=mu.JSON.parse;function gl(e){ws.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=kl,this.L=this.M=!1}Su(gl,ws);var kl="",bl=/^https?$/i,wl=["POST","PUT"];function xl(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,_l(e),Sl(e)}function _l(e){e.F||(e.F=!0,xs(e,"complete"),xs(e,"error"))}function El(e){if(e.h&&"undefined"!=typeof vu&&(!e.C[1]||4!=Tl(e)||2!=e.da()))if(e.v&&4==Tl(e))js(e.La,0,e);else if(xs(e,"readystatechange"),4==Tl(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Nc)[1]||null;!a&&mu.self&&mu.self.location&&(a=mu.self.location.protocol.slice(0,-1)),i=!bl.test(a?a.toLowerCase():"")}t=i}if(t)xs(e,"complete"),xs(e,"success");else{e.m=6;try{var o=2<Tl(e)?e.g.statusText:""}catch(O){o=""}e.j=o+" ["+e.da()+"]",_l(e)}}finally{Sl(e)}}}function Sl(e,t){if(e.g){Il(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||xs(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Il(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(mu.clearTimeout(e.A),e.A=null)}function Tl(e){return e.g?e.g.readyState:0}function Cl(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case kl:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(H){return null}}function Al(e){var t="";return ns(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Nl(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Al(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Mc(e,t,n))}function Ol(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Pl(e){this.Ga=0,this.j=[],this.l=new Ws,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ol("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ol("baseRetryDelayMs",5e3,e),this.hb=Ol("retryDelaySeedMs",1e4,e),this.eb=Ol("forwardChannelMaxRetries",2,e),this.xa=Ol("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Zc(e&&e.concurrentRequestLimit),this.Ja=new sl,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Rl(e){if(Ll(e),3==e.H){var t=e.W++,n=Pc(e.I);if(Mc(n,"SID",e.K),Mc(n,"RID",t),Mc(n,"TYPE","terminate"),Ul(e,n),(t=new dc(e,e.l,t)).L=2,t.v=Fc(Pc(n)),n=!1,mu.navigator&&mu.navigator.sendBeacon)try{n=mu.navigator.sendBeacon(t.v.toString(),"")}catch(K){}!n&&mu.Image&&((new Image).src=t.v,n=!0),n||(t.g=Yl(t.l,null),t.g.ha(t.v)),t.G=Date.now(),_c(t)}Ql(e)}function Dl(e){e.g&&(zl(e),e.g.cancel(),e.g=null)}function Ll(e){Dl(e),e.u&&(mu.clearTimeout(e.u),e.u=null),Kl(e),e.i.cancel(),e.m&&("number"===typeof e.m&&mu.clearTimeout(e.m),e.m=null)}function Ml(e){if(!tl(e.i)&&!e.m){e.m=!0;var t=e.Na;Ps||Ls(),Rs||(Ps(),Rs=!0),Ds.add(t,e),e.C=0}}function Fl(e,t){var n;n=t?t.m:e.W++;var r=Pc(e.I);Mc(r,"SID",e.K),Mc(r,"RID",n),Mc(r,"AID",e.V),Ul(e,r),e.o&&e.s&&Nl(r,e.o,e.s),n=new dc(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=jl(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),il(e.i,n),gc(n,r,t)}function Ul(e,t){e.na&&ns(e.na,(function(e,n){Mc(t,n,e)})),e.h&&Ac({},(function(e,n){Mc(t,n,e)}))}function jl(e,t,n){n=Math.min(e.j.length,n);var r=e.h?_u(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{cl(l,o,"req"+c+"_")}catch(be){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function Vl(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ps||Ls(),Rs||(Ps(),Rs=!0),Ds.add(t,e),e.A=0}}function Bl(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=nc(_u(e.Ma,e),Wl(e,e.A)),e.A++,!0)}function zl(e){null!=e.B&&(mu.clearTimeout(e.B),e.B=null)}function ql(e){e.g=new dc(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Pc(e.wa);Mc(t,"RID","rpc"),Mc(t,"SID",e.K),Mc(t,"AID",e.V),Mc(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Mc(t,"TO",e.qa),Mc(t,"TYPE","xmlhttp"),Ul(e,t),e.o&&e.s&&Nl(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Fc(Pc(t)),n.s=null,n.S=!0,kc(n,e)}function Kl(e){null!=e.v&&(mu.clearTimeout(e.v),e.v=null)}function Gl(e,t){var n=null;if(e.g==t){Kl(e),zl(e),e.g=null;var r=2}else{if(!rl(e.i,t))return;n=t.F,al(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;xs(r=Ys(),new tc(r,n)),Ml(e)}else Vl(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(nl(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=nc(_u(e.Na,e,t),Wl(e,e.C)),e.C++,!0))}(e,t)||2==r&&Bl(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Hl(e,5);break;case 4:Hl(e,10);break;case 3:Hl(e,6);break;default:Hl(e,2)}}function Wl(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Hl(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=_u(e.pb,e);n||(n=new Oc("//www.google.com/images/cleardot.gif"),mu.location&&"http"==mu.location.protocol||Rc(n,"https"),Fc(n)),function(e,t){var n=new Ws;if(mu.Image){var r=new Image;r.onload=Eu(ll,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Eu(ll,n,r,"TestLoadImage: error",!1,t),r.onabort=Eu(ll,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Eu(ll,n,r,"TestLoadImage: timeout",!1,t),mu.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ec(2);e.H=0,e.h&&e.h.za(t),Ql(e),Ll(e)}function Ql(e){if(e.H=0,e.ma=[],e.h){var t=ol(e.i);0==t.length&&0==e.j.length||(Au(e.ma,t),Au(e.ma,e.j),e.i.i.length=0,Cu(e.j),e.j.length=0),e.h.ya()}}function $l(e,t,n){var r=n instanceof Oc?Pc(n):new Oc(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Dc(r,r.m);else{var i=mu.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Oc(null);r&&Rc(a,r),t&&(a.g=t),i&&Dc(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Mc(r,n,t),Mc(r,"VER",e.ra),Ul(e,r),r}function Yl(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new gl(new fl({ob:!0})):new gl(e.va)).Oa(e.J),t}function Jl(){}function Xl(){if(ju&&!(10<=Number($u)))throw Error("Environmental error: no available transport.")}function Zl(e,t){ws.call(this),this.g=new Pl(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Pu(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Pu(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new nf(this)}function ef(e){lc.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function tf(){fc.call(this),this.status=1}function nf(e){this.g=e}function rf(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function af(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function of(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(hu=gl.prototype).Oa=function(e){this.M=e},hu.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():sc.g(),this.C=this.u?oc(this.u):oc(sc),this.g.onreadystatechange=_u(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void xl(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=Qt(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=mu.FormData&&e instanceof mu.FormData,!(0<=Tu(wl,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=Qt(n);try{for(c.s();!(s=c.n()).done;){var l=Rt(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Il(this),0<this.B&&((this.L=function(e){return ju&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_u(this.ua,this)):this.A=js(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){xl(this,u)}},hu.ua=function(){"undefined"!=typeof vu&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xs(this,"timeout"),this.abort(8))},hu.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,xs(this,"complete"),xs(this,"abort"),Sl(this))},hu.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sl(this,!0)),gl.$.N.call(this)},hu.La=function(){this.s||(this.G||this.v||this.l?El(this):this.kb())},hu.kb=function(){El(this)},hu.isActive=function(){return!!this.g},hu.da=function(){try{return 2<Tl(this)?this.g.status:-1}catch(F){return-1}},hu.ja=function(){try{return this.g?this.g.responseText:""}catch(F){return""}},hu.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),yl(t)}},hu.Ia=function(){return this.m},hu.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(hu=Pl.prototype).ra=8,hu.H=1,hu.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new dc(this,this.l,e),n=this.s;if(this.U&&(n?as(n=rs(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=jl(this,t,r),Mc(i=Pc(this.I),"RID",e),Mc(i,"CVER",22),this.F&&Mc(i,"X-HTTP-Session-Id",this.F),Ul(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Al(n)))+"&"+r:this.o&&Nl(i,this.o,n)),il(this.i,t),this.bb&&Mc(i,"TYPE","init"),this.P?(Mc(i,"$req",r),Mc(i,"SID","null"),t.aa=!0,gc(t,i,null)):gc(t,i,r),this.H=2}}else 3==this.H&&(e?Fl(this,e):0==this.j.length||tl(this.i)||Fl(this))},hu.Ma=function(){if(this.u=null,ql(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=nc(_u(this.jb,this),e)}},hu.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ec(10),Dl(this),ql(this))},hu.ib=function(){null!=this.v&&(this.v=null,Dl(this),Bl(this),ec(19))},hu.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ec(2)):(this.l.info("Failed to ping google.com"),ec(1))},hu.isActive=function(){return!!this.h&&this.h.isActive(this)},(hu=Jl.prototype).Ba=function(){},hu.Aa=function(){},hu.za=function(){},hu.ya=function(){},hu.isActive=function(){return!0},hu.Va=function(){},Xl.prototype.g=function(e,t){return new Zl(e,t)},Su(Zl,ws),Zl.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ec(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=$l(e,null,e.Y),Ml(e)},Zl.prototype.close=function(){Rl(this.g)},Zl.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Es(e),e=n);t.j.push(new Xc(t.fb++,e)),3==t.H&&Ml(t)},Zl.prototype.N=function(){this.g.h=null,delete this.j,Rl(this.g),delete this.g,Zl.$.N.call(this)},Su(ef,lc),Su(tf,fc),Su(nf,Jl),nf.prototype.Ba=function(){xs(this.g,"a")},nf.prototype.Aa=function(e){xs(this.g,new ef(e))},nf.prototype.za=function(e){xs(this.g,new tf)},nf.prototype.ya=function(){xs(this.g,"b")},Su(rf,(function(){this.blockSize=-1})),rf.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},rf.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)af(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){af(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){af(this,r),i=0;break}}this.h=i,this.i+=t},rf.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var uf={};function sf(e){return-128<=e&&128>e?function(e,t){var n=uf;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new of([0|e],0>e?-1:0)})):new of([0|e],0>e?-1:0)}function cf(e){if(isNaN(e)||!isFinite(e))return ff;if(0>e)return mf(cf(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=lf;return new of(t,0)}var lf=4294967296,ff=sf(0),hf=sf(1),df=sf(16777216);function pf(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function vf(e){return-1==e.h}function mf(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new of(n,~e.h).add(hf)}function yf(e,t){return e.add(mf(t))}function gf(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function kf(e,t){this.g=e,this.h=t}function bf(e,t){if(pf(t))throw Error("division by zero");if(pf(e))return new kf(ff,ff);if(vf(e))return t=bf(mf(e),t),new kf(mf(t.g),mf(t.h));if(vf(t))return t=bf(e,mf(t)),new kf(mf(t.g),t.h);if(30<e.g.length){if(vf(e)||vf(t))throw Error("slowDivide_ only works with positive integers.");for(var n=hf,r=t;0>=r.X(e);)n=wf(n),r=wf(r);var i=xf(n,1),a=xf(r,1);for(r=xf(r,2),n=xf(n,2);!pf(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=xf(r,1),n=xf(n,1)}return t=yf(e,i.R(t)),new kf(i,t)}for(i=ff;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=cf(n)).R(t);vf(o)||0<o.X(e);)o=(a=cf(n-=r)).R(t);pf(a)&&(a=hf),i=i.add(a),e=yf(e,o)}return new kf(i,e)}function wf(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new of(n,e.h)}function xf(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new of(i,e.h)}(hu=of.prototype).ea=function(){if(vf(this))return-mf(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:lf+r)*t,t*=lf}return e},hu.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(pf(this))return"0";if(vf(this))return"-"+mf(this).toString(e);for(var t=cf(Math.pow(e,6)),n=this,r="";;){var i=bf(n,t).g,a=((0<(n=yf(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(pf(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},hu.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},hu.X=function(e){return vf(e=yf(this,e))?-1:pf(e)?0:1},hu.abs=function(){return vf(this)?mf(this):this},hu.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new of(n,-2147483648&n[n.length-1]?-1:0)},hu.R=function(e){if(pf(this)||pf(e))return ff;if(vf(this))return vf(e)?mf(this).R(mf(e)):mf(mf(this).R(e));if(vf(e))return mf(this.R(mf(e)));if(0>this.X(df)&&0>e.X(df))return cf(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,gf(n,2*r+2*i),n[2*r+2*i+1]+=a*s,gf(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,gf(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,gf(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new of(n,0)},hu.gb=function(e){return bf(this,e).h},hu.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new of(n,this.h&e.h)},hu.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new of(n,this.h|e.h)},hu.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new of(n,this.h^e.h)},Xl.prototype.createWebChannel=Xl.prototype.g,Zl.prototype.send=Zl.prototype.u,Zl.prototype.open=Zl.prototype.m,Zl.prototype.close=Zl.prototype.close,rc.NO_ERROR=0,rc.TIMEOUT=8,rc.HTTP_ERROR=6,ic.COMPLETE="complete",uc.EventType=cc,cc.OPEN="a",cc.CLOSE="b",cc.ERROR="c",cc.MESSAGE="d",ws.prototype.listen=ws.prototype.O,gl.prototype.listenOnce=gl.prototype.P,gl.prototype.getLastError=gl.prototype.Sa,gl.prototype.getLastErrorCode=gl.prototype.Ia,gl.prototype.getStatus=gl.prototype.da,gl.prototype.getResponseJson=gl.prototype.Wa,gl.prototype.getResponseText=gl.prototype.ja,gl.prototype.send=gl.prototype.ha,gl.prototype.setWithCredentials=gl.prototype.Oa,rf.prototype.digest=rf.prototype.l,rf.prototype.reset=rf.prototype.reset,rf.prototype.update=rf.prototype.j,of.prototype.add=of.prototype.add,of.prototype.multiply=of.prototype.R,of.prototype.modulo=of.prototype.gb,of.prototype.compare=of.prototype.X,of.prototype.toNumber=of.prototype.ea,of.prototype.toString=of.prototype.toString,of.prototype.getBits=of.prototype.D,of.fromNumber=cf,of.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return mf(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=cf(Math.pow(n,8)),i=ff,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=cf(Math.pow(n,o)),i=i.R(o).add(cf(u))):i=(i=i.R(r)).add(cf(u))}return i};var _f=pu.createWebChannelTransport=function(){return new Xl},Ef=pu.getStatEventTarget=function(){return Ys()},Sf=pu.ErrorCode=rc,If=pu.EventType=ic,Tf=pu.Event=Qs,Cf=pu.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Af=pu.FetchXmlHttpFactory=fl,Nf=pu.WebChannel=uc,Of=pu.XhrIo=gl,Pf=pu.Md5=rf,Rf=pu.Integer=of,Df="@firebase/firestore",Lf=function(){function e(t){Mt(this,e),this.uid=t}return Ut(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Lf.UNAUTHENTICATED=new Lf(null),Lf.GOOGLE_CREDENTIALS=new Lf("google-credentials-uid"),Lf.FIRST_PARTY=new Lf("first-party-uid"),Lf.MOCK_USER=new Lf("mock-user");var Mf="9.23.0",Ff=new Qa("@firebase/firestore");function Uf(){return Ff.logLevel}function jf(e){if(Ff.logLevel<=Ba.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zf);Ff.debug.apply(Ff,["Firestore (".concat(Mf,"): ").concat(e)].concat(Lt(i)))}}function Vf(e){if(Ff.logLevel<=Ba.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zf);Ff.error.apply(Ff,["Firestore (".concat(Mf,"): ").concat(e)].concat(Lt(i)))}}function Bf(e){if(Ff.logLevel<=Ba.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zf);Ff.warn.apply(Ff,["Firestore (".concat(Mf,"): ").concat(e)].concat(Lt(i)))}}function zf(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function qf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Mf,") INTERNAL ASSERTION FAILED: ")+e;throw Vf(t),new Error(t)}function Kf(e,t){e||qf()}function Gf(e,t){return e}var Wf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Hf=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Ut(n)}(_a),Qf=Ut((function e(){var t=this;Mt(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),$f=Ut((function e(t,n){Mt(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Yf=function(){function e(){Mt(this,e)}return Ut(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Lf.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Jf=function(){function e(t){Mt(this,e),this.token=t,this.changeListener=null}return Ut(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Xf=function(){function e(t){Mt(this,e),this.t=t,this.currentUser=Lf.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Ut(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Qf;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Qf,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){jf("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(jf("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Qf)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(jf("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Kf("string"==typeof n.accessToken),new $f(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Kf(null===e||"string"==typeof e),new Lf(e)}}]),e}(),Zf=function(){function e(t,n,r){Mt(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Lf.FIRST_PARTY,this.g=new Map}return Ut(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),eh=function(){function e(t,n,r){Mt(this,e),this.h=t,this.l=n,this.m=r}return Ut(e,[{key:"getToken",value:function(){return Promise.resolve(new Zf(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Lf.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),th=Ut((function e(t){Mt(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),nh=function(){function e(t){Mt(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return Ut(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&jf("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,jf("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){jf("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):jf("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Kf("string"==typeof t.token),e.T=t.token,new th(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function rh(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var ih=function(){function e(){Mt(this,e)}return Ut(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=rh(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function ah(e,t){return e<t?-1:e>t?1:0}function oh(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function uh(e){return e+"\0"}var sh=function(){function e(t,n){if(Mt(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Hf(Wf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Hf(Wf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Hf(Wf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Hf(Wf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Ut(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?ah(this.nanoseconds,e.nanoseconds):ah(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),ch=function(){function e(t){Mt(this,e),this.timestamp=t}return Ut(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new sh(0,0))}},{key:"max",value:function(){return new e(new sh(253402300799,999999999))}}]),e}(),lh=function(){function e(t,n,r){Mt(this,e),void 0===n?n=0:n>t.length&&qf(),void 0===r?r=t.length-n:r>t.length-n&&qf(),this.segments=t,this.offset=n,this.len=r}return Ut(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),fh=function(e){Vt(n,e);var t=Kt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Lt(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(lh),hh=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dh=function(e){Vt(n,e);var t=Kt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return hh.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Hf(Wf.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Hf(Wf.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Hf(Wf.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(lh),ph=function(){function e(t){Mt(this,e),this.path=t}return Ut(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===fh.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(fh.fromString(t))}},{key:"fromName",value:function(t){return new e(fh.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(fh.emptyPath())}},{key:"comparator",value:function(e,t){return fh.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new fh(t.slice()))}}]),e}(),vh=Ut((function e(t,n,r,i){Mt(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function mh(e){return e.fields.find((function(e){return 2===e.kind}))}function yh(e){return e.fields.filter((function(e){return 2!==e.kind}))}vh.UNKNOWN_ID=-1;var gh=Ut((function e(t,n){Mt(this,e),this.fieldPath=t,this.kind=n}));var kh=function(){function e(t,n){Mt(this,e),this.sequenceNumber=t,this.offset=n}return Ut(e,null,[{key:"empty",value:function(){return new e(0,xh.min())}}]),e}();function bh(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ch.fromTimestamp(1e9===r?new sh(n+1,0):new sh(n,r));return new xh(i,ph.empty(),t)}function wh(e){return new xh(e.readTime,e.key,-1)}var xh=function(){function e(t,n,r){Mt(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Ut(e,null,[{key:"min",value:function(){return new e(ch.min(),ph.empty(),-1)}},{key:"max",value:function(){return new e(ch.max(),ph.empty(),-1)}}]),e}();function _h(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ph.comparator(e.documentKey,t.documentKey))?n:ah(e.largestBatchId,t.largestBatchId)}var Eh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sh=function(){function e(){Mt(this,e),this.onCommittedListeners=[]}return Ut(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Ih(e){return Th.apply(this,arguments)}function Th(){return Th=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Wf.FAILED_PRECONDITION&&t.message===Eh){e.next=2;break}throw t;case 2:jf("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Th.apply(this,arguments)}var Ch=function(){function e(t){var n=this;Mt(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Ut(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&qf(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Qt(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Ah=function(){function e(t,n){var r=this;Mt(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new Qf,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new Ph(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=Fh(e.target.error);r.v.reject(new Ph(t,n))}}return Ut(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(jf("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Dh(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Ph(n,t)}}}]),e}(),Nh=function(){function e(t,n,r){Mt(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(ya())&&Vf("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Ut(e,[{key:"$",value:function(){var e=fr(cr().mark((function e(t){var n=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return jf("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ph(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Hf(Wf.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Hf(Wf.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Ph(t,n))},i.onupgradeneeded=function(e){jf("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){jf("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=fr(cr().mark((function e(t,n,r,i){var a,o,u,s,c=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=cr().mark((function e(){var n,u,s,l;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=Ah.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),Ch.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.R;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,jf("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return jf("SimpleDb","Removing database:",e),Lh(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!xa())return!1;if(e.C())return!0;var t=ya(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Oh=function(){function e(t){Mt(this,e),this.L=t,this.q=!1,this.U=null}return Ut(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return Lh(this.L.delete())}}]),e}(),Ph=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,Wf.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Ut(n)}(Hf);function Rh(e){return"IndexedDbTransactionError"===e.name}var Dh=function(){function e(t){Mt(this,e),this.store=t}return Ut(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(jf("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(jf("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Lh(n)}},{key:"add",value:function(e){return jf("SimpleDb","ADD",this.store.name,e,e),Lh(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Lh(this.store.get(e)).next((function(n){return void 0===n&&(n=null),jf("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return jf("SimpleDb","DELETE",this.store.name,e),Lh(this.store.delete(e))}},{key:"count",value:function(){return jf("SimpleDb","COUNT",this.store.name),Lh(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Ch((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Ch((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){jf("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new Ch((function(n,r){t.onerror=function(e){var t=Fh(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new Ch((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Oh(i),o=t(i.primaryKey,i.value,a);if(o instanceof Ch){var u=o.catch((function(e){return a.done(),Ch.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return Ch.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Lh(e){return new Ch((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Fh(e.target.error);n(t)}}))}var Mh=!1;function Fh(e){var t=Nh.S(ya());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Hf("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Mh||(Mh=!0,setTimeout((function(){throw r}),0)),r}}return e}var Uh=function(){function e(t,n){Mt(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return Ut(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;jf("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=jf,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Rh(e.t4)){e.next=17;break}jf("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Ih(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),jh=function(){function e(t,n){Mt(this,e),this.localStore=t,this.persistence=n}return Ut(e,[{key:"nt",value:function(){var e=fr(cr().mark((function e(){var t,n=this,r=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Ch.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return jf("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return jf("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=wh(t);_h(r,n)>0&&(n=r)})),new xh(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Vh=function(){function e(t,n){var r=this;Mt(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return Ut(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Bh(e){return null==e}function zh(e){return 0===e&&1/e==-1/0}function qh(e){return"number"==typeof e&&Number.isInteger(e)&&!zh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Kh(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Wh(t)),t=Gh(e.get(n),t);return Wh(t)}function Gh(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Wh(e){return e+"\x01\x01"}function Hh(e){var t=e.length;if(Kf(t>=2),2===t)return Kf("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),fh.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&qf(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:qf()}a=o+2}return new fh(r)}Vh.ct=-1;var Qh=["userId","batchId"];function $h(e,t){return[e,Kh(t)]}function Yh(e,t,n){return[e,Kh(t),n]}var Jh={},Xh=["prefixPath","collectionGroup","readTime","documentId"],Zh=["prefixPath","collectionGroup","documentId"],ed=["collectionGroup","readTime","prefixPath","documentId"],td=["canonicalId","targetId"],nd=["targetId","path"],rd=["path","targetId"],id=["collectionId","parent"],ad=["indexId","uid"],od=["uid","sequenceNumber"],ud=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sd=["indexId","uid","orderedDocumentKey"],cd=["userId","collectionPath","documentId"],ld=["userId","collectionPath","largestBatchId"],fd=["userId","collectionGroup","largestBatchId"],hd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),dd=[].concat(Lt(hd),["documentOverlays"]),pd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vd=pd,md=[].concat(vd,["indexConfiguration","indexState","indexEntries"]),yd=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return Ut(n)}(Sh);function gd(e,t){var n=Gf(e);return Nh.M(n.ht,t)}function kd(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function bd(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wd(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var xd=function(){function e(t,n){Mt(this,e),this.comparator=t,this.root=n||Ed.EMPTY}return Ut(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ed.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ed.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new _d(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new _d(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new _d(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new _d(this.root,e,this.comparator,!0)}}]),e}(),_d=function(){function e(t,n,r,i){Mt(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Ut(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Ed=function(){function e(t,n,r,i,a){Mt(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Ut(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw qf();if(this.right.isRed())throw qf();var e=this.left.check();if(e!==this.right.check())throw qf();return e+(this.isRed()?0:1)}}]),e}();Ed.EMPTY=null,Ed.RED=!0,Ed.BLACK=!1,Ed.EMPTY=new(function(){function e(){Mt(this,e),this.size=0}return Ut(e,[{key:"key",get:function(){throw qf()}},{key:"value",get:function(){throw qf()}},{key:"color",get:function(){throw qf()}},{key:"left",get:function(){throw qf()}},{key:"right",get:function(){throw qf()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Ed(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Sd=function(){function e(t){Mt(this,e),this.comparator=t,this.data=new xd(this.comparator)}return Ut(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Id(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Id(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Id=function(){function e(t){Mt(this,e),this.iter=t}return Ut(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Td(e){return e.hasNext()?e.getNext():void 0}var Cd=function(){function e(t){Mt(this,e),this.fields=t,t.sort(dh.comparator)}return Ut(e,[{key:"unionWith",value:function(t){var n,r=new Sd(dh.comparator),i=Qt(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Qt(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Qt(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return oh(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Ad=function(e){Vt(n,e);var t=Kt(n);function n(){var e;return Mt(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return Ut(n)}(Wt(Error));var Nd=function(e){function t(e){Mt(this,t),this.binaryString=e}return Ut(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return ah(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ad("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Nd.EMPTY_BYTE_STRING=new Nd("");var Od=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pd(e){if(Kf(!!e),"string"==typeof e){var t=0,n=Od.exec(e);if(Kf(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Rd(e.seconds),nanos:Rd(e.nanos)}}function Rd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Dd(e){return"string"==typeof e?Nd.fromBase64String(e):Nd.fromUint8Array(e)}function Ld(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Md(e){var t=e.mapValue.fields.__previous_value__;return Ld(t)?Md(t):t}function Fd(e){var t=Pd(e.mapValue.fields.__local_write_time__.timestampValue);return new sh(t.seconds,t.nanos)}var Ud=Ut((function e(t,n,r,i,a,o,u,s,c){Mt(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),jd=function(){function e(t,n){Mt(this,e),this.projectId=t,this.database=n||"(default)"}return Ut(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Vd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bd={nullValue:"NULL_VALUE"};function zd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ld(e)?4:np(e)?9007199254740991:10:qf()}function qd(e,t){if(e===t)return!0;var n=zd(e);if(n!==zd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fd(e).isEqual(Fd(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Pd(e.timestampValue),r=Pd(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Dd(e.bytesValue).isEqual(Dd(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Rd(e.geoPointValue.latitude)===Rd(t.geoPointValue.latitude)&&Rd(e.geoPointValue.longitude)===Rd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Rd(e.integerValue)===Rd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Rd(e.doubleValue),r=Rd(t.doubleValue);return n===r?zh(n)===zh(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return oh(e.arrayValue.values||[],t.arrayValue.values||[],qd);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(kd(n)!==kd(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qd(n[i],r[i])))return!1;return!0}(e,t);default:return qf()}}function Kd(e,t){return void 0!==(e.values||[]).find((function(e){return qd(e,t)}))}function Gd(e,t){if(e===t)return 0;var n=zd(e),r=zd(t);if(n!==r)return ah(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ah(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Rd(e.integerValue||e.doubleValue),r=Rd(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Wd(e.timestampValue,t.timestampValue);case 4:return Wd(Fd(e),Fd(t));case 5:return ah(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Dd(e),r=Dd(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=ah(n[i],r[i]);if(0!==a)return a}return ah(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=ah(Rd(e.latitude),Rd(t.latitude));return 0!==n?n:ah(Rd(e.longitude),Rd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Gd(n[i],r[i]);if(a)return a}return ah(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Vd.mapValue&&t===Vd.mapValue)return 0;if(e===Vd.mapValue)return 1;if(t===Vd.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=ah(r[o],a[o]);if(0!==u)return u;var s=Gd(n[r[o]],i[a[o]]);if(0!==s)return s}return ah(r.length,a.length)}(e.mapValue,t.mapValue);default:throw qf()}}function Wd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ah(e,t);var n=Pd(e),r=Pd(t),i=ah(n.seconds,r.seconds);return 0!==i?i:ah(n.nanos,r.nanos)}function Hd(e){return Qd(e)}function Qd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Pd(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Dd(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ph.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Qt(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Qd(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Qt(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Qd(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):qf();var t,n}function $d(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Yd(e){return!!e&&"integerValue"in e}function Jd(e){return!!e&&"arrayValue"in e}function Xd(e){return!!e&&"nullValue"in e}function Zd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ep(e){return!!e&&"mapValue"in e}function tp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return bd(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=tp(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=tp(e.arrayValue.values[r]);return n}return Object.assign({},e)}function np(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function rp(e){return"nullValue"in e?Bd:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?$d(jd.empty(),ph.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:qf()}function ip(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?$d(jd.empty(),ph.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Vd:qf()}function ap(e,t){var n=Gd(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function op(e,t){var n=Gd(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var up=function(){function e(t){Mt(this,e),this.value=t}return Ut(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ep(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tp(t)}},{key:"setAll",value:function(e){var t=this,n=dh.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=tp(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ep(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return qd(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ep(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){bd(t,(function(t,n){return e[t]=n}));var r,i=Qt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(tp(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function sp(e){var t=[];return bd(e.fields,(function(e,n){var r=new dh([e]);if(ep(n)){var i=sp(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Qt(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Cd(t)}var cp=function(){function e(t,n,r,i,a,o,u){Mt(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return Ut(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(ch.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=up.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=up.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=ch.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,ch.min(),ch.min(),ch.min(),up.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,ch.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,ch.min(),ch.min(),up.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,ch.min(),ch.min(),up.empty(),2)}}]),e}(),lp=Ut((function e(t,n){Mt(this,e),this.position=t,this.inclusive=n}));function fp(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ph.comparator(ph.fromName(o.referenceValue),n.key):Gd(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function hp(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!qd(e.position[n],t.position[n]))return!1;return!0}var dp=Ut((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Mt(this,e),this.field=t,this.dir=n}));function pp(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var vp=Ut((function e(){Mt(this,e)})),mp=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Ut(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Gd(t,this.value)):null!==t&&zd(this.value)===zd(t)&&this.matchesComparison(Gd(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return qf()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Ip(e,t,r):"array-contains"===t?new Np(e,r):"in"===t?new Op(e,r):"not-in"===t?new Pp(e,r):"array-contains-any"===t?new Rp(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Tp(e,n):new Cp(e,n)}}]),n}(vp),yp=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return Ut(n,[{key:"matches",value:function(e){return gp(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=Qt(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(vp);function gp(e){return"and"===e.op}function kp(e){return"or"===e.op}function bp(e){return wp(e)&&gp(e)}function wp(e){var t,n=Qt(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof yp)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function xp(e){if(e instanceof mp)return e.field.canonicalString()+e.op.toString()+Hd(e.value);if(bp(e))return e.filters.map((function(e){return xp(e)})).join(",");var t=e.filters.map((function(e){return xp(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function _p(e,t){return e instanceof mp?function(e,t){return t instanceof mp&&e.op===t.op&&e.field.isEqual(t.field)&&qd(e.value,t.value)}(e,t):e instanceof yp?function(e,t){return t instanceof yp&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&_p(n,t.filters[r])}),!0)}(e,t):void qf()}function Ep(e,t){var n=e.filters.concat(t);return yp.create(n,e.op)}function Sp(e){return e instanceof mp?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Hd(e.value))}(e):e instanceof yp?function(e){return e.op.toString()+" {"+e.getFilters().map(Sp).join(" ,")+"}"}(e):"Filter"}var Ip=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this,e,r,i)).key=ph.fromName(i.referenceValue),a}return Ut(n,[{key:"matches",value:function(e){var t=ph.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(mp),Tp=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e,"in",r)).keys=Ap("in",r),i}return Ut(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(mp),Cp=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e,"not-in",r)).keys=Ap("not-in",r),i}return Ut(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(mp);function Ap(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ph.fromName(e.referenceValue)}))}var Np=function(e){Vt(n,e);var t=Kt(n);function n(e,r){return Mt(this,n),t.call(this,e,"array-contains",r)}return Ut(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Jd(t)&&Kd(t.arrayValue,this.value)}}]),n}(mp),Op=function(e){Vt(n,e);var t=Kt(n);function n(e,r){return Mt(this,n),t.call(this,e,"in",r)}return Ut(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Kd(this.value.arrayValue,t)}}]),n}(mp),Pp=function(e){Vt(n,e);var t=Kt(n);function n(e,r){return Mt(this,n),t.call(this,e,"not-in",r)}return Ut(n,[{key:"matches",value:function(e){if(Kd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Kd(this.value.arrayValue,t)}}]),n}(mp),Rp=function(e){Vt(n,e);var t=Kt(n);function n(e,r){return Mt(this,n),t.call(this,e,"array-contains-any",r)}return Ut(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Jd(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Kd(t.value.arrayValue,e)}))}}]),n}(mp),Dp=Ut((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Mt(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.dt=null}));function Lp(e){return new Dp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Mp(e){var t=Gf(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return xp(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Bh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Hd(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Hd(e)})).join(",")),t.dt=n}return t.dt}function Fp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!pp(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!_p(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!hp(e.startAt,t.startAt)&&hp(e.endAt,t.endAt)}function Up(e){return ph.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function jp(e,t){return e.filters.filter((function(e){return e instanceof mp&&e.field.isEqual(t)}))}function Vp(e,t,n){var r,i=Bd,a=!0,o=Qt(jp(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Bd,c=!0;switch(u.op){case"<":case"<=":s=rp(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Bd}ap({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];ap({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Bp(e,t,n){var r,i=Vd,a=!0,o=Qt(jp(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Vd,c=!0;switch(u.op){case">=":case">":s=ip(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Vd}op({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];op({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var zp=Ut((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Mt(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.wt=null,this._t=null,this.startAt,this.endAt}));function qp(e,t,n,r,i,a,o,u){return new zp(e,t,n,r,i,a,o,u)}function Kp(e){return new zp(e)}function Gp(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Wp(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Hp(e){var t,n=Qt(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Qp(e){return null!==e.collectionGroup}function $p(e){var t=Gf(e);if(null===t.wt){t.wt=[];var n=Hp(t),r=Wp(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new dp(n)),t.wt.push(new dp(dh.keyField(),"asc"));else{var i,a=!1,o=Qt(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new dp(dh.keyField(),s))}}}return t.wt}function Yp(e){var t=Gf(e);if(!t._t)if("F"===t.limitType)t._t=Lp(t.path,t.collectionGroup,$p(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Qt($p(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new dp(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new lp(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new lp(t.startAt.position,t.startAt.inclusive):null;t._t=Lp(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function Jp(e,t){t.getFirstInequalityField(),Hp(e);var n=e.filters.concat([t]);return new zp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Xp(e,t,n){return new zp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Zp(e,t){return Fp(Yp(e),Yp(t))&&e.limitType===t.limitType}function ev(e){return"".concat(Mp(Yp(e)),"|lt:").concat(e.limitType)}function tv(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Sp(e)})).join(", "),"]")),Bh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Hd(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Hd(e)})).join(",")),"Target(".concat(t,")")}(Yp(e)),"; limitType=").concat(e.limitType,")")}function nv(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ph.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Qt($p(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Qt(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=fp(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,$p(e),t))&&!(e.endAt&&!function(e,t,n){var r=fp(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,$p(e),t))}(e,t)}function rv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function iv(e){return function(t,n){var r,i=!1,a=Qt($p(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=av(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function av(e,t,n){var r=e.field.isKeyField()?ph.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Gd(r,i):qf()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return qf()}}var ov=function(){function e(t,n){Mt(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Ut(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Qt(n);try{for(i.s();!(r=i.n()).done;){var a=Rt(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){bd(this.inner,(function(t,n){var r,i=Qt(n);try{for(i.s();!(r=i.n()).done;){var a=Rt(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return wd(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),uv=new xd(ph.comparator);function sv(){return uv}var cv=new xd(ph.comparator);function lv(){for(var e=cv,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function fv(e){var t=cv;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function hv(){return pv()}function dv(){return pv()}function pv(){return new ov((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var vv=new xd(ph.comparator),mv=new Sd(ph.comparator);function yv(){for(var e=mv,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var gv=new Sd(ah);function kv(){return gv}function bv(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zh(t)?"-0":t}}function wv(e){return{integerValue:""+e}}function xv(e,t){return qh(t)?wv(t):bv(e,t)}var _v=Ut((function e(){Mt(this,e),this._=void 0}));function Ev(e,t,n){return e instanceof Tv?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ld(t)&&(t=Md(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Cv?Av(e,t):e instanceof Nv?Ov(e,t):function(e,t){var n=Iv(e,t),r=Rv(n)+Rv(e.gt);return Yd(n)&&Yd(e.gt)?wv(r):bv(e.serializer,r)}(e,t)}function Sv(e,t,n){return e instanceof Cv?Av(e,t):e instanceof Nv?Ov(e,t):n}function Iv(e,t){return e instanceof Pv?Yd(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Tv=function(e){Vt(n,e);var t=Kt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n)}(_v),Cv=function(e){Vt(n,e);var t=Kt(n);function n(e){var r;return Mt(this,n),(r=t.call(this)).elements=e,r}return Ut(n)}(_v);function Av(e,t){var n,r=Dv(t),i=Qt(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return qd(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Nv=function(e){Vt(n,e);var t=Kt(n);function n(e){var r;return Mt(this,n),(r=t.call(this)).elements=e,r}return Ut(n)}(_v);function Ov(e,t){var n,r=Dv(t),i=Qt(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!qd(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Pv=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return Ut(n)}(_v);function Rv(e){return Rd(e.integerValue||e.doubleValue)}function Dv(e){return Jd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Lv=Ut((function e(t,n){Mt(this,e),this.field=t,this.transform=n}));var Mv=Ut((function e(t,n){Mt(this,e),this.version=t,this.transformResults=n})),Fv=function(){function e(t,n){Mt(this,e),this.updateTime=t,this.exists=n}return Ut(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Uv(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var jv=Ut((function e(){Mt(this,e)}));function Vv(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Xv(e.key,Fv.none()):new Gv(e.key,e.data,Fv.none());var n,r=e.data,i=up.empty(),a=new Sd(dh.comparator),o=Qt(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Wv(e.key,i,new Cd(a.toArray()),Fv.none())}function Bv(e,t,n){e instanceof Gv?function(e,t,n){var r=e.value.clone(),i=Qv(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Wv?function(e,t,n){if(Uv(e.precondition,t)){var r=Qv(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Hv(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function zv(e,t,n,r){return e instanceof Gv?function(e,t,n,r){if(!Uv(e.precondition,t))return n;var i=e.value.clone(),a=$v(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Wv?function(e,t,n,r){if(!Uv(e.precondition,t))return n;var i=$v(e.fieldTransforms,r,t),a=t.data;return a.setAll(Hv(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Uv(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function qv(e,t){var n,r=null,i=Qt(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Iv(a.transform,o||null);null!=u&&(null===r&&(r=up.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Kv(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&oh(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Cv&&t instanceof Cv||e instanceof Nv&&t instanceof Nv?oh(e.elements,t.elements,qd):e instanceof Pv&&t instanceof Pv?qd(e.gt,t.gt):e instanceof Tv&&t instanceof Tv}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Gv=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Mt(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Ut(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jv),Wv=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Mt(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Ut(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(jv);function Hv(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Qv(e,t,n){var r=new Map;Kf(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Sv(o,u,n[i]))}return r}function $v(e,t,n){var r,i=new Map,a=Qt(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Ev(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Yv,Jv,Xv=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ut(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jv),Zv=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ut(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jv),em=function(){function e(t,n,r,i){Mt(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Ut(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Bv(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Qt(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=zv(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Qt(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=zv(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=dv();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Vv(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(ch.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),yv())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&oh(this.mutations,e.mutations,(function(e,t){return Kv(e,t)}))&&oh(this.baseMutations,e.baseMutations,(function(e,t){return Kv(e,t)}))}}]),e}(),tm=function(){function e(t,n,r,i){Mt(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Ut(e,null,[{key:"from",value:function(t,n,r){Kf(t.mutations.length===r.length);for(var i=vv,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),nm=function(){function e(t,n){Mt(this,e),this.largestBatchId=t,this.mutation=n}return Ut(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),rm=Ut((function e(t,n){Mt(this,e),this.count=t,this.unchangedNames=n}));function im(e){switch(e){default:return qf();case Wf.CANCELLED:case Wf.UNKNOWN:case Wf.DEADLINE_EXCEEDED:case Wf.RESOURCE_EXHAUSTED:case Wf.INTERNAL:case Wf.UNAVAILABLE:case Wf.UNAUTHENTICATED:return!1;case Wf.INVALID_ARGUMENT:case Wf.NOT_FOUND:case Wf.ALREADY_EXISTS:case Wf.PERMISSION_DENIED:case Wf.FAILED_PRECONDITION:case Wf.ABORTED:case Wf.OUT_OF_RANGE:case Wf.UNIMPLEMENTED:case Wf.DATA_LOSS:return!0}}function am(e){if(void 0===e)return Vf("GRPC error has no .code"),Wf.UNKNOWN;switch(e){case Yv.OK:return Wf.OK;case Yv.CANCELLED:return Wf.CANCELLED;case Yv.UNKNOWN:return Wf.UNKNOWN;case Yv.DEADLINE_EXCEEDED:return Wf.DEADLINE_EXCEEDED;case Yv.RESOURCE_EXHAUSTED:return Wf.RESOURCE_EXHAUSTED;case Yv.INTERNAL:return Wf.INTERNAL;case Yv.UNAVAILABLE:return Wf.UNAVAILABLE;case Yv.UNAUTHENTICATED:return Wf.UNAUTHENTICATED;case Yv.INVALID_ARGUMENT:return Wf.INVALID_ARGUMENT;case Yv.NOT_FOUND:return Wf.NOT_FOUND;case Yv.ALREADY_EXISTS:return Wf.ALREADY_EXISTS;case Yv.PERMISSION_DENIED:return Wf.PERMISSION_DENIED;case Yv.FAILED_PRECONDITION:return Wf.FAILED_PRECONDITION;case Yv.ABORTED:return Wf.ABORTED;case Yv.OUT_OF_RANGE:return Wf.OUT_OF_RANGE;case Yv.UNIMPLEMENTED:return Wf.UNIMPLEMENTED;case Yv.DATA_LOSS:return Wf.DATA_LOSS;default:return qf()}}(Jv=Yv||(Yv={}))[Jv.OK=0]="OK",Jv[Jv.CANCELLED=1]="CANCELLED",Jv[Jv.UNKNOWN=2]="UNKNOWN",Jv[Jv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jv[Jv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jv[Jv.NOT_FOUND=5]="NOT_FOUND",Jv[Jv.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jv[Jv.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jv[Jv.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jv[Jv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jv[Jv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jv[Jv.ABORTED=10]="ABORTED",Jv[Jv.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jv[Jv.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jv[Jv.INTERNAL=13]="INTERNAL",Jv[Jv.UNAVAILABLE=14]="UNAVAILABLE",Jv[Jv.DATA_LOSS=15]="DATA_LOSS";var om=function(){function e(){Mt(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return Ut(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return um}},{key:"getOrCreateInstance",value:function(){return null===um&&(um=new e),um}}]),e}(),um=null;function sm(){return new TextEncoder}var cm=new Rf([4294967295,4294967295],0);function lm(e){var t=sm().encode(e),n=new Pf;return n.update(t),new Uint8Array(n.digest())}function fm(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Rf([n,r],0),new Rf([i,a],0)]}var hm=function(){function e(t,n,r){if(Mt(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new dm("Invalid padding: ".concat(n));if(r<0)throw new dm("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new dm("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new dm("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=Rf.fromNumber(this.It)}return Ut(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(Rf.fromNumber(n)));return 1===r.compare(cm)&&(r=new Rf([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=Rt(fm(lm(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=Rt(fm(lm(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),dm=function(e){Vt(n,e);var t=Kt(n);function n(){var e;return Mt(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return Ut(n)}(Wt(Error)),pm=function(){function e(t,n,r,i,a){Mt(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Ut(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,vm.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(ch.min(),i,new xd(ah),sv(),yv())}}]),e}(),vm=function(){function e(t,n,r,i,a){Mt(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Ut(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,yv(),yv(),yv())}}]),e}(),mm=Ut((function e(t,n,r,i){Mt(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),ym=Ut((function e(t,n){Mt(this,e),this.targetId=t,this.Vt=n})),gm=Ut((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nd.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Mt(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),km=function(){function e(){Mt(this,e),this.St=0,this.Dt=xm(),this.Ct=Nd.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return Ut(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=yv(),t=yv(),n=yv();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:qf()}})),new vm(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=xm()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),bm=function(){function e(t){Mt(this,e),this.Gt=t,this.Qt=new Map,this.jt=sv(),this.zt=wm(),this.Wt=new xd(ah)}return Ut(e,[{key:"Ht",value:function(e){var t,n=Qt(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(u){n.e(u)}finally{n.f()}var i,a=Qt(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:qf()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(Up(a))if(0===r){var o=new ph(a.path);this.Yt(n,o,cp.newNoDocument(o,ch.min()))}else Kf(1===r);else{var u=this.ie(n);if(u!==r){var s=this.re(e,u);if(0!==s){this.ee(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=om.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=Dd(c).toUint8Array()}catch(e){if(e instanceof Ad)return Bf("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new hm(a,f,d)}catch(e){return Bf(e instanceof dm?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&Up(a.target)){var o=new ph(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,cp.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=yv();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new pm(e,n,this.Wt,this.jt,r);return this.jt=sv(),this.zt=wm(),this.Wt=new xd(ah),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new km,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new Sd(ah),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||jf("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new km),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function wm(){return new xd(ph.comparator)}function xm(){return new xd(ph.comparator)}var _m={asc:"ASCENDING",desc:"DESCENDING"},Em={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sm={and:"AND",or:"OR"},Im=Ut((function e(t,n){Mt(this,e),this.databaseId=t,this.useProto3Json=n}));function Tm(e,t){return e.useProto3Json||Bh(t)?t:{value:t}}function Cm(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Am(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Nm(e,t){return Cm(e,t.toTimestamp())}function Om(e){return Kf(!!e),ch.fromTimestamp(function(e){var t=Pd(e);return new sh(t.seconds,t.nanos)}(e))}function Pm(e,t){return function(e){return new fh(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Rm(e){var t=fh.fromString(e);return Kf(ny(t)),t}function Dm(e,t){return Pm(e.databaseId,t.path)}function Lm(e,t){var n=Rm(t);if(n.get(1)!==e.databaseId.projectId)throw new Hf(Wf.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Hf(Wf.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ph(jm(n))}function Mm(e,t){return Pm(e.databaseId,t)}function Fm(e){var t=Rm(e);return 4===t.length?fh.emptyPath():jm(t)}function Um(e){return new fh(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jm(e){return Kf(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Vm(e,t,n){return{name:Dm(e,t),fields:n.value.mapValue.fields}}function Bm(e,t,n){var r=Lm(e,t.name),i=Om(t.updateTime),a=t.createTime?Om(t.createTime):ch.min(),o=new up({mapValue:{fields:t.fields}}),u=cp.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function zm(e,t){return"found"in t?function(e,t){Kf(!!t.found),t.found.name,t.found.updateTime;var n=Lm(e,t.found.name),r=Om(t.found.updateTime),i=t.found.createTime?Om(t.found.createTime):ch.min(),a=new up({mapValue:{fields:t.found.fields}});return cp.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Kf(!!t.missing),Kf(!!t.readTime);var n=Lm(e,t.missing),r=Om(t.readTime);return cp.newNoDocument(n,r)}(e,t):qf()}function qm(e,t){var n;if(t instanceof Gv)n={update:Vm(e,t.key,t.value)};else if(t instanceof Xv)n={delete:Dm(e,t.key)};else if(t instanceof Wv)n={update:Vm(e,t.key,t.data),updateMask:ty(t.fieldMask)};else{if(!(t instanceof Zv))return qf();n={verify:Dm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Tv)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Cv)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Nv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Pv)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw qf()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Nm(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:qf()}(e,t.precondition)),n}function Km(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Fv.updateTime(Om(e.updateTime)):void 0!==e.exists?Fv.exists(e.exists):Fv.none()}(t.currentDocument):Fv.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Kf("REQUEST_TIME"===t.setToServerValue),n=new Tv;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Cv(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Nv(i)}else"increment"in t?n=new Pv(e,t.increment):qf();var a=dh.fromServerFormat(t.fieldPath);return new Lv(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Lm(e,t.update.name),a=new up({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Cd(t.map((function(e){return dh.fromServerFormat(e)})))}(t.updateMask);return new Wv(i,a,o,n,r)}return new Gv(i,a,n,r)}if(t.delete){var u=Lm(e,t.delete);return new Xv(u,n)}if(t.verify){var s=Lm(e,t.verify);return new Zv(s,n)}return qf()}function Gm(e,t){return{documents:[Mm(e,t.path)]}}function Wm(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Mm(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Mm(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return ey(yp.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Xm(e.field),direction:$m(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=Tm(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Hm(e){var t=Fm(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Kf(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Qm(e);return t instanceof yp&&bp(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new dp(Zm(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Bh(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new lp(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new lp(n,t)}(n.endAt)),qp(t,i,u,o,s,"F",c,l)}function Qm(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Zm(e.unaryFilter.field);return mp.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Zm(e.unaryFilter.field);return mp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Zm(e.unaryFilter.field);return mp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Zm(e.unaryFilter.field);return mp.create(i,"!=",{nullValue:"NULL_VALUE"});default:return qf()}}(e):void 0!==e.fieldFilter?function(e){return mp.create(Zm(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return qf()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return yp.create(e.compositeFilter.filters.map((function(e){return Qm(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return qf()}}(e.compositeFilter.op))}(e):qf()}function $m(e){return _m[e]}function Ym(e){return Em[e]}function Jm(e){return Sm[e]}function Xm(e){return{fieldPath:e.canonicalString()}}function Zm(e){return dh.fromServerFormat(e.fieldPath)}function ey(e){return e instanceof mp?function(e){if("=="===e.op){if(Zd(e.value))return{unaryFilter:{field:Xm(e.field),op:"IS_NAN"}};if(Xd(e.value))return{unaryFilter:{field:Xm(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Zd(e.value))return{unaryFilter:{field:Xm(e.field),op:"IS_NOT_NAN"}};if(Xd(e.value))return{unaryFilter:{field:Xm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xm(e.field),op:Ym(e.op),value:e.value}}}(e):e instanceof yp?function(e){var t=e.getFilters().map((function(e){return ey(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Jm(e.op),filters:t}}}(e):qf()}function ty(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function ny(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var ry=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ch.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ch.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Nd.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Mt(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return Ut(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),iy=Ut((function e(t){Mt(this,e),this.fe=t}));function ay(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:oy(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Dm(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Cm(e,t.version.toTimestamp()),createTime:Cm(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:uy(t.version)};else{if(!t.isUnknownDocument())return qf();r.unknownDocument={path:n.path.toArray(),version:uy(t.version)}}return r}function oy(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function uy(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function sy(e){var t=new sh(e.seconds,e.nanoseconds);return ch.fromTimestamp(t)}function cy(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Km(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Km(e.fe,t)})),u=sh.fromMillis(t.localWriteTimeMs);return new em(t.batchId,u,n,o)}function ly(e){var t,n,r=sy(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?sy(e.lastLimboFreeSnapshotVersion):ch.min();return void 0!==e.query.documents?(Kf(1===(n=e.query).documents.length),t=Yp(Kp(Fm(n.documents[0])))):t=function(e){return Yp(Hm(e))}(e.query),new ry(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,Nd.fromBase64String(e.resumeToken))}function fy(e,t){var n,r=uy(t.snapshotVersion),i=uy(t.lastLimboFreeSnapshotVersion);n=Up(t.target)?Gm(e.fe,t.target):Wm(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Mp(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function hy(e){var t=Hm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Xp(t,t.limit,"L"):t}function dy(e,t){return new nm(t.largestBatchId,Km(e.fe,t.overlayMutation))}function py(e,t){var n=t.path.lastSegment();return[e,Kh(t.path.popLast()),n]}function vy(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:uy(r.readTime),documentKey:Kh(r.documentKey.path),largestBatchId:r.largestBatchId}}var my=function(){function e(){Mt(this,e)}return Ut(e,[{key:"getBundleMetadata",value:function(e,t){return yy(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:sy(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return yy(e).put({bundleId:(n=t).id,createTime:uy(Om(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return gy(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:hy(t.bundledQuery),readTime:sy(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return gy(e).put(function(e){return{name:e.name,readTime:uy(Om(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function yy(e){return gd(e,"bundles")}function gy(e){return gd(e,"namedQueries")}var ky=function(){function e(t,n){Mt(this,e),this.serializer=t,this.userId=n}return Ut(e,[{key:"getOverlay",value:function(e,t){var n=this;return by(e).get(py(this.userId,t)).next((function(e){return e?dy(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=hv();return Ch.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new nm(t,a);i.push(r.we(e,o))})),Ch.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Kh(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(by(e).J("collectionPathOverlayIndex",i))})),Ch.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=hv(),a=Kh(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return by(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=Qt(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=dy(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=hv(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return by(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=dy(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return by(e).put(function(e,t,n){var r=Rt(py(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:qm(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function by(e){return gd(e,"documentOverlays")}var wy=function(){function e(){Mt(this,e)}return Ut(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Rd(e.integerValue));else if("doubleValue"in e){var n=Rd(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),zh(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Dd(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?np(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):qf()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=Qt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),ph.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function xy(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function _y(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=xy(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}wy.Ve=new wy;var Ey=function(){function e(){Mt(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Ut(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=Qt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=Qt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=_y(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=_y(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Sy=function(){function e(t){Mt(this,e),this.je=t}return Ut(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),Iy=function(){function e(t){Mt(this,e),this.je=t}return Ut(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),Ty=function(){function e(){Mt(this,e),this.je=new Ey,this.ze=new Sy(this.je),this.We=new Iy(this.je)}return Ut(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),Cy=function(){function e(t,n,r,i){Mt(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Ut(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Ay(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Ny(e.arrayValue,t.arrayValue))?n:0!==(n=Ny(e.directionalValue,t.directionalValue))?n:ph.comparator(e.documentKey,t.documentKey)}function Ny(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Oy=function(){function e(t){Mt(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=Qt(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Ut(e,[{key:"tn",value:function(e){Kf(e.collectionGroup===this.collectionId);var t=mh(e);if(void 0!==t&&!this.en(t))return!1;for(var n=yh(e),r=new Set,i=0,a=0;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){var o=n[i];if(!this.nn(this.Ze,o)||!this.sn(this.Ye[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Ye.length||!this.sn(this.Ye[a++],u))return!1}return!0}},{key:"en",value:function(e){var t,n=Qt(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Py(e){var t,n;if(Kf(e instanceof mp||e instanceof yp),e instanceof mp){if(e instanceof Op){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return mp.create(e.field,"==",t)})))||[];return yp.create(r,"or")}return e}var i=e.filters.map((function(e){return Py(e)}));return yp.create(i,e.op)}function Ry(e){if(0===e.getFilters().length)return[];var t=Fy(Py(e));return Kf(My(t)),Dy(t)||Ly(t)?[t]:t.getFilters()}function Dy(e){return e instanceof mp}function Ly(e){return e instanceof yp&&bp(e)}function My(e){return Dy(e)||Ly(e)||function(e){if(e instanceof yp&&kp(e)){var t,n=Qt(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Dy(r)&&!Ly(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Fy(e){if(Kf(e instanceof mp||e instanceof yp),e instanceof mp)return e;if(1===e.filters.length)return Fy(e.filters[0]);var t=e.filters.map((function(e){return Fy(e)})),n=yp.create(t,e.op);return My(n=Vy(n))?n:(Kf(n instanceof yp),Kf(gp(n)),Kf(n.filters.length>1),n.filters.reduce((function(e,t){return Uy(e,t)})))}function Uy(e,t){var n;return Kf(e instanceof mp||e instanceof yp),Kf(t instanceof mp||t instanceof yp),n=e instanceof mp?t instanceof mp?function(e,t){return yp.create([e,t],"and")}(e,t):jy(e,t):t instanceof mp?jy(t,e):function(e,t){if(Kf(e.filters.length>0&&t.filters.length>0),gp(e)&&gp(t))return Ep(e,t.getFilters());var n=kp(e)?e:t,r=kp(e)?t:e,i=n.filters.map((function(e){return Uy(e,r)}));return yp.create(i,"or")}(e,t),Vy(n)}function jy(e,t){if(gp(t))return Ep(t,e.getFilters());var n=t.filters.map((function(t){return Uy(e,t)}));return yp.create(n,"or")}function Vy(e){if(Kf(e instanceof mp||e instanceof yp),e instanceof mp)return e;var t=e.getFilters();if(1===t.length)return Vy(t[0]);if(wp(e))return e;var n=t.map((function(e){return Vy(e)})),r=[];return n.forEach((function(t){t instanceof mp?r.push(t):t instanceof yp&&(t.op===e.op?r.push.apply(r,Lt(t.filters)):r.push(t))})),1===r.length?r[0]:yp.create(r,e.op)}var By=function(){function e(){Mt(this,e),this.rn=new zy}return Ut(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),Ch.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ch.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ch.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ch.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Ch.resolve(null)}},{key:"getIndexType",value:function(e,t){return Ch.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Ch.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ch.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Ch.resolve(xh.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Ch.resolve(xh.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Ch.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ch.resolve()}}]),e}(),zy=function(){function e(){Mt(this,e),this.index={}}return Ut(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Sd(fh.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Sd(fh.comparator)).toArray()}}]),e}(),qy=new Uint8Array(0),Ky=function(){function e(t,n){Mt(this,e),this.user=t,this.databaseId=n,this.on=new zy,this.un=new ov((function(e){return Mp(e)}),(function(e,t){return Fp(e,t)})),this.uid=t.uid||""}return Ut(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:Kh(i)};return Gy(e).put(a)}return Ch.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[uh(t),""],!1,!0);return Gy(e).j(r).next((function(e){var r,i=Qt(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Hh(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Hy(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Qy(e);return a.next((function(e){o.put(vy(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Hy(e),r=Qy(e),i=Wy(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Wy(e),i=!0,a=new Map;return Ch.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=yv(),o=[];return Ch.forEach(a,(function(i,a){var u;jf("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Mp(t)));var s=function(e,t){var n=mh(t);if(void 0===n)return null;var r,i=Qt(jp(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Qt(yh(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Qt(jp(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Qt(yh(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Vp(e,o.fieldPath,e.startAt):Bp(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new lp(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Qt(yh(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Bp(e,o.fieldPath,e.endAt):Vp(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new lp(r,i)}(a,i),h=n.hn(i,a,l),d=n.hn(i,a,f),p=n.ln(i,a,c),v=n.fn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Ch.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=ph.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Ch.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Ry(yp.create(e.filters,"and")).map((function(t){return Lp(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.dn(t[h/c]):qy,f=u.wn(e,s,n[h%c],r),d=u._n(e,s,i[h%c],a),p=o.map((function(t){return u.wn(e,s,t,!0)}));l.push.apply(l,Lt(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"wn",value:function(e,t,n,r){var i=new Cy(e,ph.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new Cy(e,ph.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new Oy(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Qt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return Ch.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Sd(dh.comparator),r=!1,i=Qt(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=Qt(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=Qt(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new Ty,i=Qt(yh(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.He(a.kind);wy.Ve._e(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new Ty;return wy.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new Ty;return wy.Ve._e($d(this.databaseId,t),n.He(function(e){var t=yh(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Ty);var i,a=0,o=Qt(yh(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Qt(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.yn(t,s.fieldPath)&&Jd(c))r=this.pn(r,s,c);else{var h=f.He(s.kind);wy.Ve._e(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=Lt(e),a=[],o=Qt(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Qt(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Ty;f.seed(l.Qe()),wy.Ve._e(s,f.He(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof mp&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Hy(e),i=Qy(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return Ch.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new kh(t.sequenceNumber,new xh(sy(t.readTime),new ph(Hh(t.documentKey)),t.largestBatchId)):kh.empty(),r=e.fields.map((function(e){var t=Rt(e,2),n=t[0],r=t[1];return new gh(dh.fromServerFormat(n),r)}));return new vh(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:ah(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Hy(e),a=Qy(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Ch.forEach(t,(function(t){return a.put(vy(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Ch.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Ch.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Ch.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?Ch.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return Wy(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return Wy(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=Wy(e),i=new Sd(Ay);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new Cy(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new Sd(Ay),r=this.mn(t,e);if(null==r)return n;var i=mh(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Jd(a)){var o,u=Qt(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Cy(t.indexId,e.key,this.dn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Cy(t.indexId,e.key,qy,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;jf("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Td(a),s=Td(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Td(o)):l?(i(u),u=Td(a)):(u=Td(a),s=Td(o))}}(r,i,Ay,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),Ch.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return Qy(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Ay(e,t)})).filter((function(e,t,n){return!t||0!==Ay(e,n[t-1])}));var r=[];r.push(e);var i,a=Qt(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Ay(o,e),s=Ay(o,t);if(0===u)r[0]=e.Je();else if(u>0&&s<0)r.push(o),r.push(o.Je());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,qy,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,qy,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"bn",value:function(e,t){return Ay(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next($y)}},{key:"getMinOffset",value:function(e,t){var n=this;return Ch.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||qf()}))})).next($y)}}]),e}();function Gy(e){return gd(e,"collectionParents")}function Wy(e){return gd(e,"indexEntries")}function Hy(e){return gd(e,"indexConfiguration")}function Qy(e){return gd(e,"indexState")}function $y(e){Kf(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;_h(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new xh(t.readTime,t.documentKey,n)}var Yy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jy=function(){function e(t,n,r){Mt(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Ut(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Xy(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Kf(1===u)})));var c,l=[],f=Qt(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Yh(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Ch.waitFor(a).next((function(){return l}))}function Zy(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw qf();t=e.noDocument}return JSON.stringify(t).length}Jy.DEFAULT_COLLECTION_PERCENTILE=10,Jy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jy.DEFAULT=new Jy(41943040,Jy.DEFAULT_COLLECTION_PERCENTILE,Jy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jy.DISABLED=new Jy(-1,0,0);var eg=function(){function e(t,n,r,i){Mt(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return Ut(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ng(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=rg(e),o=ng(e);return o.add({}).next((function(u){Kf("number"==typeof u);var s,c=new em(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return qm(e.fe,t)})),i=n.mutations.map((function(t){return qm(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Sd((function(e,t){return ah(e.canonicalString(),t.canonicalString())})),d=Qt(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Yh(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Jh))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[u]=c.keys()})),Ch.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return ng(e).get(t).next((function(e){return e?(Kf(e.userId===n.userId),cy(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?Ch.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return ng(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Kf(t.batchId>=r),a=cy(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ng(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ng(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return cy(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=$h(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return rg(e).X({range:i},(function(r,i,o){var u=Rt(r,3),s=u[0],c=u[1],l=u[2],f=Hh(c);if(s===n.userId&&t.path.isEqual(f))return ng(e).get(l).next((function(e){if(!e)throw qf();Kf(e.userId===n.userId),a.push(cy(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Sd(ah),i=[];return t.forEach((function(t){var a=$h(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=rg(e).X({range:o},(function(e,i,a){var o=Rt(e,3),u=o[0],s=o[1],c=o[2],l=Hh(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Ch.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=$h(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Sd(ah);return rg(e).X({range:o},(function(e,t,a){var o=Rt(e,3),s=o[0],c=o[1],l=o[2],f=Hh(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Dn(e,u)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(ng(e).get(t).next((function(e){if(null===e)throw qf();Kf(e.userId===n.userId),r.push(cy(n.serializer,e))})))})),Ch.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Xy(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),Ch.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ch.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return rg(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Hh(e[1]);i.push(a)}else r.done()})).next((function(){Kf(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return tg(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return ig(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return Kf(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function tg(e,t,n){var r=$h(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return rg(e).X({range:a,Y:!0},(function(e,n,r){var a=Rt(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function ng(e){return gd(e,"mutations")}function rg(e){return gd(e,"documentMutations")}function ig(e){return gd(e,"mutationQueues")}var ag=function(){function e(t){Mt(this,e),this.Nn=t}return Ut(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),og=function(){function e(t,n){Mt(this,e),this.referenceDelegate=t,this.serializer=n}return Ut(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new ag(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return ch.fromTimestamp(new sh(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return ug(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return Kf(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return ug(e).X((function(o,u){var s=ly(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Ch.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return ug(e).X((function(e,n){var r=ly(n);t(r)}))}},{key:"$n",value:function(e){return sg(e).get("targetGlobalKey").next((function(e){return Kf(null!==e),e}))}},{key:"On",value:function(e,t){return sg(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return ug(e).put(fy(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Mp(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ug(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=ly(n);Fp(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=cg(e);return t.forEach((function(t){var o=Kh(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Ch.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=cg(e);return Ch.forEach(t,(function(t){var a=Kh(t.path);return Ch.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=cg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=cg(e),i=yv();return r.X({range:n,Y:!0},(function(e,t,n){var r=Hh(e[1]),a=new ph(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Kh(t.path),r=IDBKeyRange.bound([n],[uh(n)],!1,!0),i=0;return cg(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=Rt(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return ug(e).get(t).next((function(e){return e?ly(e):null}))}}]),e}();function ug(e){return gd(e,"targets")}function sg(e){return gd(e,"targetGlobal")}function cg(e){return gd(e,"targetDocuments")}function lg(e,t){var n=Rt(e,2),r=n[0],i=n[1],a=Rt(t,2),o=a[0],u=a[1],s=ah(r,o);return 0===s?ah(i,u):s}var fg=function(){function e(t){Mt(this,e),this.Ln=t,this.buffer=new Sd(lg),this.qn=0}return Ut(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();lg(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),hg=function(){function e(t,n,r){Mt(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return Ut(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;jf("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Rh(e.t0)){e.next=12;break}jf("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Ih(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),dg=function(){function e(t,n){Mt(this,e),this.jn=t,this.params=n}return Ut(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Ch.resolve(Vh.ct);var r=new fg(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(jf("LruGarbageCollector","Garbage collection skipped; disabled"),Ch.resolve(Yy)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(jf("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Yy):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(jf("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Uf()<=Ba.DEBUG&&jf("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Ch.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function pg(e,t){return new dg(e,t)}var vg=function(){function e(t,n){Mt(this,e),this.db=t,this.garbageCollector=pg(this,n)}return Ut(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return mg(e,n)}},{key:"removeReference",value:function(e,t,n){return mg(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return mg(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return ig(e).Z((function(r){return tg(e,r,t).next((function(e){return e&&(n=!0),Ch.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,ch.min()),cg(e).delete([0,Kh(o.path)])}))}));i.push(s)}})).next((function(){return Ch.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return mg(e,t)}},{key:"Yn",value:function(e,t){var n,r=cg(e),i=Vh.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=Rt(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Vh.ct&&t(new ph(Hh(n)),i),i=s,n=u):i=Vh.ct})).next((function(){i!==Vh.ct&&t(new ph(Hh(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function mg(e,t){return cg(e).put(function(e,t){return{targetId:0,path:Kh(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var yg=function(){function e(){Mt(this,e),this.changes=new ov((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Ut(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,cp.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ch.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),gg=function(){function e(t){Mt(this,e),this.serializer=t}return Ut(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return xg(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return xg(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],oy(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=cp.newInvalidDocument(t);return xg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(_g(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:cp.newInvalidDocument(t)};return xg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(_g(t))},(function(e,i){r={document:n.ts(t,i),size:Zy(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=sv();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=sv(),i=new xd(ph.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,Zy(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return Ch.resolve();var r=new Sd(Sg);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(_g(r.first()),_g(r.last())),a=r.getIterator(),o=a.getNext();return xg(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=ph.fromSegments([].concat(Lt(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Sg(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(_g(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),oy(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xg(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=sv(),o=Qt(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.ts(ph.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(nv(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=sv(),o=Eg(t,n),u=Eg(t,xh.max());return xg(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.ts(ph.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new bg(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return wg(e).get("remoteDocumentGlobalKey").next((function(e){return Kf(!!e),e}))}},{key:"Zn",value:function(e,t){return wg(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Bm(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=ph.fromSegments(t.noDocument.path),i=sy(t.noDocument.readTime);n=cp.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return qf();var a=ph.fromSegments(t.unknownDocument.path),o=sy(t.unknownDocument.version);n=cp.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new sh(e[0],e[1]);return ch.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(ch.min()))return n}return cp.newInvalidDocument(e)}}]),e}();function kg(e){return new gg(e)}var bg=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new ov((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Ut(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Sd((function(e,t){return ah(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.us.get(a);if(n.push(t.os.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=ay(t.os.serializer,o);i=i.add(a.path.popLast());var c=Zy(s);r+=c-u.size,n.push(t.os.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=ay(t.os.serializer,o.convertToNoDocument(ch.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),Ch.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(yg);function wg(e){return gd(e,"remoteDocumentGlobal")}function xg(e){return gd(e,"remoteDocumentsV14")}function _g(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Eg(e,t){var n=t.documentKey.path.toArray();return[e,oy(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Sg(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=ah(n[a],r[a]))return i;return(i=ah(n.length,r.length))||((i=ah(n[n.length-2],r[r.length-2]))||ah(n[n.length-1],r[r.length-1]))}var Ig=Ut((function e(t,n){Mt(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Tg=function(){function e(t,n,r,i){Mt(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Ut(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&zv(r.mutation,e,Cd.empty(),sh.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,yv()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yv(),i=hv();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=lv();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=hv();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,yv())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=sv(),a=pv(),o=pv();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Wv)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),zv(o.mutation,t,o.mutation.getFieldMask(),sh.now())):a.set(t.key,Cd.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Ig(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=pv(),i=new xd((function(e,t){return e-t})),a=yv();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Qt(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Cd.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||yv()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=dv();c.forEach((function(e){if(!a.has(e)){var n=Vv(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Ch.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return ph.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Ch.resolve(hv()),u=-1,s=a;return o.next((function(t){return Ch.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Ch.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,yv())})).next((function(e){return{batchId:u,changes:fv(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new ph(t)).next((function(e){var t=lv();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=lv();return this.indexManager.getCollectionParents(e,i).next((function(o){return Ch.forEach(o,(function(o){var u=function(e,t){return new zp(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,cp.newInvalidDocument(r)))}));var n=lv();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&zv(a.mutation,i,Cd.empty(),sh.now()),nv(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Cg=function(){function e(t){Mt(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return Ut(e,[{key:"getBundleMetadata",value:function(e,t){return Ch.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Om(n.createTime)}),Ch.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ch.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:hy(e.bundledQuery),readTime:Om(e.readTime)}}(t)),Ch.resolve()}}]),e}(),Ag=function(){function e(){Mt(this,e),this.overlays=new xd(ph.comparator),this.ls=new Map}return Ut(e,[{key:"getOverlay",value:function(e,t){return Ch.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=hv();return Ch.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),Ch.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),Ch.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=hv(),i=t.length+1,a=new ph(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Ch.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new xd((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=hv(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=hv(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Ch.resolve(s)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new nm(t,n));var a=this.ls.get(t);void 0===a&&(a=yv(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),Ng=function(){function e(){Mt(this,e),this.fs=new Sd(Og.ds),this.ws=new Sd(Og._s)}return Ut(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Og(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new Og(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new ph(new fh([])),r=new Og(n,e),i=new Og(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new ph(new fh([])),n=new Og(t,e),r=new Og(t,e+1),i=yv();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Og(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Og=function(){function e(t,n){Mt(this,e),this.key=t,this.As=n}return Ut(e,null,[{key:"ds",value:function(e,t){return ph.comparator(e.key,t.key)||ah(e.As,t.As)}},{key:"_s",value:function(e,t){return ah(e.As,t.As)||ph.comparator(e.key,t.key)}}]),e}(),Pg=function(){function e(t,n){Mt(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Sd(Og.ds)}return Ut(e,[{key:"checkEmpty",value:function(e){return Ch.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new em(i,t,n,r);this.mutationQueue.push(a);var o,u=Qt(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new Og(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Ch.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Ch.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return Ch.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ch.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return Ch.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Og(t,0),i=new Og(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),Ch.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Sd(ah);return t.forEach((function(e){var t=new Og(e,0),i=new Og(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),Ch.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ph.isDocumentKey(i)||(i=i.child(""));var a=new Og(new ph(i),0),o=new Sd(ah);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),Ch.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Kf(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return Ch.forEach(t.mutations,(function(i){var a=new Og(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Og(t,0),r=this.Rs.firstAfterOrEqual(n);return Ch.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Ch.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Rg=function(){function e(t){Mt(this,e),this.Ds=t,this.docs=new xd(ph.comparator),this.size=0}return Ut(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ch.resolve(n?n.document.mutableCopy():cp.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=sv();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():cp.newInvalidDocument(e))})),Ch.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=sv(),a=t.path,o=new ph(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||_h(wh(l),n)<=0||(r.has(l.key)||nv(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Ch.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){qf()}},{key:"Cs",value:function(e,t){return Ch.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Dg(this)}},{key:"getSize",value:function(e){return Ch.resolve(this.size)}}]),e}(),Dg=function(e){Vt(n,e);var t=Kt(n);function n(e){var r;return Mt(this,n),(r=t.call(this)).os=e,r}return Ut(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),Ch.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(yg),Lg=function(){function e(t){Mt(this,e),this.persistence=t,this.xs=new ov((function(e){return Mp(e)}),Fp),this.lastRemoteSnapshotVersion=ch.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Ng,this.targetCount=0,this.Ms=ag.kn()}return Ut(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),Ch.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ch.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ch.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),Ch.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Ch.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new ag(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,Ch.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),Ch.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Ch.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Ch.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Ch.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return Ch.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),Ch.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Ch.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),Ch.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return Ch.resolve(n)}},{key:"containsKey",value:function(e,t){return Ch.resolve(this.ks.containsKey(t))}}]),e}(),Mg=function(){function e(t,n){var r=this;Mt(this,e),this.$s={},this.overlays={},this.Os=new Vh(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new Lg(this),this.indexManager=new By,this.remoteDocumentCache=new Rg((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new iy(n),this.qs=new Cg(this.serializer)}return Ut(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Ag,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new Pg(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;jf("MemoryPersistence","Starting transaction:",e);var i=new Fg(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return Ch.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Fg=function(e){Vt(n,e);var t=Kt(n);function n(e){var r;return Mt(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Ut(n)}(Sh),Ug=function(){function e(t){Mt(this,e),this.persistence=t,this.Qs=new Ng,this.js=null}return Ut(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw qf()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Ch.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Ch.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),Ch.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ch.forEach(this.Ws,(function(r){var i=ph.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,ch.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return Ch.or([function(){return Ch.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),jg=function(){function e(t){Mt(this,e),this.serializer=t}return Ut(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new Ah("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qh,{unique:!0}),e.createObjectStore("documentMutations")}(e),Vg(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Ch.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Vg(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ch.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qh,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Ch.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:cd});t.createIndex("collectionPathOverlayIndex",ld,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",fd,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Xh});t.createIndex("documentKeyIndex",Zh),t.createIndex("collectionGroupIndex",ed)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ad}).createIndex("sequenceNumberIndex",od,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ud}).createIndex("documentKeyIndex",sd,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=Zy(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return Ch.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return Ch.forEach(r,(function(r){Kf(r.userId===n.userId);var i=cy(t.serializer,r);return Xy(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new fh(n),o=function(e){return[0,Kh(e)]}(a);r.push(t.get(o).next((function(n){return n?Ch.resolve():function(n){return t.put({targetId:0,path:Kh(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Ch.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:id});var n=t.store("collectionParents"),r=new zy,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Kh(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new fh(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=Rt(e,3),r=(n[0],n[1]),a=(n[2],Hh(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=ly(r),a=fy(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new ph(fh.fromString(i.document.name).popFirst(5)):i.noDocument?ph.fromSegments(i.noDocument.path):i.unknownDocument?ph.fromSegments(i.unknownDocument.path):qf()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Ch.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=kg(this.serializer),a=new Mg(Ug.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:yv();cy(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Ch.forEach(r,(function(e,r){var o=new Lf(r),u=ky.de(n.serializer,o),s=a.getIndexManager(o),c=eg.de(o,n.serializer,s,a.referenceDelegate);return new Tg(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new yd(t,Vh.ct),e).next()}))}))}}]),e}();function Vg(e){e.createObjectStore("targetDocuments",{keyPath:nd}).createIndex("documentTargetsIndex",rd,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",td,{unique:!0}),e.createObjectStore("targetGlobal")}var Bg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",zg=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Mt(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=u,this.ri=c,this.oi=l,this.ui=f,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new Hf(Wf.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vg(this,i),this.di=n+"main",this.serializer=new iy(s),this.wi=new Nh(this.di,this.ui,new jg(this.serializer)),this.Bs=new og(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kg(this.serializer),this.qs=new my,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&Vf("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Ut(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Hf(Wf.FAILED_PRECONDITION,Bg);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new Vh(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=fr(cr().mark((function n(r){return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=fr(cr().mark((function t(n){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Kg(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(Rh(t))return jf("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return jf("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return qg(e).get("owner").next((function(e){return Ch.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return Kg(e).delete(this.clientId)}},{key:"bi",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i,a=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=gd(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Ch.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=Qt(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?Ch.resolve(!0):qg(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new Hf(Wf.FAILED_PRECONDITION,Bg);return!1}}return!(!t.networkEnabled||!t.inForeground)||Kg(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&jf("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=fr(cr().mark((function e(){var t=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new yd(e,Vh.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Kg(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return eg.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Ky(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return ky.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;jf("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ui)?md:14===i?vd:13===i?pd:12===i?dd:11===i?hd:void qf();return this.wi.runTransaction(e,o,u,(function(i){return a=new yd(i,r.Os?r.Os.next():Vh.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw Vf("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new Hf(Wf.FAILED_PRECONDITION,Eh);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return qg(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Hf(Wf.FAILED_PRECONDITION,Bg)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qg(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=qg(e);return n.get("owner").next((function(e){return t.Ri(e)?(jf("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ch.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Vf("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!ga()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return jf("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Vf("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(R){Vf("Failed to set zombie client id.",R)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(R){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Nh.D()}}]),e}();function qg(e){return gd(e,"owner")}function Kg(e){return gd(e,"clientMetadata")}function Gg(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Wg=function(){function e(t,n,r,i){Mt(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return Ut(e,null,[{key:"Li",value:function(t,n){var r,i=yv(),a=yv(),o=Qt(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Hg=function(){function e(){Mt(this,e),this.qi=!1}return Ut(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(Gp(t))return Ch.resolve(null);var r=Yp(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Xp(t,null,"F"),r=Yp(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=yv.apply(void 0,Lt(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,Xp(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return Gp(t)||r.isEqual(ch.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(Uf()<=Ba.DEBUG&&jf("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),tv(t)),i.Wi(e,o,t,bh(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new Sd(iv(e));return t.forEach((function(t,r){nv(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return Uf()<=Ba.DEBUG&&jf("QueryEngine","Using full collection scan to execute query:",tv(t)),this.Ui.getDocumentsMatchingQuery(e,t,xh.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Qg=function(){function e(t,n,r,i){Mt(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new xd(ah),this.Yi=new ov((function(e){return Mp(e)}),Fp),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return Ut(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tg(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function $g(e,t,n,r){return new Qg(e,t,n,r)}function Yg(e,t){return Jg.apply(this,arguments)}function Jg(){return Jg=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gf(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=yv(),s=Qt(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Qt(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Qt(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=Qt(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Jg.apply(this,arguments)}function Xg(e,t){var n=Gf(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Ch.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Kf(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=yv(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Zg(e){var t=Gf(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function ek(e,t){var n=Gf(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Nd.EMPTY_BYTE_STRING,ch.min()).withLastLimboFreeSnapshotVersion(ch.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var u=sv(),s=yv();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(tk(e,a,t.documentUpdates).next((function(e){u=e.nr,s=e.sr}))),!r.isEqual(ch.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Ch.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function tk(e,t,n){var r=yv(),i=yv();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=sv();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(ch.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):jf("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function nk(e,t){var n=Gf(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function rk(e,t){var n=Gf(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,Ch.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new ry(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function ik(e,t,n){return ak.apply(this,arguments)}function ak(){return ak=fr(cr().mark((function e(t,n,r){var i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Gf(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Rh(e.t1)){e.next=12;break}throw e.t1;case 12:jf("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),ak.apply(this,arguments)}function ok(e,t,n){var r=Gf(e),i=ch.min(),a=yv();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Gf(e),i=r.Yi.get(n);return void 0!==i?Ch.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Yp(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:ch.min(),n?a:yv())})).next((function(e){return ck(r,rv(t),e),{documents:e,ir:a}}))}))}function uk(e,t){var n=Gf(e),r=Gf(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function sk(e,t){var n=Gf(e),r=n.Xi.get(t)||ch.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,bh(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return ck(n,t,e),e}))}function ck(e,t,n){var r=e.Xi.get(t)||ch.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function lk(e,t,n,r){return fk.apply(this,arguments)}function fk(){return fk=fr(cr().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Gf(t),o=yv(),u=sv(),s=Qt(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.rr(l.metadata.name),l.document&&(o=o.add(f)),(h=n.ur(l)).setReadTime(n.cr(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,rk(a,function(e){return Yp(Kp(fh.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return tk(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),fk.apply(this,arguments)}function hk(e,t){return dk.apply(this,arguments)}function dk(){return dk=fr(cr().mark((function e(t,n){var r,i,a,o=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:yv(),e.next=3,rk(t,Yp(hy(n.bundledQuery)));case 3:return i=e.sent,a=Gf(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Om(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(Nd.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),dk.apply(this,arguments)}function pk(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function vk(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function mk(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var yk=function(){function e(t,n,r,i){Mt(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Ut(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Hf(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Vf("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),gk=function(){function e(t,n,r){Mt(this,e),this.targetId=t,this.state=n,this.error=r}return Ut(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Hf(i.error.code,i.error.message))),a?new e(t,i.state,r):(Vf("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),kk=function(){function e(t,n){Mt(this,e),this.clientId=t,this.activeTargetIds=n}return Ut(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=kv(),o=0;i&&o<r.activeTargetIds.length;++o)i=qh(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Vf("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),bk=function(){function e(t,n){Mt(this,e),this.clientId=t,this.onlineState=n}return Ut(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Vf("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),wk=function(){function e(){Mt(this,e),this.activeTargetIds=kv()}return Ut(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),xk=function(){function e(t,n,r,i,a){Mt(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new xd(ah),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=pk(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new wk),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return Ut(e,[{key:"start",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=Qt(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(pk(this.persistenceKey,i)))&&(o=kk.ar(i,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(u=this.storage.getItem(this.vr))&&(s=this.br(u))&&this.Vr(s),c=Qt(this.yr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.mr(f)}catch(d){c.e(d)}finally{c.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(mk(this.persistenceKey,e));if(n){var r=gk.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(mk(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return jf("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){jf("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){jf("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(jf("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void Vf("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(fr(cr().mark((function e(){var r,i,a,o,u,s,c;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(u));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}s=function(e){var t=Vh.ct;if(null!=e)try{var n=JSON.parse(e);Kf("number"==typeof n),t=n}catch(e){Vf("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Vh.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Gr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new yk(this.currentUser,e,t,n),i=vk(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=vk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=mk(this.persistenceKey,e),i=new gk(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return kk.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return yk.ar(new Lf(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return gk.ar(r,t)}},{key:"br",value:function(e){return bk.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:jf("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Wr(o,u).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=kv();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),_k=function(){function e(){Mt(this,e),this.Hr=new wk,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Ut(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new wk,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Ek=function(){function e(){Mt(this,e)}return Ut(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Sk=function(){function e(){var t=this;Mt(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return Ut(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){jf("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Qt(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){jf("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Qt(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Ik=null;function Tk(){return null===Ik?Ik=268435456+Math.round(2147483648*Math.random()):Ik++,"0x"+Ik.toString(16)}var Ck={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Ak=function(){function e(t){Mt(this,e),this.ro=t.ro,this.oo=t.oo}return Ut(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),Nk="WebChannelConnection",Ok=function(e){Vt(n,e);var t=Kt(n);function n(e){var r;return Mt(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return Ut(n,[{key:"Ao",value:function(e,t,n,r){var i=Tk();return new Promise((function(a,o){var u=new Of;u.setWithCredentials(!0),u.listenOnce(If.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Sf.NO_ERROR:var t=u.getResponseJson();jf(Nk,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Sf.TIMEOUT:jf(Nk,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Hf(Wf.DEADLINE_EXCEEDED,"Request time out"));break;case Sf.HTTP_ERROR:var n=u.getStatus();if(jf(Nk,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Wf).indexOf(t)>=0?t:Wf.UNKNOWN}(s.status);o(new Hf(c,s.message))}else o(new Hf(Wf.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Hf(Wf.UNAVAILABLE,"Connection failed."));break;default:qf()}}finally{jf(Nk,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);jf(Nk,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=Tk(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=_f(),o=Ef(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new Af({})),this.Eo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");jf(Nk,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new Ak({ro:function(t){h?jf(Nk,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(jf(Nk,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),jf(Nk,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Nf.EventType.OPEN,(function(){h||jf(Nk,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Nf.EventType.CLOSE,(function(){h||(h=!0,jf(Nk,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,Nf.EventType.ERROR,(function(t){h||(h=!0,Bf(Nk,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new Hf(Wf.UNAVAILABLE,"The operation could not be completed")))})),p(l,Nf.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Kf(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){jf(Nk,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Yv[e];if(void 0!==t)return am(t)}(u),c=o.message;void 0===s&&(s=Wf.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.wo(new Hf(s,c)),l.close()}else jf(Nk,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,Tf.STAT_EVENT,(function(t){t.stat===Cf.PROXY?jf(Nk,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Cf.NOPROXY&&jf(Nk,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){Mt(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Ut(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=Tk(),o=this.To(e,t);jf("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.Eo(u,r,i),this.Ao(e,o,u,n).then((function(t){return jf("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Bf("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=Ck[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function Pk(){return"undefined"!=typeof window?window:null}function Rk(){return"undefined"!=typeof document?document:null}function Dk(e){return new Im(e,!0)}var Lk=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Mt(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return Ut(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&jf("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),Mk=function(){function e(t,n,r,i,a,o,u,s){Mt(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Lk(t,n)}return Ut(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===Wf.RESOURCE_EXHAUSTED?(Vf(n.toString()),Vf("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===Wf.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=Rt(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new Hf(Wf.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(fr(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return jf("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(jf("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Fk=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i,a,o,u){var s;return Mt(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return Ut(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:qf()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Kf(void 0===t||"string"==typeof t),Nd.fromBase64String(t||"")):(Kf(void 0===t||t instanceof Uint8Array),Nd.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Wf.UNKNOWN:am(e.code);return new Hf(t,e.message||"")}(o);n=new gm(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Lm(e,s.document.name),l=Om(s.document.updateTime),f=s.document.createTime?Om(s.document.createTime):ch.min(),h=new up({mapValue:{fields:s.document.fields}}),d=cp.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new mm(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Lm(e,m.document),g=m.readTime?Om(m.readTime):ch.min(),k=cp.newNoDocument(y,g),b=m.removedTargetIds||[];n=new mm([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=Lm(e,w.document),_=w.removedTargetIds||[];n=new mm([],_,x,null)}else{if(!("filter"in t))return qf();t.filter;var E=t.filter;E.targetId;var S=E.count,I=void 0===S?0:S,T=E.unchangedNames,C=new rm(I,T),A=E.targetId;n=new ym(A,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ch.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ch.min():t.readTime?Om(t.readTime):ch.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=Um(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Up(r)?{documents:Gm(e,r)}:{query:Wm(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Am(e,t.resumeToken);var i=Tm(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(ch.min())>0){n.readTime=Cm(e,t.snapshotVersion.toTimestamp());var a=Tm(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qf()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=Um(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(Mk),Uk=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i,a,o,u){var s;return Mt(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.ru=!1,s}return Ut(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,fu(Bt(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(Kf(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(Kf(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Om(e.updateTime):Om(t);return n.isEqual(ch.min())&&(n=Om(t)),new Mv(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Om(e.commitTime);return this.listener.cu(n,t)}return Kf(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=Um(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return qm(t.serializer,e)}))};this.Wo(n)}}]),n}(Mk),jk=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i,a){var o;return Mt(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return Ut(n,[{key:"fu",value:function(){if(this.lu)throw new Hf(Wf.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=Rt(i,2),o=a[0],u=a[1];return r.connection.Io(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Wf.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Hf(Wf.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=Rt(a,2),u=o[0],s=o[1];return i.connection.vo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Wf.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Hf(Wf.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return Ut((function e(){Mt(this,e)}))}());var Vk=function(){function e(t,n){Mt(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return Ut(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Vf(t),this.mu=!1):jf("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),Bk=Ut((function e(t,n,r,i,a){var o=this;Mt(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Xk(o),!e.t0){e.next=5;break}return jf("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Gf(t)).vu.add(4),e.next=4,Kk(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,zk(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new Vk(r,i)}));function zk(e){return qk.apply(this,arguments)}function qk(){return qk=fr(cr().mark((function e(t){var n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Xk(t)){e.next=18;break}n=Qt(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),qk.apply(this,arguments)}function Kk(e){return Gk.apply(this,arguments)}function Gk(){return Gk=fr(cr().mark((function e(t){var n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Qt(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Gk.apply(this,arguments)}function Wk(e,t){var n=Gf(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Jk(n)?Yk(n):Tb(n).Ko()&&Qk(n,t))}function Hk(e,t){var n=Gf(e),r=Tb(n);n.Au.delete(t),r.Ko()&&$k(n,t),0===n.Au.size&&(r.Ko()?r.jo():Xk(n)&&n.bu.set("Unknown"))}function Qk(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ch.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Tb(e).su(t)}function $k(e,t){e.Vu.qt(t),Tb(e).iu(t)}function Yk(e){e.Vu=new bm({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),Tb(e).start(),e.bu.gu()}function Jk(e){return Xk(e)&&!Tb(e).Uo()&&e.Au.size>0}function Xk(e){return 0===Gf(e).vu.size}function Zk(e){e.Vu=void 0}function eb(e){return tb.apply(this,arguments)}function tb(){return tb=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){Qk(t,e)}));case 1:case"end":return e.stop()}}),e)}))),tb.apply(this,arguments)}function nb(e,t){return rb.apply(this,arguments)}function rb(){return rb=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Zk(t),Jk(t)?(t.bu.Iu(n),Yk(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),rb.apply(this,arguments)}function ib(e,t,n){return ab.apply(this,arguments)}function ab(){return ab=fr(cr().mark((function e(t,n,r){var i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof gm&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=fr(cr().mark((function e(t,n){var r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Qt(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),jf("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,ob(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof mm?t.Vu.Ht(n):n instanceof ym?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(ch.min())){e.next=29;break}return e.prev=14,e.next=17,Zg(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(Nd.EMPTY_BYTE_STRING,r.snapshotVersion)),$k(e,t);var i=new ry(r.target,t,n,r.sequenceNumber);Qk(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),jf("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,ob(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),ab.apply(this,arguments)}function ob(e,t,n){return ub.apply(this,arguments)}function ub(){return ub=fr(cr().mark((function e(t,n,r){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Rh(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,Kk(t);case 5:t.bu.set("Offline"),r||(r=function(){return Zg(t.localStore)}),t.asyncQueue.enqueueRetryable(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jf("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,zk(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),ub.apply(this,arguments)}function sb(e,t){return t().catch((function(n){return ob(e,n,t)}))}function cb(e){return lb.apply(this,arguments)}function lb(){return lb=fr(cr().mark((function e(t){var n,r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Gf(t),r=Cb(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!fb(n)){e.next=19;break}return e.prev=3,e.next=6,nk(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,hb(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,ob(n,e.t0);case 17:e.next=2;break;case 19:db(n)&&pb(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),lb.apply(this,arguments)}function fb(e){return Xk(e)&&e.Eu.length<10}function hb(e,t){e.Eu.push(t);var n=Cb(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function db(e){return Xk(e)&&!Cb(e).Uo()&&e.Eu.length>0}function pb(e){Cb(e).start()}function vb(e){return mb.apply(this,arguments)}function mb(){return mb=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Cb(t).hu();case 1:case"end":return e.stop()}}),e)}))),mb.apply(this,arguments)}function yb(e){return gb.apply(this,arguments)}function gb(){return gb=fr(cr().mark((function e(t){var n,r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Cb(t),r=Qt(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),gb.apply(this,arguments)}function kb(e,t,n){return bb.apply(this,arguments)}function bb(){return bb=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=tm.from(i,n,r),e.next=3,sb(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,cb(t);case 5:case"end":return e.stop()}}),e)}))),bb.apply(this,arguments)}function wb(e,t){return xb.apply(this,arguments)}function xb(){return xb=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Cb(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=fr(cr().mark((function e(t,n){var r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!im(i=n.code)||i===Wf.ABORTED){e.next=7;break}return r=t.Eu.shift(),Cb(t).Qo(),e.next=5,sb(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,cb(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:db(t)&&pb(t);case 5:case"end":return e.stop()}}),e)}))),xb.apply(this,arguments)}function _b(e,t){return Eb.apply(this,arguments)}function Eb(){return Eb=fr(cr().mark((function e(t,n){var r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Gf(t)).asyncQueue.verifyOperationInProgress(),jf("RemoteStore","RemoteStore received new credentials"),i=Xk(r),r.vu.add(3),e.next=6,Kk(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,zk(r);case 12:case"end":return e.stop()}}),e)}))),Eb.apply(this,arguments)}function Sb(e,t){return Ib.apply(this,arguments)}function Ib(){return Ib=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gf(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,zk(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,Kk(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Ib.apply(this,arguments)}function Tb(e){return e.Su||(e.Su=function(e,t,n){var r=Gf(e);return r.fu(),new Fk(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:eb.bind(null,e),ao:nb.bind(null,e),nu:ib.bind(null,e)}),e.Ru.push(function(){var t=fr(cr().mark((function t(n){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),Jk(e)?Yk(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:Zk(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function Cb(e){return e.Du||(e.Du=function(e,t,n){var r=Gf(e);return r.fu(),new Uk(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:vb.bind(null,e),ao:wb.bind(null,e),au:yb.bind(null,e),cu:kb.bind(null,e)}),e.Ru.push(function(){var t=fr(cr().mark((function t(n){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,cb(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(jf("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var Ab=function(){function e(t,n,r,i,a){Mt(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Ut(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Hf(Wf.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Nb(e,t){if(Vf("AsyncQueue","".concat(t,": ").concat(e)),Rh(e))return new Hf(Wf.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Ob=function(){function e(t){Mt(this,e),this.comparator=t?function(e,n){return t(e,n)||ph.comparator(e.key,n.key)}:function(e,t){return ph.comparator(e.key,t.key)},this.keyedMap=lv(),this.sortedSet=new xd(this.comparator)}return Ut(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Pb=function(){function e(){Mt(this,e),this.Cu=new xd(ph.comparator)}return Ut(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):qf():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Rb=function(){function e(t,n,r,i,a,o,u,s,c){Mt(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return Ut(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Ob.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Db=Ut((function e(){Mt(this,e),this.Nu=void 0,this.listeners=[]})),Lb=Ut((function e(){Mt(this,e),this.queries=new ov((function(e){return ev(e)}),Zp),this.onlineState="Unknown",this.ku=new Set}));function Mb(e,t){return Fb.apply(this,arguments)}function Fb(){return Fb=fr(cr().mark((function e(t,n){var r,i,a,o,u;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gf(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Db),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Nb(e.t0,"Initialization of query '".concat(tv(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&zb(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Fb.apply(this,arguments)}function Ub(e,t){return jb.apply(this,arguments)}function jb(){return jb=fr(cr().mark((function e(t,n){var r,i,a,o,u;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gf(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),jb.apply(this,arguments)}function Vb(e,t){var n,r=Gf(e),i=!1,a=Qt(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Qt(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Nu=o}}}catch(f){a.e(f)}finally{a.f()}i&&zb(r)}function Bb(e,t,n){var r=Gf(e),i=r.queries.get(t);if(i){var a,o=Qt(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function zb(e){e.ku.forEach((function(e){e.next()}))}var qb=function(){function e(t,n,r){Mt(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return Ut(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Qt(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Rb(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=Rb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),Kb=function(){function e(t,n){Mt(this,e),this.Gu=t,this.byteLength=n}return Ut(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),Gb=function(){function e(t){Mt(this,e),this.serializer=t}return Ut(e,[{key:"rr",value:function(e){return Lm(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?Bm(this.serializer,e.document,!1):cp.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return Om(e)}}]),e}(),Wb=function(){function e(t,n,r){Mt(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Hb(t)}return Ut(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=fh.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new Gb(this.serializer),i=Qt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.rr(a.metadata.name),s=Qt(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||yv()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lk(this.localStore,new Gb(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=Qt(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,hk(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Hb(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Qb=Ut((function e(t){Mt(this,e),this.key=t})),$b=Ut((function e(t){Mt(this,e),this.key=t})),Yb=function(){function e(t,n){Mt(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=yv(),this.mutatedKeys=yv(),this.tc=iv(t),this.ec=new Ob(this.tc)}return Ut(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new Pb,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=nv(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.rc(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.tc(f,s)>0||c&&n.tc(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:u,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qf()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],u=0===this.Zu.size&&this.current?1:0,s=u!==this.Xu;return this.Xu=u,0!==a.length||s?{snapshot:new Rb(this.query,e.ec,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Pb,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=yv(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new $b(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new Qb(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=yv();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return Rb.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),Jb=Ut((function e(t,n,r){Mt(this,e),this.query=t,this.targetId=n,this.view=r})),Xb=Ut((function e(t){Mt(this,e),this.key=t,this.fc=!1})),Zb=function(){function e(t,n,r,i,a,o){Mt(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new ov((function(e){return ev(e)}),Zp),this._c=new Map,this.mc=new Set,this.gc=new xd(ph.comparator),this.yc=new Map,this.Ic=new Ng,this.Tc={},this.Ec=new Map,this.Ac=ag.Mn(),this.onlineState="Unknown",this.vc=void 0}return Ut(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function ew(e,t){return tw.apply(this,arguments)}function tw(){return tw=fr(cr().mark((function e(t,n){var r,i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Hw(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,rk(r.localStore,Yp(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,nw(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&Wk(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),tw.apply(this,arguments)}function nw(e,t,n,r,i){return rw.apply(this,arguments)}function rw(){return rw=fr(cr().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=fr(cr().mark((function e(t,n,r,i){var a,o,u;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,ok(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(_w(t,n.targetId,u.cc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,ok(t.localStore,n,!0);case 3:return o=e.sent,u=new Yb(n,o.ir),s=u.sc(o.documents),c=vm.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),_w(t,r,l.cc),f=new Jb(n,r,u),e.abrupt("return",(t.wc.set(n,f),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),rw.apply(this,arguments)}function iw(e,t){return aw.apply(this,arguments)}function aw(){return aw=fr(cr().mark((function e(t,n){var r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gf(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!Zp(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,ik(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Hk(r.remoteStore,i.targetId),ww(r,i.targetId)})).catch(Ih);case 9:e.next=14;break;case 11:return ww(r,i.targetId),e.next=14,ik(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),aw.apply(this,arguments)}function ow(e,t,n){return uw.apply(this,arguments)}function uw(){return uw=fr(cr().mark((function e(t,n,r){var i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qw(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Gf(e),a=sh.now(),o=t.reduce((function(e,t){return e.add(t.key)}),yv());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=sv(),s=yv();return i.Zi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Qt(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=qv(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Wv(c.key,l,sp(l.value.mapValue),Fv.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:fv(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new xd(ah)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Iw(i,a.changes);case 9:return e.next=11,cb(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Nb(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),uw.apply(this,arguments)}function sw(e,t){return cw.apply(this,arguments)}function cw(){return cw=fr(cr().mark((function e(t,n){var r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gf(t),e.prev=1,e.next=4,ek(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(Kf(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?Kf(n.fc):e.removedDocuments.size>0&&(Kf(n.fc),n.fc=!1))})),e.next=8,Iw(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Ih(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),cw.apply(this,arguments)}function lw(e,t,n){var r=Gf(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Gf(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Qt(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&zb(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function fw(e,t,n){return hw.apply(this,arguments)}function hw(){return hw=fr(cr().mark((function e(t,n,r){var i,a,o,u,s,c;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Gf(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new xd(ph.comparator)).insert(o,cp.newNoDocument(o,ch.min())),s=yv().add(o),c=new pm(ch.min(),new Map,new xd(ah),u,s),e.next=9,sw(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),Sw(i),e.next=16;break;case 14:return e.next=16,ik(i.localStore,n,!1).then((function(){return ww(i,n,r)})).catch(Ih);case 16:case"end":return e.stop()}}),e)}))),hw.apply(this,arguments)}function dw(e,t){return pw.apply(this,arguments)}function pw(){return pw=fr(cr().mark((function e(t,n){var r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gf(t),i=n.batch.batchId,e.prev=1,e.next=4,Xg(r.localStore,n);case 4:return a=e.sent,bw(r,i,null),kw(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Iw(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ih(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),pw.apply(this,arguments)}function vw(e,t,n){return mw.apply(this,arguments)}function mw(){return mw=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gf(t),e.prev=1,e.next=4,function(e,t){var n=Gf(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Kf(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,bw(i,n,r),kw(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Iw(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ih(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),mw.apply(this,arguments)}function yw(e,t){return gw.apply(this,arguments)}function gw(){return gw=fr(cr().mark((function e(t,n){var r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xk((r=Gf(t)).remoteStore)||jf("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Gf(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Nb(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),gw.apply(this,arguments)}function kw(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function bw(e,t,n){var r=Gf(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function ww(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Qt(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||xw(e,t)}))}function xw(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(Hk(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Sw(e))}function _w(e,t,n){var r,i=Qt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Qb?(e.Ic.addReference(a.key,t),Ew(e,a)):a instanceof $b?(jf("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||xw(e,a.key)):qf()}}catch(o){i.e(o)}finally{i.f()}}function Ew(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(jf("SyncEngine","New document in limbo: "+n),e.mc.add(r),Sw(e))}function Sw(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new ph(fh.fromString(t)),r=e.Ac.next();e.yc.set(r,new Xb(n)),e.gc=e.gc.insert(n,r),Wk(e.remoteStore,new ry(Yp(Kp(n.path)),r,"TargetPurposeLimboResolution",Vh.ct))}}function Iw(e,t,n){return Tw.apply(this,arguments)}function Tw(){return Tw=fr(cr().mark((function e(t,n,r){var i,a,o,u;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Gf(t),a=[],o=[],u=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){u.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Wg.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.dc.nu(a),e.next=9,function(){var e=fr(cr().mark((function e(t,n){var r,i,a,o,u,s,c,l;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gf(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ch.forEach(n,(function(t){return Ch.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Ch.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Rh(e.t0)){e.next=10;break}throw e.t0;case 10:jf("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Qt(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ji.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Tw.apply(this,arguments)}function Cw(e,t){return Aw.apply(this,arguments)}function Aw(){return Aw=fr(cr().mark((function e(t,n){var r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Gf(t)).currentUser.isEqual(n)){e.next=11;break}return jf("SyncEngine","User change. New user:",n.toKey()),e.next=5,Yg(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new Hf(Wf.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Iw(r,i.er);case 11:case"end":return e.stop()}}),e)}))),Aw.apply(this,arguments)}function Nw(e,t){var n=Gf(e),r=n.yc.get(t);if(r&&r.fc)return yv().add(r.key);var i=yv(),a=n._c.get(t);if(!a)return i;var o,u=Qt(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.wc.get(s);i=i.unionWith(c.view.nc)}}catch(l){u.e(l)}finally{u.f()}return i}function Ow(e,t){return Pw.apply(this,arguments)}function Pw(){return Pw=fr(cr().mark((function e(t,n){var r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gf(t),e.next=3,ok(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&_w(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)}))),Pw.apply(this,arguments)}function Rw(e,t){return Dw.apply(this,arguments)}function Dw(){return Dw=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gf(t),e.abrupt("return",sk(r.localStore,n).then((function(e){return Iw(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Dw.apply(this,arguments)}function Lw(e,t,n,r){return Mw.apply(this,arguments)}function Mw(){return Mw=fr(cr().mark((function e(t,n,r,i){var a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Gf(t),e.next=3,function(e,t){var n=Gf(e),r=Gf(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Ch.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,cb(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(bw(a,n,i||null),kw(a,n),function(e,t){Gf(Gf(e).mutationQueue).Cn(t)}(a.localStore,n)):qf();case 11:return e.next=13,Iw(a,o);case 13:e.next=16;break;case 15:jf("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Mw.apply(this,arguments)}function Fw(e,t){return Uw.apply(this,arguments)}function Uw(){return Uw=fr(cr().mark((function e(t,n){var r,i,a,o,u,s,c,l;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Hw(r=Gf(t)),Qw(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,jw(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,Sb(r.remoteStore,!0);case 9:o=Qt(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Wk(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return ww(r,t),ik(r.localStore,t,!0)})),Hk(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,jw(r,c);case 21:return function(e){var t=Gf(e);t.yc.forEach((function(e,n){Hk(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new xd(ph.comparator)}(r),r.vc=!1,e.next=25,Sb(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Uw.apply(this,arguments)}function jw(e,t,n){return Vw.apply(this,arguments)}function Vw(){return Vw=fr(cr().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Gf(t),a=[],o=[],u=Qt(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i._c.get(c))||0===f.length){e.next=34;break}return e.next=11,rk(i.localStore,Yp(f[0]));case 11:l=e.sent,h=Qt(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.wc.get(p),e.next=20,Ow(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,uk(i.localStore,c);case 36:return y=e.sent,e.next=39,rk(i.localStore,y);case 39:return l=e.sent,e.next=42,nw(i,Bw(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Vw.apply(this,arguments)}function Bw(e){return qp(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function zw(e){var t=Gf(e);return Gf(Gf(t.localStore).persistence).$i()}function qw(e,t,n,r){return Kw.apply(this,arguments)}function Kw(){return Kw=fr(cr().mark((function e(t,n,r,i){var a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Gf(t)).vc){e.next=3;break}return e.abrupt("return",void jf("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,sk(a.localStore,rv(o[0]));case 10:return u=e.sent,s=pm.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Nd.EMPTY_BYTE_STRING),e.next=14,Iw(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,ik(a.localStore,n,!0);case 17:return ww(a,n,i),e.abrupt("break",20);case 19:qf();case 20:case"end":return e.stop()}}),e)}))),Kw.apply(this,arguments)}function Gw(e,t,n){return Ww.apply(this,arguments)}function Ww(){return Ww=fr(cr().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Hw(t)).vc){e.next=45;break}a=Qt(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i._c.has(u)){e.next=10;break}return jf("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,uk(i.localStore,u);case 12:return s=e.sent,e.next=15,rk(i.localStore,s);case 15:return c=e.sent,e.next=18,nw(i,Bw(s),c.targetId,!1,c.resumeToken);case 18:Wk(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Qt(r),e.prev=30,h=cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,ik(i.localStore,t,!1).then((function(){Hk(i.remoteStore,t),ww(i,t)})).catch(Ih);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Ww.apply(this,arguments)}function Hw(e){var t=Gf(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=sw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=fw.bind(null,t),t.dc.nu=Vb.bind(null,t.eventManager),t.dc.Pc=Bb.bind(null,t.eventManager),t}function Qw(e){var t=Gf(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=vw.bind(null,t),t}function $w(e,t,n){var r=Gf(e);(function(){var e=fr(cr().mark((function e(t,n,r){var i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Gf(e),r=Om(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Hb(i)),a=new Wb(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Iw(t,s.Ju,void 0);case 31:return e.next=33,function(e,t){var n=Gf(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Bf("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Yw=function(){function e(){Mt(this,e),this.synchronizeTabs=!1}return Ut(e,[{key:"initialize",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Dk(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return $g(this.persistence,new Hg,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Mg(Ug.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new _k}},{key:"terminate",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Jw=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Ut(n,[{key:"initialize",value:function(){var e=fr(cr().mark((function e(t){var r=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fu(Bt(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,Qw(this.Vc.syncEngine);case 6:return e.next=8,cb(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return $g(this.persistence,new Hg,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new hg(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new jh(t,this.persistence);return new Uh(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Gg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Jy.withCacheSize(this.cacheSizeBytes):Jy.DEFAULT;return new zg(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Pk(),Rk(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new _k}}]),n}(Yw),Xw=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ut(n,[{key:"initialize",value:function(){var e=fr(cr().mark((function e(t){var r,i=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fu(Bt(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof xk,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:Lw.bind(null,r),zr:qw.bind(null,r),Wr:Gw.bind(null,r),$i:zw.bind(null,r),Qr:Rw.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fw(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=Pk();if(!xk.D(t))throw new Hf(Wf.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Gg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xk(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Jw),Zw=function(){function e(){Mt(this,e)}return Ut(e,[{key:"initialize",value:function(){var e=fr(cr().mark((function e(t,n){var r=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return lw(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Cw.bind(null,this.syncEngine),e.next=12,Sb(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Lb}},{key:"createDatastore",value:function(e){var t,n=Dk(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Ok(t));return function(e,t,n,r){return new jk(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return lw(o.syncEngine,e,0)},a=Sk.D()?new Sk:new Ek,new Bk(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Zb(e,t,n,r,i,a);return o&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gf(t),jf("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,Kk(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function ex(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return fr(cr().mark((function r(){var i;return cr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var tx=function(){function e(t){Mt(this,e),this.observer=t,this.muted=!1}return Ut(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):Vf("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),nx=function(){function e(t,n){var r=this;Mt(this,e),this.Cc=t,this.serializer=n,this.metadata=new Qf,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return Ut(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new Kb(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=fr(cr().mark((function e(){var t,n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=fr(cr().mark((function e(){var t,n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),rx=function(){function e(t){Mt(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Ut(e,[{key:"lookup",value:function(){var e=fr(cr().mark((function e(t){var n,r=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Hf(Wf.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=fr(cr().mark((function e(t,n){var r,i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gf(t),i=Um(r.serializer)+"/documents",a={documents:n.map((function(e){return Dm(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=zm(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Kf(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Xv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=fr(cr().mark((function e(){var t,n=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=ph.fromPath(t);n.mutations.push(new Zv(r,n.precondition(r)))})),e.next=7,function(){var e=fr(cr().mark((function e(t,n){var r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gf(t),i=Um(r.serializer)+"/documents",a={writes:n.map((function(e){return qm(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw qf();t=ch.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Hf(Wf.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ch.min())?Fv.exists(!1):Fv.updateTime(t):Fv.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ch.min()))throw new Hf(Wf.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fv.updateTime(t)}return Fv.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),ix=function(){function e(t,n,r,i,a){Mt(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new Lk(this.asyncQueue,"transaction_retry")}return Ut(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(fr(cr().mark((function t(){var n,r;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new rx(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!Bh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!im(t)}return!1}}]),e}(),ax=function(){function e(t,n,r,i){var a=this;Mt(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Lf.UNAUTHENTICATED,this.clientId=ih.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jf("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return jf("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Ut(e,[{key:"getConfiguration",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Hf(Wf.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Qf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(fr(cr().mark((function n(){var r;return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Nb(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function ox(e,t){return ux.apply(this,arguments)}function ux(){return ux=fr(cr().mark((function e(t,n){var r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),jf("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Yg(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),ux.apply(this,arguments)}function sx(e,t){return cx.apply(this,arguments)}function cx(){return cx=fr(cr().mark((function e(t,n){var r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,fx(t);case 3:return r=e.sent,jf("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return _b(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return _b(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),cx.apply(this,arguments)}function lx(e){return"FirebaseError"===e.name?e.code===Wf.FAILED_PRECONDITION||e.code===Wf.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function fx(e){return hx.apply(this,arguments)}function hx(){return hx=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return jf("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,ox(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),lx(n=e.t0)){e.next=13;break}throw n;case 13:return Bf("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,ox(t,new Yw);case 16:e.next=21;break;case 18:return jf("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,ox(t,new Yw);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),hx.apply(this,arguments)}function dx(e){return px.apply(this,arguments)}function px(){return px=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return jf("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,sx(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return jf("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,sx(t,new Zw);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),px.apply(this,arguments)}function vx(e){return fx(e).then((function(e){return e.persistence}))}function mx(e){return fx(e).then((function(e){return e.localStore}))}function yx(e){return dx(e).then((function(e){return e.remoteStore}))}function gx(e){return dx(e).then((function(e){return e.syncEngine}))}function kx(e){return dx(e).then((function(e){return e.datastore}))}function bx(e){return wx.apply(this,arguments)}function wx(){return wx=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dx(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=ew.bind(null,n.syncEngine),r.onUnlisten=iw.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),wx.apply(this,arguments)}function xx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Qf;return e.asyncQueue.enqueueAndForget(fr(cr().mark((function i(){return cr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new tx({next:function(a){t.enqueueAndForget((function(){return Ub(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Hf(Wf.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Hf(Wf.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new qb(Kp(n.path),a,{includeMetadataChanges:!0,Ku:!0});return Mb(e,o)},i.next=3,bx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function _x(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Qf;return e.asyncQueue.enqueueAndForget(fr(cr().mark((function i(){return cr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new tx({next:function(n){t.enqueueAndForget((function(){return Ub(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Hf(Wf.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new qb(n,a,{includeMetadataChanges:!0,Ku:!0});return Mb(e,o)},i.next=3,bx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Ex(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var Sx=new Map;function Ix(e,t,n){if(!n)throw new Hf(Wf.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Tx(e,t,n,r){if(!0===t&&!0===r)throw new Hf(Wf.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Cx(e){if(!ph.isDocumentKey(e))throw new Hf(Wf.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ax(e){if(ph.isDocumentKey(e))throw new Hf(Wf.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Nx(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":qf()}function Ox(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Hf(Wf.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Nx(e);throw new Hf(Wf.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Px(e,t){if(t<=0)throw new Hf(Wf.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Rx=function(){function e(t){var n,r;if(Mt(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Hf(Wf.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Hf(Wf.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Tx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ex(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Hf(Wf.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Hf(Wf.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Hf(Wf.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return Ut(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),Dx=function(){function e(t,n,r,i){Mt(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rx({}),this._settingsFrozen=!1}return Ut(e,[{key:"app",get:function(){if(!this._app)throw new Hf(Wf.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Hf(Wf.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rx(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Yf;switch(e.type){case"firstParty":return new eh(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Hf(Wf.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Sx.get(e);t&&(jf("ComponentProvider","Removing Datastore"),Sx.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Lx(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Ox(e,Dx))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&Bf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=Lf.MOCK_USER;else{u=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[la(JSON.stringify({alg:"none",type:"JWT"})),la(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Hf(Wf.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Lf(c)}e._authCredentials=new Jf(new $f(u,s))}}var Mx=function(){function e(t,n,r){Mt(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Ut(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Ux(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Fx=function(){function e(t,n,r){Mt(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Ut(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Ux=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this,e,r,Kp(i)))._path=i,a.type="collection",a}return Ut(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Mx(this.firestore,null,new ph(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Fx);function jx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ma(e),Ix("collection","path",t),e instanceof Dx){var a=fh.fromString.apply(fh,[t].concat(r));return Ax(a),new Ux(e,null,a)}if(!(e instanceof Mx||e instanceof Ux))throw new Hf(Wf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(fh.fromString.apply(fh,[t].concat(r)));return Ax(o),new Ux(e.firestore,null,o)}function Vx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ma(e),1===arguments.length&&(t=ih.A()),Ix("doc","path",t),e instanceof Dx){var a=fh.fromString.apply(fh,[t].concat(r));return Cx(a),new Mx(e,null,new ph(a))}if(!(e instanceof Mx||e instanceof Ux))throw new Hf(Wf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(fh.fromString.apply(fh,[t].concat(r)));return Cx(o),new Mx(e.firestore,e instanceof Ux?e.converter:null,new ph(o))}function Bx(e,t){return e=Ma(e),t=Ma(t),(e instanceof Mx||e instanceof Ux)&&(t instanceof Mx||t instanceof Ux)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function zx(e,t){return e=Ma(e),t=Ma(t),e instanceof Fx&&t instanceof Fx&&e.firestore===t.firestore&&Zp(e._query,t._query)&&e.converter===t.converter}var qx=function(){function e(){var t=this;Mt(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Lk(this,"async_queue_retry"),this.Xc=function(){var e=Rk();e&&jf("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=Rk();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return Ut(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=Rk();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new Qf;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=fr(cr().mark((function e(){var t=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Rh(e.t0)){e.next=12;break}throw e.t0;case 12:jf("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Vf("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=Ab.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&qf()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=Qt(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Qt(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function Kx(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Qt(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Gx=function(){function e(){Mt(this,e),this._progressObserver={},this._taskCompletionResolver=new Qf,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Ut(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Wx=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i,a){var o;return Mt(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new qx,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return Ut(n,[{key:"_terminate",value:function(){return this._firestoreClient||Qx(this),this._firestoreClient.terminate()}}]),n}(Dx);function Hx(e){return e._firestoreClient||Qx(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Qx(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Ud(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ex(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new ax(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function $x(e,t,n){var r=new Qf;return e.asyncQueue.enqueue(fr(cr().mark((function i(){var a;return cr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,ox(e,n);case 3:return i.next=5,sx(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),lx(a=i.t0)){i.next=13;break}throw a;case 13:Bf("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Yx(e){return function(e){return e.asyncQueue.enqueue(fr(cr().mark((function t(){var n,r;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vx(e);case 2:return n=t.sent,t.next=5,yx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Gf(e);return t.vu.delete(0),zk(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Hx(e=Ox(e,Wx)))}function Jx(e){return function(e){return e.asyncQueue.enqueue(fr(cr().mark((function t(){var n,r;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vx(e);case 2:return n=t.sent,t.next=5,yx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Gf(t)).vu.add(0),e.next=4,Kk(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Hx(e=Ox(e,Wx)))}function Xx(e,t){var n=Hx(e=Ox(e,Wx)),r=new Gx;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new nx(e,t)}(function(e,t){if(e instanceof Uint8Array)return ex(e,t);if(e instanceof ArrayBuffer)return ex(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?sm().encode(e):e),t)}(n,Dk(t));e.asyncQueue.enqueueAndForget(fr(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=$w,t.next=3,gx(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Zx(e,t){return function(e,t){return e.asyncQueue.enqueue(fr(cr().mark((function n(){return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Gf(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,mx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Hx(e=Ox(e,Wx)),t).then((function(t){return t?new Fx(e,null,t.query):null}))}function e_(e){if(e._initialized||e._terminated)throw new Hf(Wf.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var t_=function(){function e(t){Mt(this,e),this._byteString=t}return Ut(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Nd.fromBase64String(t))}catch(t){throw new Hf(Wf.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Nd.fromUint8Array(t))}}]),e}(),n_=function(){function e(){Mt(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dh(n)}return Ut(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var r_=Ut((function e(t){Mt(this,e),this._methodName=t})),i_=function(){function e(t,n){if(Mt(this,e),!isFinite(t)||t<-90||t>90)throw new Hf(Wf.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Hf(Wf.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Ut(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return ah(this._lat,e._lat)||ah(this._long,e._long)}}]),e}(),a_=/^__.*__$/,o_=function(){function e(t,n,r){Mt(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ut(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Wv(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gv(e,this.data,t,this.fieldTransforms)}}]),e}(),u_=function(){function e(t,n,r){Mt(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ut(e,[{key:"toMutation",value:function(e,t){return new Wv(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function s_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qf()}}var c_=function(){function e(t,n,r,i,a,o){Mt(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Ut(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return A_(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(s_(this.ca)&&a_.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),l_=function(){function e(t,n,r){Mt(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Dk(t)}return Ut(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new c_({ca:e,methodName:t,ga:n,path:dh.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function f_(e){var t=e._freezeSettings(),n=Dk(e._databaseId);return new l_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function h_(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);S_("Data must be an object, but it was:",o,r);var u,s,c=__(r,o);if(a.merge)u=new Cd(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Qt(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=I_(t,l.value,n);if(!o.contains(d))throw new Hf(Wf.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));N_(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Cd(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new o_(new up(c),u,s)}var d_=function(e){Vt(n,e);var t=Kt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(r_);function p_(e,t,n){return new c_({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var v_=function(e){Vt(n,e);var t=Kt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"_toFieldTransform",value:function(e){return new Lv(e.path,new Tv)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(r_),m_=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e)).pa=r,i}return Ut(n,[{key:"_toFieldTransform",value:function(e){var t=p_(this,e,!0),n=this.pa.map((function(e){return x_(e,t)})),r=new Cv(n);return new Lv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(r_),y_=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e)).pa=r,i}return Ut(n,[{key:"_toFieldTransform",value:function(e){var t=p_(this,e,!0),n=this.pa.map((function(e){return x_(e,t)})),r=new Nv(n);return new Lv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(r_),g_=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e)).Ia=r,i}return Ut(n,[{key:"_toFieldTransform",value:function(e){var t=new Pv(e.serializer,xv(e.serializer,this.Ia));return new Lv(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(r_);function k_(e,t,n,r){var i=e.ya(1,t,n);S_("Data must be an object, but it was:",i,r);var a=[],o=up.empty();bd(r,(function(e,r){var u=C_(t,e,n);r=Ma(r);var s=i.da(u);if(r instanceof d_)a.push(u);else{var c=x_(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Cd(a);return new u_(o,u,i.fieldTransforms)}function b_(e,t,n,r,i,a){var o=e.ya(1,t,n),u=[I_(t,r,n)],s=[i];if(a.length%2!=0)throw new Hf(Wf.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(I_(t,a[c])),s.push(a[c+1]);for(var l=[],f=up.empty(),h=u.length-1;h>=0;--h)if(!N_(l,u[h])){var d=u[h],p=s[h];p=Ma(p);var v=o.da(d);if(p instanceof d_)l.push(d);else{var m=x_(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Cd(l);return new u_(f,y,o.fieldTransforms)}function w_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return x_(n,e.ya(r?4:3,t))}function x_(e,t){if(E_(e=Ma(e)))return S_("Unsupported field value:",t,e),__(e,t);if(e instanceof r_)return function(e,t){if(!s_(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Qt(e);try{for(a.s();!(n=a.n()).done;){var o=x_(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Ma(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xv(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=sh.fromDate(e);return{timestampValue:Cm(t.serializer,n)}}if(e instanceof sh){var r=new sh(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Cm(t.serializer,r)}}if(e instanceof i_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof t_)return{bytesValue:Am(t.serializer,e._byteString)};if(e instanceof Mx){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Pm(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Nx(e)))}(e,t)}function __(e,t){var n={};return wd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bd(e,(function(e,r){var i=x_(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function E_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof sh||e instanceof i_||e instanceof t_||e instanceof Mx||e instanceof r_)}function S_(e,t,n){if(!E_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Nx(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function I_(e,t,n){if((t=Ma(t))instanceof n_)return t._internalPath;if("string"==typeof t)return C_(e,t);throw A_("Field path arguments must be of type string or ",e,!1,void 0,n)}var T_=new RegExp("[~\\*/\\[\\]]");function C_(e,t,n){if(t.search(T_)>=0)throw A_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Gt(n_,Lt(t.split(".")))._internalPath}catch(V){throw A_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function A_(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Hf(Wf.INVALID_ARGUMENT,u+e+s)}function N_(e,t){return e.some((function(e){return e.isEqual(t)}))}var O_=function(){function e(t,n,r,i,a){Mt(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Ut(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Mx(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new P_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(R_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),P_=function(e){Vt(n,e);var t=Kt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"data",value:function(){return fu(Bt(n.prototype),"data",this).call(this)}}]),n}(O_);function R_(e,t){return"string"==typeof t?C_(e,t):t instanceof n_?t._internalPath:t._delegate._internalPath}function D_(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Hf(Wf.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var L_=Ut((function e(){Mt(this,e)})),M_=function(e){Vt(n,e);var t=Kt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n)}(L_);function F_(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof L_&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof j_})).length,n=e.filter((function(e){return e instanceof U_})).length;if(t>1||t>0&&n>0)throw new Hf(Wf.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=Qt(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var U_=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return Ut(n,[{key:"_apply",value:function(e){var t=this._parse(e);return J_(e._query,t),new Fx(e.firestore,e.converter,Jp(e._query,t))}},{key:"_parse",value:function(e){var t=f_(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Y_(o,a);var s,c=[],l=Qt(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push($_(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=$_(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Y_(o,a),u=w_(n,"where",o,"in"===a||"not-in"===a);return mp.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(M_);var j_=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return Ut(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:yp.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=Qt(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;J_(r,a),r=Jp(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Fx(e.firestore,e.converter,Jp(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(L_);var V_=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return Ut(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new dp(t,n);return function(e,t){if(null===Wp(e)){var n=Hp(e);null!==n&&X_(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Fx(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new zp(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(M_);var B_=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return Ut(n,[{key:"_apply",value:function(e){return new Fx(e.firestore,e.converter,Xp(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(M_);var z_=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Ut(n,[{key:"_apply",value:function(e){var t=Q_(e,this.type,this._docOrFields,this._inclusive);return new Fx(e.firestore,e.converter,function(e,t){return new zp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(M_);function q_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return z_._create("startAt",t,!0)}function K_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return z_._create("startAfter",t,!1)}var G_=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Ut(n,[{key:"_apply",value:function(e){var t=Q_(e,this.type,this._docOrFields,this._inclusive);return new Fx(e.firestore,e.converter,function(e,t){return new zp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(M_);function W_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return G_._create("endBefore",t,!1)}function H_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return G_._create("endAt",t,!0)}function Q_(e,t,n,r){if(n[0]=Ma(n[0]),n[0]instanceof O_)return function(e,t,n,r,i){if(!r)throw new Hf(Wf.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Qt($p(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push($d(t,r.key));else{var c=r.data.field(s.field);if(Ld(c))throw new Hf(Wf.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new lp(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=f_(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Hf(Wf.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Qp(e)&&-1!==c.indexOf("/"))throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(fh.fromString(c));if(!ph.isDocumentKey(l))throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new ph(l);u.push($d(t,f))}else{var h=w_(n,r,c);u.push(h)}}return new lp(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function $_(e,t,n){if("string"==typeof(n=Ma(n))){if(""===n)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qp(t)&&-1!==n.indexOf("/"))throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(fh.fromString(n));if(!ph.isDocumentKey(r))throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return $d(e,new ph(r))}if(n instanceof Mx)return $d(e,n._key);throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Nx(n),"."))}function Y_(e,t){if(!Array.isArray(e)||0===e.length)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function J_(e,t){if(t.isInequality()){var n=Hp(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Wp(e);null!==i&&X_(e,r,i)}var a=function(e,t){var n,r=Qt(e);try{for(r.s();!(n=r.n()).done;){var i,a=Qt(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Hf(Wf.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Hf(Wf.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function X_(e,t,n){if(!n.isEqual(t))throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Z_=function(){function e(){Mt(this,e)}return Ut(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(zd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rd(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw qf()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return bd(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new i_(Rd(e.latitude),Rd(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Md(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fd(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Pd(e);return new sh(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=fh.fromString(e);Kf(ny(n));var r=new jd(n.get(1),n.get(3)),i=new ph(n.popFirst(5));return r.isEqual(t)||Vf("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function eE(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var tE=function(e){Vt(n,e);var t=Kt(n);function n(e){var r;return Mt(this,n),(r=t.call(this)).firestore=e,r}return Ut(n,[{key:"convertBytes",value:function(e){return new t_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mx(this.firestore,null,t)}}]),n}(Z_);var nE=function(){function e(t,n){Mt(this,e),this.hasPendingWrites=t,this.fromCache=n}return Ut(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),rE=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i,a,o,u){var s;return Mt(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Ut(n,[{key:"exists",value:function(){return fu(Bt(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new iE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(R_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(O_),iE=function(e){Vt(n,e);var t=Kt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fu(Bt(n.prototype),"data",this).call(this,e)}}]),n}(rE),aE=function(){function e(t,n,r,i){Mt(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new nE(i.hasPendingWrites,i.fromCache),this.query=r}return Ut(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new iE(n._firestore,n._userDataWriter,r.key,r,new nE(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Hf(Wf.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new iE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new nE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new iE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new nE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:oE(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function oE(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qf()}}function uE(e,t){return e instanceof rE&&t instanceof rE?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof aE&&t instanceof aE&&e._firestore===t._firestore&&zx(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var sE=function(e){Vt(n,e);var t=Kt(n);function n(e){var r;return Mt(this,n),(r=t.call(this)).firestore=e,r}return Ut(n,[{key:"convertBytes",value:function(e){return new t_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mx(this.firestore,null,t)}}]),n}(Z_);function cE(e){e=Ox(e,Mx);var t=Ox(e.firestore,Wx),n=Hx(t),r=new sE(t);return function(e,t){var n=new Qf;return e.asyncQueue.enqueueAndForget(fr(cr().mark((function r(){return cr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Gf(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Hf(Wf.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Nb(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,mx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new rE(t,r,e._key,n,new nE(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function lE(e){e=Ox(e,Fx);var t=Ox(e.firestore,Wx),n=Hx(t),r=new sE(t);return function(e,t){var n=new Qf;return e.asyncQueue.enqueueAndForget(fr(cr().mark((function r(){return cr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=fr(cr().mark((function e(t,n,r){var i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ok(t,n,!0);case 3:i=e.sent,a=new Yb(n,i.ir),o=a.sc(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Nb(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,mx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new aE(t,r,e,n)}))}function fE(e,t,n){e=Ox(e,Mx);var r=Ox(e.firestore,Wx),i=eE(e.converter,t,n);return vE(r,[h_(f_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Fv.none())])}function hE(e,t,n){e=Ox(e,Mx);for(var r=Ox(e.firestore,Wx),i=f_(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return vE(r,[("string"==typeof(t=Ma(t))||t instanceof n_?b_(i,"updateDoc",e._key,t,n,o):k_(i,"updateDoc",e._key,t)).toMutation(e._key,Fv.exists(!0))])}function dE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Ma(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Kx(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(Kx(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Mx)l=Ox(e.firestore,Wx),f=Kp(e._key.path),c={next:function(t){n[s]&&n[s](mE(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Ox(e,Fx);l=Ox(p.firestore,Wx),f=p._query;var v=new sE(l);c={next:function(e){n[s]&&n[s](new aE(l,v,p,e))},error:n[s+1],complete:n[s+2]},D_(e._query)}return function(e,t,n,r){var i=new tx(r),a=new qb(t,i,n);return e.asyncQueue.enqueueAndForget(fr(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Mb,t.next=3,bx(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(fr(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ub,t.next=3,bx(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Hx(l),f,h,c)}function pE(e,t){return function(e,t){var n=new tx(t);return e.asyncQueue.enqueueAndForget(fr(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Gf(e).ku.add(t),t.next()},t.next=3,bx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(fr(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Gf(e).ku.delete(t)},t.next=3,bx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Hx(e=Ox(e,Wx)),Kx(t)?t:{next:t})}function vE(e,t){return function(e,t){var n=new Qf;return e.asyncQueue.enqueueAndForget(fr(cr().mark((function r(){return cr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=ow,r.next=3,gx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Hx(e),t)}function mE(e,t,n){var r=n.docs.get(t._key),i=new sE(e);return new rE(e,i,t._key,r,new nE(n.hasPendingWrites,n.fromCache),t.converter)}var yE={maxAttempts:5},gE=function(){function e(t,n){Mt(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=f_(t)}return Ut(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=kE(e,this._firestore),i=eE(r.converter,t,n),a=h_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Fv.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=kE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ma(t))||t instanceof n_?b_(this._dataReader,"WriteBatch.update",i._key,t,n,o):k_(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Fv.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=kE(e,this._firestore);return this._mutations=this._mutations.concat(new Xv(t._key,Fv.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Hf(Wf.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function kE(e,t){if((e=Ma(e)).firestore!==t)throw new Hf(Wf.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var bE=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e,r))._firestore=e,i}return Ut(n,[{key:"get",value:function(e){var t=this,r=kE(e,this._firestore),i=new sE(this._firestore);return fu(Bt(n.prototype),"get",this).call(this,e).then((function(e){return new rE(t._firestore,i,r._key,e._document,new nE(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Mt(this,e),this._firestore=t,this._transaction=n,this._dataReader=f_(t)}return Ut(e,[{key:"get",value:function(e){var t=this,n=kE(e,this._firestore),r=new tE(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return qf();var i=e[0];if(i.isFoundDocument())return new O_(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new O_(t._firestore,r,n._key,null,n.converter);throw qf()}))}},{key:"set",value:function(e,t,n){var r=kE(e,this._firestore),i=eE(r.converter,t,n),a=h_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=kE(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ma(t))||t instanceof n_?b_(this._dataReader,"Transaction.update",i._key,t,n,o):k_(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=kE(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function wE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new m_("arrayUnion",t)}function xE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new y_("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Mf=e}(Po),So(new Fa("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new Wx(new Xf(e.getProvider("auth-internal")),new nh(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Hf(Wf.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jd(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Uo(Df,"3.13.0",e),Uo(Df,"3.13.0","esm2017")}();function _E(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Hf("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function EE(){if("undefined"===typeof Uint8Array)throw new Hf("unimplemented","Uint8Arrays are not available in this environment.")}function SE(){if("undefined"==typeof atob)throw new Hf("unimplemented","Blobs are unavailable in Firestore in this environment.")}var IE=function(){function e(t){Mt(this,e),this._delegate=t}return Ut(e,[{key:"toBase64",value:function(){return SE(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return EE(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return SE(),new e(t_.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return EE(),new e(t_.fromUint8Array(t))}}]),e}();function TE(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Qt(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var CE=function(){function e(){Mt(this,e)}return Ut(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){e_(e=Ox(e,Wx));var n=Hx(e);if(n._uninitializedComponentsProvider)throw new Hf(Wf.FAILED_PRECONDITION,"SDK cache is already specified.");Bf("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new Zw;return $x(n,i,new Jw(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){e_(e=Ox(e,Wx));var t=Hx(e);if(t._uninitializedComponentsProvider)throw new Hf(Wf.FAILED_PRECONDITION,"SDK cache is already specified.");Bf("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new Zw;return $x(t,r,new Xw(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Hf(Wf.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Qf;return e._queue.enqueueAndForgetEvenWhileRestricted(fr(cr().mark((function n(){return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nh.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Nh.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Gg(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),AE=function(){function e(t,n,r){var i=this;Mt(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof jd||(this._appCompat=t)}return Ut(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Bf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Lx(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Yx(this._delegate)}},{key:"disableNetwork",value:function(){return Jx(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Tx("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Qf;return e.asyncQueue.enqueueAndForget(fr(cr().mark((function n(){return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=yw,n.next=3,gx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Hx(e=Ox(e,Wx)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return pE(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Hf("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new qE(this,jx(this._delegate,e))}catch(t){throw LE(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new DE(this,Vx(this._delegate,e))}catch(t){throw LE(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new VE(this,function(e,t){if(e=Ox(e,Dx),Ix("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Fx(e,null,function(e){return new zp(fh.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw LE(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=Ox(e,Wx);var r=Object.assign(Object.assign({},yE),n);return function(e){if(e.maxAttempts<1)throw new Hf(Wf.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Qf;return e.asyncQueue.enqueueAndForget(fr(cr().mark((function i(){var a;return cr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,kx(e);case 2:a=i.sent,new ix(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Hx(e),(function(n){return t(new bE(e,n))}),r)}(this._delegate,(function(n){return e(new OE(t,n))}))}},{key:"batch",value:function(){var e=this;return Hx(this._delegate),new PE(new gE(this._delegate,(function(t){return vE(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Xx(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Zx(this._delegate,e).then((function(e){return e?new VE(t,e):null}))}}]),e}(),NE=function(e){Vt(n,e);var t=Kt(n);function n(e){var r;return Mt(this,n),(r=t.call(this)).firestore=e,r}return Ut(n,[{key:"convertBytes",value:function(e){return new IE(new t_(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return DE.forKey(t,this.firestore,null)}}]),n}(Z_);var OE=function(){function e(t,n){Mt(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new NE(t)}return Ut(e,[{key:"get",value:function(e){var t=this,n=KE(e);return this._delegate.get(n).then((function(e){return new UE(t._firestore,new rE(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=KE(e);return n?(_E("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=KE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=KE(e);return this._delegate.delete(t),this}}]),e}(),PE=function(){function e(t){Mt(this,e),this._delegate=t}return Ut(e,[{key:"set",value:function(e,t,n){var r=KE(e);return n?(_E("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=KE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=KE(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),RE=function(){function e(t,n,r){Mt(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Ut(e,[{key:"fromFirestore",value:function(e,t){var n=new iE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jE(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new NE(t),n),i.set(n,a)),a}}]),e}();RE.INSTANCES=new WeakMap;var DE=function(){function e(t,n){Mt(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new NE(t)}return Ut(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new qE(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new qE(this.firestore,jx(this._delegate,e))}catch(t){throw LE(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Ma(e))instanceof Mx&&Bx(this._delegate,e)}},{key:"set",value:function(e,t){t=_E("DocumentReference.set",t);try{return t?fE(this._delegate,e,t):fE(this._delegate,e)}catch(n){throw LE(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?hE(this._delegate,e):hE.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw LE(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return vE(Ox(e.firestore,Wx),[new Xv(e._key,Fv.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ME(n),a=FE(n,(function(t){return new UE(e.firestore,new rE(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return dE(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?cE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ox(e,Mx);var t=Ox(e.firestore,Wx);return xx(Hx(t),e._key,{source:"server"}).then((function(n){return mE(t,e,n)}))}(this._delegate):function(e){e=Ox(e,Mx);var t=Ox(e.firestore,Wx);return xx(Hx(t),e._key).then((function(n){return mE(t,e,n)}))}(this._delegate),t.then((function(e){return new UE(n.firestore,new rE(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(RE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Hf("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Mx(n._delegate,r,new ph(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Mx(n._delegate,r,t))}}]),e}();function LE(e,t,n){return e.message=e.message.replace(t,n),e}function ME(e){var t,n=Qt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!TE(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function FE(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=TE(e[0])?e[0]:TE(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var UE=function(){function e(t,n){Mt(this,e),this._firestore=t,this._delegate=n}return Ut(e,[{key:"ref",get:function(){return new DE(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return uE(this._delegate,e._delegate)}}]),e}(),jE=function(e){Vt(n,e);var t=Kt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||qf()}(void 0!==t),t}}]),n}(UE),VE=function(){function e(t,n){Mt(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new NE(t)}return Ut(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,F_(this._delegate,function(e,t,n){var r=t,i=R_("where",e);return U_._create(i,r,n)}(t,n,r)))}catch(i){throw LE(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,F_(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=R_("orderBy",e);return V_._create(n,t)}(t,n)))}catch(r){throw LE(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,F_(this._delegate,function(e){return Px("limit",e),B_._create("limit",e,"F")}(t)))}catch(n){throw LE(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,F_(this._delegate,function(e){return Px("limitToLast",e),B_._create("limitToLast",e,"L")}(t)))}catch(n){throw LE(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,F_(this._delegate,q_.apply(void 0,arguments)))}catch(t){throw LE(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,F_(this._delegate,K_.apply(void 0,arguments)))}catch(t){throw LE(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,F_(this._delegate,W_.apply(void 0,arguments)))}catch(t){throw LE(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,F_(this._delegate,H_.apply(void 0,arguments)))}catch(t){throw LE(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return zx(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?lE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ox(e,Fx);var t=Ox(e.firestore,Wx),n=Hx(t),r=new sE(t);return _x(n,e._query,{source:"server"}).then((function(n){return new aE(t,r,e,n)}))}(this._delegate):function(e){e=Ox(e,Fx);var t=Ox(e.firestore,Wx),n=Hx(t),r=new sE(t);return D_(e._query),_x(n,e._query).then((function(n){return new aE(t,r,e,n)}))}(this._delegate),t.then((function(e){return new zE(n.firestore,new aE(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ME(n),a=FE(n,(function(t){return new zE(e.firestore,new aE(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return dE(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(RE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),BE=function(){function e(t,n){Mt(this,e),this._firestore=t,this._delegate=n}return Ut(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new jE(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),zE=function(){function e(t,n){Mt(this,e),this._firestore=t,this._delegate=n}return Ut(e,[{key:"query",get:function(){return new VE(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new jE(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new BE(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new jE(n._firestore,r))}))}},{key:"isEqual",value:function(e){return uE(this._delegate,e._delegate)}}]),e}(),qE=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Ut(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new DE(this.firestore,e):null}},{key:"doc",value:function(e){try{return new DE(this.firestore,void 0===e?Vx(this._delegate):Vx(this._delegate,e))}catch(t){throw LE(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Ox(e.firestore,Wx),r=Vx(e),i=eE(e.converter,t);return vE(n,[h_(f_(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Fv.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new DE(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Bx(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(RE.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(VE);function KE(e){return Ox(e,Mx)}var GE=function(){function e(){Mt(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Gt(n_,n)}return Ut(e,[{key:"isEqual",value:function(e){return(e=Ma(e))instanceof n_&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(dh.keyField().canonicalString())}}]),e}(),WE=function(){function e(t){Mt(this,e),this._delegate=t}return Ut(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new v_("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new d_("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=wE.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=xE.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new g_("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),HE={Firestore:AE,GeoPoint:i_,Timestamp:sh,Blob:IE,Transaction:OE,WriteBatch:PE,DocumentReference:DE,DocumentSnapshot:UE,Query:VE,QueryDocumentSnapshot:jE,QuerySnapshot:zE,CollectionReference:qE,FieldPath:GE,FieldValue:WE,setLogLevel:function(e){!function(e){Ff.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Fa("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},HE)))}(e,(function(e,t){return new AE(e,t,new CE)})),e.registerVersion("@firebase/firestore-compat","0.3.12")}(lu);function QE(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var $E,YE={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},JE="EMAIL_SIGNIN",XE="PASSWORD_RESET",ZE="RECOVER_EMAIL",eS="REVERT_SECOND_FACTOR_ADDITION",tS="VERIFY_AND_CHANGE_EMAIL",nS="VERIFY_EMAIL";function rS(){return h({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var iS=function(){var e;return h(e={},"admin-restricted-operation","This operation is restricted to administrators only."),h(e,"argument-error",""),h(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),h(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),h(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),h(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),h(e,"cordova-not-ready","Cordova framework is not ready."),h(e,"cors-unsupported","This browser is not supported."),h(e,"credential-already-in-use","This credential is already associated with a different user account."),h(e,"custom-token-mismatch","The custom token corresponds to a different audience."),h(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),h(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),h(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),h(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),h(e,"email-already-in-use","The email address is already in use by another account."),h(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),h(e,"expired-action-code","The action code has expired."),h(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),h(e,"internal-error","An internal AuthError has occurred."),h(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),h(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),h(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),h(e,"invalid-auth-event","An internal AuthError has occurred."),h(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),h(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),h(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),h(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),h(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),h(e,"invalid-email","The email address is badly formatted."),h(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),h(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),h(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),h(e,"invalid-credential","The supplied auth credential is malformed or has expired."),h(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),h(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),h(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),h(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),h(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),h(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),h(e,"wrong-password","The password is invalid or the user does not have a password."),h(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),h(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),h(e,"invalid-provider-id","The specified provider ID is invalid."),h(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),h(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),h(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),h(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),h(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),h(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),h(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),h(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),h(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),h(e,"missing-continue-uri","A continue URL must be provided in the request."),h(e,"missing-iframe-start","An internal AuthError has occurred."),h(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),h(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),h(e,"missing-password","A non-empty password must be provided"),h(e,"missing-multi-factor-info","No second factor identifier is provided."),h(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),h(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),h(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),h(e,"app-deleted","This instance of FirebaseApp has been deleted."),h(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),h(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),h(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),h(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),h(e,"no-auth-event","An internal AuthError has occurred."),h(e,"no-such-provider","User was not linked to an account with the given provider."),h(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),h(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),h(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),h(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),h(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),h(e,"provider-already-linked","User can only be linked to one identity for the given provider."),h(e,"quota-exceeded","The project's quota for this operation has been exceeded."),h(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),h(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),h(e,"rejected-credential","The request contains malformed or mismatching credentials."),h(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),h(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),h(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),h(e,"timeout","The operation has timed out."),h(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),h(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),h(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),h(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),h(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),h(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),h(e,"unverified-email","The operation requires a verified email."),h(e,"user-cancelled","The user did not grant your application the permissions it requested."),h(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),h(e,"user-disabled","The user account has been disabled by an administrator."),h(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),h(e,"user-signed-out",""),h(e,"weak-password","The password must be 6 characters long or more."),h(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),h(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),h(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),h(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),h(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),h(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),h(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),h(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),h(e,"invalid-req-type","Invalid request parameters."),h(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},aS=rS,oS=new Ea("auth","Firebase",rS()),uS=new Qa("@firebase/auth");function sS(e){if(uS.logLevel<=Ba.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];uS.warn.apply(uS,["Auth (".concat(Po,"): ").concat(e)].concat(n))}}function cS(e){if(uS.logLevel<=Ba.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];uS.error.apply(uS,["Auth (".concat(Po,"): ").concat(e)].concat(n))}}function lS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw pS.apply(void 0,[e].concat(n))}function fS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return pS.apply(void 0,[e].concat(n))}function hS(e,t,n){var r=Object.assign(Object.assign({},aS()),h({},t,n));return new Ea("auth","Firebase",r).create(t,{appName:e.name})}function dS(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&lS(e,"argument-error"),hS(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function pS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Lt(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Lt(o)))}return oS.create.apply(oS,[e].concat(n))}function vS(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw pS.apply(void 0,[t].concat(r))}}function mS(e){var t="INTERNAL ASSERTION FAILED: "+e;throw cS(t),new Error(t)}function yS(e,t){e||mS(t)}function gS(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function kS(){return"http:"===bS()||"https:"===bS()}function bS(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var wS=function(){function e(t,n){Mt(this,e),this.shortDelay=t,this.longDelay=n,yS(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ya())||ba()}return Ut(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(kS()||ka()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function xS(e,t){yS(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var _S=function(){function e(){Mt(this,e)}return Ut(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void mS("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void mS("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void mS("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),ES=(h($E={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),h($E,"MISSING_CUSTOM_TOKEN","internal-error"),h($E,"INVALID_IDENTIFIER","invalid-email"),h($E,"MISSING_CONTINUE_URI","internal-error"),h($E,"INVALID_PASSWORD","wrong-password"),h($E,"MISSING_PASSWORD","missing-password"),h($E,"EMAIL_EXISTS","email-already-in-use"),h($E,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),h($E,"INVALID_IDP_RESPONSE","invalid-credential"),h($E,"INVALID_PENDING_TOKEN","invalid-credential"),h($E,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),h($E,"MISSING_REQ_TYPE","internal-error"),h($E,"EMAIL_NOT_FOUND","user-not-found"),h($E,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),h($E,"EXPIRED_OOB_CODE","expired-action-code"),h($E,"INVALID_OOB_CODE","invalid-action-code"),h($E,"MISSING_OOB_CODE","internal-error"),h($E,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),h($E,"INVALID_ID_TOKEN","invalid-user-token"),h($E,"TOKEN_EXPIRED","user-token-expired"),h($E,"USER_NOT_FOUND","user-token-expired"),h($E,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),h($E,"INVALID_CODE","invalid-verification-code"),h($E,"INVALID_SESSION_INFO","invalid-verification-id"),h($E,"INVALID_TEMPORARY_PROOF","invalid-credential"),h($E,"MISSING_SESSION_INFO","missing-verification-id"),h($E,"SESSION_EXPIRED","code-expired"),h($E,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),h($E,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),h($E,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),h($E,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),h($E,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),h($E,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),h($E,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),h($E,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),h($E,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),h($E,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),h($E,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),h($E,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),h($E,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),h($E,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),h($E,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),h($E,"MISSING_CLIENT_TYPE","missing-client-type"),h($E,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),h($E,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),h($E,"INVALID_REQ_TYPE","invalid-req-type"),$E),SS=new wS(3e4,6e4);function IS(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function TS(e,t,n,r){return CS.apply(this,arguments)}function CS(){return CS=fr(cr().mark((function e(t,n,r,i){var a,o=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",AS(t,a,fr(cr().mark((function e(){var a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Na(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",_S.fetch()(RS(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),CS.apply(this,arguments)}function AS(e,t,n){return NS.apply(this,arguments)}function NS(){return NS=fr(cr().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},ES),n),e.prev=2,a=new DS(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw LS(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=Rt(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw LS(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw LS(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw LS(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw hS(t,d,h);case 34:lS(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof _a)){e.next=41;break}throw e.t0;case 41:lS(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),NS.apply(this,arguments)}function OS(e,t,n,r){return PS.apply(this,arguments)}function PS(){return PS=fr(cr().mark((function e(t,n,r,i){var a,o,u=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,TS(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&lS(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),PS.apply(this,arguments)}function RS(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?xS(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var DS=function(){function e(t){var n=this;Mt(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(fS(n.auth,"network-request-failed"))}),SS.get())}))}return Ut(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function LS(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=fS(e,t,r);return i.customData._tokenResponse=n,i}function MS(e,t){return FS.apply(this,arguments)}function FS(){return FS=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TS(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),FS.apply(this,arguments)}function US(e,t){return jS.apply(this,arguments)}function jS(){return jS=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TS(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),jS.apply(this,arguments)}function VS(e,t){return BS.apply(this,arguments)}function BS(){return BS=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TS(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),BS.apply(this,arguments)}function zS(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function qS(){return qS=fr(cr().mark((function e(t){var n,r,i,a,o,u,s=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Ma(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,vS((a=GS(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:zS(KS(a.auth_time)),issuedAtTime:zS(KS(a.iat)),expirationTime:zS(KS(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),qS.apply(this,arguments)}function KS(e){return 1e3*Number(e)}function GS(e){var t=Rt(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return cS("JWT malformed, contained fewer than 3 sections"),null;try{var a=fa(r);return a?JSON.parse(a):(cS("Failed to decode base64 JWT payload"),null)}catch(o){return cS("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function WS(e,t){return HS.apply(this,arguments)}function HS(){return HS=fr(cr().mark((function e(t,n){var r=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof _a&&QS(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),HS.apply(this,arguments)}function QS(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var $S=function(){function e(t){Mt(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Ut(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(fr(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),YS=function(){function e(t,n){Mt(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Ut(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=zS(this.lastLoginAt),this.creationTime=zS(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function JS(e){return XS.apply(this,arguments)}function XS(){return XS=fr(cr().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,WS(t,VS(r,{idToken:i}));case 6:vS(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=QE(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=eI(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new YS(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),XS.apply(this,arguments)}function ZS(){return(ZS=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ma(t),e.next=3,JS(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eI(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Lt(n),Lt(t))}function tI(e,t){return nI.apply(this,arguments)}function nI(){return nI=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,AS(t,{},fr(cr().mark((function e(){var r,i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Na({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=RS(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",_S.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),nI.apply(this,arguments)}var rI=function(){function e(){Mt(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Ut(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){vS(e.idToken,"internal-error"),vS("undefined"!==typeof e.idToken,"internal-error"),vS("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=GS(e);return vS(t,"internal-error"),vS("undefined"!==typeof t.exp,"internal-error"),vS("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=fr(cr().mark((function e(t){var n,r=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],vS(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=fr(cr().mark((function e(t,n){var r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tI(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return mS("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(vS("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(vS("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(vS("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function iI(e,t){vS("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var aI=function(){function e(t){Mt(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=QE(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $S(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Lt(a.providerData):[],this.metadata=new YS(a.createdAt||void 0,a.lastLoginAt||void 0)}return Ut(e,[{key:"getIdToken",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WS(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(vS(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return qS.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ZS.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(vS(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){vS(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=fr(cr().mark((function e(t){var n,r,i=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,JS(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,WS(this,MS(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;vS(k&&_,t,"internal-error");var E=rI.fromJSON(this.name,_);vS("string"===typeof k,t,"internal-error"),iI(f,t.name),iI(h,t.name),vS("boolean"===typeof b,t,"internal-error"),vS("boolean"===typeof w,t,"internal-error"),iI(d,t.name),iI(p,t.name),iI(v,t.name),iI(m,t.name),iI(y,t.name),iI(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(S.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=fr(cr().mark((function t(n,r){var i,a,o,u=arguments;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new rI).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,JS(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),oI=new Map;function uI(e){yS(e instanceof Function,"Expected a class definition");var t=oI.get(e);return t?(yS(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,oI.set(e,t),t)}var sI=function(){function e(){Mt(this,e),this.type="NONE",this.storage={}}return Ut(e,[{key:"_isAvailable",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();sI.type="NONE";var cI=sI;function lI(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var fI=function(){function e(t,n,r){Mt(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=lI(this.userKey,a.apiKey,o),this.fullPersistenceKey=lI("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Ut(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?aI._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=fr(cr().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(uI(cI),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||uI(cI),u=lI(i,n.config.apiKey,n.name),s=null,c=Qt(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=aI._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function hI(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(mI(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(dI(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(gI(t))return"Blackberry";if(kI(t))return"Webos";if(pI(t))return"Safari";if((t.includes("chrome/")||vI(t))&&!t.includes("edge/"))return"Chrome";if(yI(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function dI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya();return/firefox\//i.test(e)}function pI(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya();return/crios\//i.test(e)}function mI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya();return/iemobile/i.test(e)}function yI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya();return/android/i.test(e)}function gI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya();return/blackberry/i.test(e)}function kI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya();return/webos/i.test(e)}function bI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function wI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya();return bI(e)||yI(e)||kI(e)||gI(e)||/windows phone/i.test(e)||mI(e)}function xI(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=hI(ya());break;case"Worker":t="".concat(hI(ya()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Po,"/").concat(r)}function _I(e){return EI.apply(this,arguments)}function EI(){return EI=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TS(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),EI.apply(this,arguments)}function SI(e,t){return II.apply(this,arguments)}function II(){return II=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TS(t,"GET","/v2/recaptchaConfig",IS(t,n)));case 1:case"end":return e.stop()}}),e)}))),II.apply(this,arguments)}function TI(e){return void 0!==e&&void 0!==e.getResponse}function CI(e){return void 0!==e&&void 0!==e.enterprise}var AI=Ut((function e(t){if(Mt(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function NI(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=fS("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function OI(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var PI=function(){function e(t){Mt(this,e),this.type="recaptcha-enterprise",this.auth=FI(t)}return Ut(e,[{key:"verify",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;CI(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=fr(cr().mark((function e(n,r){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:SI(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new AI(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&CI(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));NI("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function RI(e,t,n){return DI.apply(this,arguments)}function DI(){return DI=fr(cr().mark((function e(t,n,r){var i,a,o,u,s=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new PI(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),DI.apply(this,arguments)}var LI=function(){function e(t){Mt(this,e),this.auth=t,this.queue=[]}return Ut(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=fr(cr().mark((function e(t){var n,r,i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=Qt(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=Qt(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch($){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),MI=function(){function e(t,n,r,i){Mt(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new UI(this),this.idTokenSubscription=new UI(this),this.beforeStateQueue=new LI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return Ut(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=uI(t)),this._initializationPromise=this.queue(fr(cr().mark((function r(){var i,a;return cr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,fI.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=fr(cr().mark((function e(t){var n,r,i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return vS(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,JS(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Ma(t):null)&&vS(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=fr(cr().mark((function e(t){var n,r=this,i=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&vS(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(fr(cr().mark((function n(){return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(uI(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=fr(cr().mark((function e(){var t,n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SI(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new AI(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new PI(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Ea("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return vS(n=t&&uI(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,fI.create(this,[uI(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=fr(cr().mark((function e(t){var n=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return vS(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return vS(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xI(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=fr(cr().mark((function e(){var t,n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&sS("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function FI(e){return Ma(e)}var UI=function(){function e(t){var n=this;Mt(this,e),this.auth=t,this.observer=null,this.addObserver=Ra((function(e){return n.observer=e}))}return Ut(e,[{key:"next",get:function(){return vS(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function jI(e,t,n){var r=FI(e);vS(r._canInitEmulator,r,"emulator-config-failed"),vS(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=VI(t),o=function(e){var t=VI(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:BI(r.substr(a.length+1))}}var o=Rt(r.split(":"),2);return{host:o[0],port:BI(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function VI(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function BI(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var zI=function(){function e(t,n){Mt(this,e),this.providerId=t,this.signInMethod=n}return Ut(e,[{key:"toJSON",value:function(){return mS("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return mS("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return mS("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return mS("not implemented")}}]),e}();function qI(e,t){return KI.apply(this,arguments)}function KI(){return KI=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TS(t,"POST","/v1/accounts:resetPassword",IS(t,n)));case 1:case"end":return e.stop()}}),e)}))),KI.apply(this,arguments)}function GI(e,t){return WI.apply(this,arguments)}function WI(){return WI=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TS(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),WI.apply(this,arguments)}function HI(e,t){return QI.apply(this,arguments)}function QI(){return QI=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TS(t,"POST","/v1/accounts:update",IS(t,n)));case 1:case"end":return e.stop()}}),e)}))),QI.apply(this,arguments)}function $I(e,t){return YI.apply(this,arguments)}function YI(){return YI=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",OS(t,"POST","/v1/accounts:signInWithPassword",IS(t,n)));case 1:case"end":return e.stop()}}),e)}))),YI.apply(this,arguments)}function JI(e,t){return XI.apply(this,arguments)}function XI(){return XI=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TS(t,"POST","/v1/accounts:sendOobCode",IS(t,n)));case 1:case"end":return e.stop()}}),e)}))),XI.apply(this,arguments)}function ZI(e,t){return eT.apply(this,arguments)}function eT(){return eT=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JI(t,n));case 1:case"end":return e.stop()}}),e)}))),eT.apply(this,arguments)}function tT(e,t){return nT.apply(this,arguments)}function nT(){return nT=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JI(t,n));case 1:case"end":return e.stop()}}),e)}))),nT.apply(this,arguments)}function rT(e,t){return iT.apply(this,arguments)}function iT(){return iT=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JI(t,n));case 1:case"end":return e.stop()}}),e)}))),iT.apply(this,arguments)}function aT(e,t){return oT.apply(this,arguments)}function oT(){return oT=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JI(t,n));case 1:case"end":return e.stop()}}),e)}))),oT.apply(this,arguments)}function uT(e,t){return sT.apply(this,arguments)}function sT(){return sT=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",OS(t,"POST","/v1/accounts:signInWithEmailLink",IS(t,n)));case 1:case"end":return e.stop()}}),e)}))),sT.apply(this,arguments)}function cT(e,t){return lT.apply(this,arguments)}function lT(){return lT=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",OS(t,"POST","/v1/accounts:signInWithEmailLink",IS(t,n)));case 1:case"end":return e.stop()}}),e)}))),lT.apply(this,arguments)}var fT=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Mt(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Ut(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=fr(cr().mark((function e(t){var n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,RI(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",$I(t,i));case 11:return e.abrupt("return",$I(t,r).catch(function(){var e=fr(cr().mark((function e(n){var i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,RI(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",$I(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",uT(t,{email:this._email,oobCode:this._password}));case 13:lS(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",GI(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",cT(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:lS(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(zI);function hT(e,t){return dT.apply(this,arguments)}function dT(){return dT=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",OS(t,"POST","/v1/accounts:signInWithIdp",IS(t,n)));case 1:case"end":return e.stop()}}),e)}))),dT.apply(this,arguments)}var pT=function(e){Vt(n,e);var t=Kt(n);function n(){var e;return Mt(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Ut(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return hT(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,hT(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,hT(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Na(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):lS("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=QE(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(zI);function vT(e,t){return mT.apply(this,arguments)}function mT(){return mT=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TS(t,"POST","/v1/accounts:sendVerificationCode",IS(t,n)));case 1:case"end":return e.stop()}}),e)}))),mT.apply(this,arguments)}function yT(){return yT=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",OS(t,"POST","/v1/accounts:signInWithPhoneNumber",IS(t,n)));case 1:case"end":return e.stop()}}),e)}))),yT.apply(this,arguments)}function gT(){return gT=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,OS(t,"POST","/v1/accounts:signInWithPhoneNumber",IS(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw LS(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),gT.apply(this,arguments)}var kT=h({},"USER_NOT_FOUND","user-not-found");function bT(){return bT=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",OS(t,"POST","/v1/accounts:signInWithPhoneNumber",IS(t,r),kT));case 2:case"end":return e.stop()}}),e)}))),bT.apply(this,arguments)}var wT=function(e){Vt(n,e);var t=Kt(n);function n(e){var r;return Mt(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Ut(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return yT.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return gT.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return bT.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(zI);var xT=function(){function e(t){var n,r,i,a,o,u;Mt(this,e);var s=Oa(Pa(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);vS(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Ut(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Oa(Pa(e)).link,n=t?Oa(Pa(t)).deep_link_id:null,r=Oa(Pa(e)).deep_link_id;return(r?Oa(Pa(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Bw){return null}}}]),e}();var _T=function(){function e(){Mt(this,e),this.providerId=e.PROVIDER_ID}return Ut(e,null,[{key:"credential",value:function(e,t){return fT._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=xT.parseLink(t);return vS(n,"argument-error"),fT._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();_T.PROVIDER_ID="password",_T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_T.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ET=function(){function e(t){Mt(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Ut(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ST=function(e){Vt(n,e);var t=Kt(n);function n(){var e;return Mt(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Ut(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Lt(this.scopes)}}]),n}(ET),IT=function(e){Vt(n,e);var t=Kt(n);function n(){return Mt(this,n),t.apply(this,arguments)}return Ut(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return vS(e.idToken||e.accessToken,"argument-error"),pT._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return vS("providerId"in t&&"signInMethod"in t,"argument-error"),pT._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(ST),TT=function(e){Vt(n,e);var t=Kt(n);function n(){return Mt(this,n),t.call(this,"facebook.com")}return Ut(n,null,[{key:"credential",value:function(e){return pT._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Bw){return null}}}]),n}(ST);TT.FACEBOOK_SIGN_IN_METHOD="facebook.com",TT.PROVIDER_ID="facebook.com";var CT=function(e){Vt(n,e);var t=Kt(n);function n(){var e;return Mt(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Ut(n,null,[{key:"credential",value:function(e,t){return pT._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Bw){return null}}}]),n}(ST);CT.GOOGLE_SIGN_IN_METHOD="google.com",CT.PROVIDER_ID="google.com";var AT=function(e){Vt(n,e);var t=Kt(n);function n(){return Mt(this,n),t.call(this,"github.com")}return Ut(n,null,[{key:"credential",value:function(e){return pT._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Bw){return null}}}]),n}(ST);AT.GITHUB_SIGN_IN_METHOD="github.com",AT.PROVIDER_ID="github.com";var NT=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i;return Mt(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Ut(n,[{key:"_getIdTokenResponse",value:function(e){return hT(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,hT(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,hT(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(zI),OT=function(e){Vt(n,e);var t=Kt(n);function n(e){return Mt(this,n),vS(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Ut(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=NT.fromJSON(e);return vS(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return NT._create(r,n)}catch(i){return null}}}]),n}(ET),PT=function(e){Vt(n,e);var t=Kt(n);function n(){return Mt(this,n),t.call(this,"twitter.com")}return Ut(n,null,[{key:"credential",value:function(e,t){return pT._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Bw){return null}}}]),n}(ST);function RT(e,t){return DT.apply(this,arguments)}function DT(){return DT=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",OS(t,"POST","/v1/accounts:signUp",IS(t,n)));case 1:case"end":return e.stop()}}),e)}))),DT.apply(this,arguments)}PT.TWITTER_SIGN_IN_METHOD="twitter.com",PT.PROVIDER_ID="twitter.com";var LT=function(){function e(t){Mt(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Ut(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=fr(cr().mark((function t(n,r,i){var a,o,u,s,c=arguments;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,aI._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=MT(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=fr(cr().mark((function t(n,r,i){var a;return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=MT(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function MT(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function FT(){return FT=fr(cr().mark((function e(t){var n,r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=FI(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new LT({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,RT(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,LT._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),FT.apply(this,arguments)}var UT=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i,a){var o,u;return Mt(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(qt(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Ut(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(_a);function jT(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw UT._fromErrorAndOperation(e,n,t,r);throw n}))}function VT(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function BT(e,t){return zT.apply(this,arguments)}function zT(){return zT=fr(cr().mark((function e(t,n){var r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ma(t),e.next=3,GT(!0,r,n);case 3:return e.t0=US,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=VT(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),zT.apply(this,arguments)}function qT(e,t){return KT.apply(this,arguments)}function KT(){return KT=fr(cr().mark((function e(t,n){var r,i,a=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=WS,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",LT._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),KT.apply(this,arguments)}function GT(e,t,n){return WT.apply(this,arguments)}function WT(){return(WT=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JS(n);case 2:i=VT(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",vS(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HT(e,t){return QT.apply(this,arguments)}function QT(){return QT=fr(cr().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,WS(t,jT(i,a,n,t),r);case 6:return vS((o=e.sent).idToken,i,"internal-error"),vS(u=GS(o.idToken),i,"internal-error"),s=u.sub,vS(t.uid===s,i,"user-mismatch"),e.abrupt("return",LT._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&lS(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),QT.apply(this,arguments)}function $T(e,t){return YT.apply(this,arguments)}function YT(){return YT=fr(cr().mark((function e(t,n){var r,i,a,o,u=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,jT(t,i,n);case 4:return a=e.sent,e.next=7,LT._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),YT.apply(this,arguments)}function JT(e,t){return XT.apply(this,arguments)}function XT(){return XT=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$T(FI(t),n));case 1:case"end":return e.stop()}}),e)}))),XT.apply(this,arguments)}function ZT(e,t){return eC.apply(this,arguments)}function eC(){return(eC=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ma(t),e.next=3,GT(!1,r,n.providerId);case 3:return e.abrupt("return",qT(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tC(e,t){return nC.apply(this,arguments)}function nC(){return(nC=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HT(Ma(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rC(e,t){return iC.apply(this,arguments)}function iC(){return iC=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",OS(t,"POST","/v1/accounts:signInWithCustomToken",IS(t,n)));case 1:case"end":return e.stop()}}),e)}))),iC.apply(this,arguments)}function aC(){return aC=fr(cr().mark((function e(t,n){var r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=FI(t),e.next=3,rC(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,LT._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),aC.apply(this,arguments)}var oC=function(){function e(t,n){Mt(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Ut(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?uC._fromServerResponse(e,t):"totpInfo"in t?sC._fromServerResponse(e,t):lS(e,"internal-error")}}]),e}(),uC=function(e){Vt(n,e);var t=Kt(n);function n(e){var r;return Mt(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Ut(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(oC),sC=function(e){Vt(n,e);var t=Kt(n);function n(e){return Mt(this,n),t.call(this,"totp",e)}return Ut(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(oC);function cC(e,t,n){var r;vS((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),vS("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(vS(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(vS(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function lC(){return lC=fr(cr().mark((function e(t,n,r){var i,a,o,u;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=FI(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,RI(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&cC(a,u,r),e.next=9,tT(a,u);case 9:e.next=14;break;case 11:return r&&cC(a,o,r),e.next=14,tT(a,o).catch(function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,RI(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&cC(a,n,r),e.next=8,tT(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),lC.apply(this,arguments)}function fC(){return fC=fr(cr().mark((function e(t,n,r){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qI(Ma(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),fC.apply(this,arguments)}function hC(){return hC=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,HI(Ma(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),hC.apply(this,arguments)}function dC(e,t){return pC.apply(this,arguments)}function pC(){return pC=fr(cr().mark((function e(t,n){var r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ma(t),e.next=3,qI(r,{oobCode:n});case 3:i=e.sent,vS(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return vS(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:vS(i.mfaInfo,r,"internal-error");case 13:vS(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=oC._fromServerResponse(FI(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),pC.apply(this,arguments)}function vC(){return vC=fr(cr().mark((function e(t,n){var r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dC(Ma(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),vC.apply(this,arguments)}function mC(e,t,n){return yC.apply(this,arguments)}function yC(){return yC=fr(cr().mark((function e(t,n,r){var i,a,o,u,s,c,l;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=FI(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,RI(a,o,"signUpPassword");case 5:s=e.sent,u=RT(a,s),e.next=10;break;case 9:u=RT(a,o).catch(function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,RI(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",RT(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,LT._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),yC.apply(this,arguments)}function gC(){return gC=fr(cr().mark((function e(t,n,r){var i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){vS(t.handleCodeInApp,a,"argument-error"),t&&cC(a,e,t)},a=FI(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,RI(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,rT(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,rT(a,o).catch(function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,RI(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,rT(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),gC.apply(this,arguments)}function kC(){return kC=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ma(t),vS((a=_T.credentialWithLink(n,r||gS()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",JT(i,a));case 4:case"end":return e.stop()}}),e)}))),kC.apply(this,arguments)}function bC(e,t){return wC.apply(this,arguments)}function wC(){return wC=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TS(t,"POST","/v1/accounts:createAuthUri",IS(t,n)));case 1:case"end":return e.stop()}}),e)}))),wC.apply(this,arguments)}function xC(){return xC=fr(cr().mark((function e(t,n){var r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kS()?gS():"http://localhost",i={identifier:n,continueUri:r},e.next=4,bC(Ma(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),xC.apply(this,arguments)}function _C(){return _C=fr(cr().mark((function e(t,n){var r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ma(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&cC(r.auth,a,n),e.next=8,ZI(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)}))),_C.apply(this,arguments)}function EC(){return EC=fr(cr().mark((function e(t,n,r){var i,a,o,u;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ma(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&cC(i.auth,o,r),e.next=8,aT(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)}))),EC.apply(this,arguments)}function SC(e,t){return IC.apply(this,arguments)}function IC(){return IC=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TS(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),IC.apply(this,arguments)}function TC(){return(TC=fr(cr().mark((function e(t,n){var r,i,a,o,u,s,c;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Ma(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,WS(a,SC(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CC(e,t,n){return AC.apply(this,arguments)}function AC(){return AC=fr(cr().mark((function e(t,n,r){var i,a,o,u;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,WS(t,GI(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),AC.apply(this,arguments)}var NC=Ut((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Mt(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),OC=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i,a){var o;return Mt(this,n),(o=t.call(this,e,r,i)).username=a,o}return Ut(n)}(NC),PC=function(e){Vt(n,e);var t=Kt(n);function n(e,r){return Mt(this,n),t.call(this,e,"facebook.com",r)}return Ut(n)}(NC),RC=function(e){Vt(n,e);var t=Kt(n);function n(e,r){return Mt(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Ut(n)}(OC),DC=function(e){Vt(n,e);var t=Kt(n);function n(e,r){return Mt(this,n),t.call(this,e,"google.com",r)}return Ut(n)}(NC),LC=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i){return Mt(this,n),t.call(this,e,"twitter.com",r,i)}return Ut(n)}(OC);function MC(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=GS(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new NC(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new PC(a,i);case"github.com":return new RC(a,i);case"google.com":return new DC(a,i);case"twitter.com":return new LC(a,i,e.screenName||null);case"custom":case"anonymous":return new NC(a,null);default:return new NC(a,r,i)}}(n)}var FC=function(){function e(t,n,r){Mt(this,e),this.type=t,this.credential=n,this.auth=r}return Ut(e,[{key:"toJSON",value:function(){return{multiFactorSession:h({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),UC=function(){function e(t,n,r){Mt(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Ut(e,[{key:"resolveSignIn",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=FI(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return oC._fromServerResponse(r,e)}));vS(i.mfaPendingCredential,r,"internal-error");var o=FC._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=fr(cr().mark((function e(t){var a,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,LT._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return vS(n.user,r,"internal-error"),e.abrupt("return",LT._forOperation(n.user,n.operationType,u));case 17:lS(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function jC(e,t){return TS(e,"POST","/v2/accounts/mfaEnrollment:start",IS(e,t))}function VC(e,t){return TS(e,"POST","/v2/accounts/mfaEnrollment:start",IS(e,t))}function BC(e,t){return TS(e,"POST","/v2/accounts/mfaEnrollment:finalize",IS(e,t))}function zC(e,t){return TS(e,"POST","/v2/accounts/mfaEnrollment:withdraw",IS(e,t))}var qC=function(){function e(t){var n=this;Mt(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return oC._fromServerResponse(t.auth,e)})))}))}return Ut(e,[{key:"getSession",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=FC,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=fr(cr().mark((function e(t,n){var r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,WS(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=fr(cr().mark((function e(t){var n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,WS(this.user,zC(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),KC=new WeakMap;var GC="__sak",WC=function(){function e(t,n){Mt(this,e),this.storageRetriever=t,this.type=n}return Ut(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(GC,"1"),this.storage.removeItem(GC),Promise.resolve(!0)):Promise.resolve(!1)}catch(Bw){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var HC=function(e){Vt(n,e);var t=Kt(n);function n(){var e;return Mt(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=ya();return pI(e)||bI(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=wI(),e._shouldAllowMigration=!0,e}return Ut(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);wa()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=fr(cr().mark((function e(t,r){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fu(Bt(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=fr(cr().mark((function e(t){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fu(Bt(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fu(Bt(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(WC);HC.type="LOCAL";var QC=HC,$C=function(e){Vt(n,e);var t=Kt(n);function n(){return Mt(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Ut(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(WC);$C.type="SESSION";var YC=$C;function JC(e){return Promise.all(e.map(function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var XC=function(){function e(t){Mt(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Ut(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=fr(cr().mark((function e(t){var n,r,i,a,o,u,s,c;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,JC(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function ZC(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}XC.receivers=[];var eA=function(){function e(t){Mt(this,e),this.target=t,this.handlers=new Set}return Ut(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=fr(cr().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=ZC("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function tA(){return window}function nA(e){tA().location.href=e}function rA(){return"undefined"!==typeof tA().WorkerGlobalScope&&"function"===typeof tA().importScripts}function iA(){return aA.apply(this,arguments)}function aA(){return(aA=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function oA(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var uA="firebaseLocalStorageDb",sA="firebaseLocalStorage",cA="fbase_key",lA=function(){function e(t){Mt(this,e),this.request=t}return Ut(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function fA(e,t){return e.transaction([sA],t?"readwrite":"readonly").objectStore(sA)}function hA(){var e=indexedDB.deleteDatabase(uA);return new lA(e).toPromise()}function dA(){var e=indexedDB.open(uA,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(sA,{keyPath:cA})}catch(r){n(r)}})),e.addEventListener("success",fr(cr().mark((function n(){var r;return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(sA)){n.next=12;break}return r.close(),n.next=5,hA();case 5:return n.t0=t,n.next=8,dA();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function pA(e,t,n){return vA.apply(this,arguments)}function vA(){return vA=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=fA(t,!0).put((h(i={},cA,n),h(i,"value",r),i)),e.abrupt("return",new lA(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),vA.apply(this,arguments)}function mA(e,t){return yA.apply(this,arguments)}function yA(){return yA=fr(cr().mark((function e(t,n){var r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fA(t,!1).get(n),e.next=3,new lA(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),yA.apply(this,arguments)}function gA(e,t){var n=fA(e,!0).delete(t);return new lA(n).toPromise()}var kA=function(){function e(){Mt(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Ut(e,[{key:"_openDb",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,dA();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rA()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=fr(cr().mark((function e(){var t=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=XC._getInstance(rA()?self:null),this.receiver._subscribe("keyChanged",function(){var e=fr(cr().mark((function e(n,r){var i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=fr(cr().mark((function e(){var t,n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iA();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new eA(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&oA()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,dA();case 5:return t=e.sent,e.next=8,pA(t,GC,"1");case 8:return e.next=10,gA(t,GC);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=fr(cr().mark((function e(t,n){var r=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return pA(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return mA(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=fr(cr().mark((function e(t){var n=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return gA(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=fA(e,!1).getAll();return new lA(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Qt(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(fr(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();kA.type="LOCAL";var bA=kA;function wA(e,t){return TS(e,"POST","/v2/accounts/mfaSignIn:start",IS(e,t))}function xA(e,t){return TS(e,"POST","/v2/accounts/mfaSignIn:finalize",IS(e,t))}var _A=1e12,EA=function(){function e(t){Mt(this,e),this.auth=t,this.counter=_A,this._widgets=new Map}return Ut(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new SA(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||_A;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||_A;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||_A,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),SA=function(){function e(t,n,r){var i=this;Mt(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;vS(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Ut(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var IA=OI("rcb"),TA=new wS(3e4,6e4),CA=function(){function e(){var t;Mt(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=tA().grecaptcha)||void 0===t?void 0:t.render)}return Ut(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return vS(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&TI(tA().grecaptcha)?Promise.resolve(tA().grecaptcha):new Promise((function(r,i){var a=tA().setTimeout((function(){i(fS(e,"network-request-failed"))}),TA.get());tA()[IA]=function(){tA().clearTimeout(a),delete tA()[IA];var o=tA().grecaptcha;if(o&&TI(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(fS(e,"internal-error"))},NI("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Na({onload:IA,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(fS(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=tA().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var AA=function(){function e(){Mt(this,e)}return Ut(e,[{key:"load",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new EA(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),NA="recaptcha",OA={theme:"light",type:"image"},PA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},OA),r=arguments.length>2?arguments[2]:void 0;Mt(this,e),this.parameters=n,this.type=NA,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=FI(r),this.isInvisible="invisible"===this.parameters.size,vS("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;vS(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new AA:new CA,this.validateStartingState()}return Ut(e,[{key:"verify",value:function(){var e=fr(cr().mark((function e(){var t,n,r,i=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){vS(!this.parameters.sitekey,this.auth,"argument-error"),vS(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),vS("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=tA()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){vS(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=fr(cr().mark((function e(){var t,n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vS(kS()&&!rA(),this.auth,"internal-error"),e.next=3,RA();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,_I(this.auth);case 8:vS(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return vS(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function RA(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var DA=function(){function e(t,n){Mt(this,e),this.verificationId=t,this.onConfirmation=n}return Ut(e,[{key:"confirm",value:function(e){var t=wT._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function LA(){return LA=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=FI(t),e.next=3,jA(i,n,Ma(r));case 3:return a=e.sent,e.abrupt("return",new DA(a,(function(e){return JT(i,e)})));case 5:case"end":return e.stop()}}),e)}))),LA.apply(this,arguments)}function MA(e,t,n){return FA.apply(this,arguments)}function FA(){return(FA=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ma(t),e.next=3,GT(!1,i,"phone");case 3:return e.next=5,jA(i.auth,n,Ma(r));case 5:return a=e.sent,e.abrupt("return",new DA(a,(function(e){return ZT(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function UA(){return(UA=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ma(t),e.next=3,jA(i.auth,n,Ma(r));case 3:return a=e.sent,e.abrupt("return",new DA(a,(function(e){return tC(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jA(e,t,n){return VA.apply(this,arguments)}function VA(){return VA=fr(cr().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,vS("string"===typeof a,t,"argument-error"),vS(r.type===NA,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return vS("enroll"===u.type,t,"internal-error"),e.next=13,jC(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return vS("signin"===u.type,t,"internal-error"),vS(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,wA(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,vT(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),VA.apply(this,arguments)}function BA(){return(BA=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qT(Ma(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zA=function(){function e(t){Mt(this,e),this.providerId=e.PROVIDER_ID,this.auth=FI(t)}return Ut(e,[{key:"verifyPhoneNumber",value:function(e,t){return jA(this.auth,e,Ma(t))}}],[{key:"credential",value:function(e,t){return wT._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?wT._fromTokenResponse(n,r):null}}]),e}();function qA(e,t){return t?uI(t):(vS(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}zA.PROVIDER_ID="phone",zA.PHONE_SIGN_IN_METHOD="phone";var KA=function(e){Vt(n,e);var t=Kt(n);function n(e){var r;return Mt(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Ut(n,[{key:"_getIdTokenResponse",value:function(e){return hT(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return hT(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return hT(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(zI);function GA(e){return $T(e.auth,new KA(e),e.bypassAuthState)}function WA(e){var t=e.auth,n=e.user;return vS(n,t,"internal-error"),HT(n,new KA(e),e.bypassAuthState)}function HA(e){return QA.apply(this,arguments)}function QA(){return QA=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,vS(r=t.user,n,"internal-error"),e.abrupt("return",qT(r,new KA(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),QA.apply(this,arguments)}var $A=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Mt(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Ut(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=fr(cr().mark((function t(n,r){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=fr(cr().mark((function e(t){var n,r,i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GA;case"linkViaPopup":case"linkViaRedirect":return HA;case"reauthViaPopup":case"reauthViaRedirect":return WA;default:lS(this.auth,"internal-error")}}},{key:"resolve",value:function(e){yS(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){yS(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),YA=new wS(2e3,1e4);function JA(e,t,n){return XA.apply(this,arguments)}function XA(){return XA=fr(cr().mark((function e(t,n,r){var i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=FI(t),dS(t,n,ET),a=qA(i,r),o=new nN(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),XA.apply(this,arguments)}function ZA(){return(ZA=fr(cr().mark((function e(t,n,r){var i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dS((i=Ma(t)).auth,n,ET),a=qA(i.auth,r),o=new nN(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eN(e,t,n){return tN.apply(this,arguments)}function tN(){return(tN=fr(cr().mark((function e(t,n,r){var i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dS((i=Ma(t)).auth,n,ET),a=qA(i.auth,r),o=new nN(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nN=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i,a,o){var u;return Mt(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=qt(u),u}return Ut(n,[{key:"executeNotNull",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return vS(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=fr(cr().mark((function e(){var t,n=this;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yS(1===this.filter.length,"Popup operations only handle one event"),t=ZC(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(fS(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(fS(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(fS(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,YA.get())}()}}]),n}($A);nN.currentPopupAction=null;var rN="pendingRedirect",iN=new Map,aN=function(e){Vt(n,e);var t=Kt(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Mt(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Ut(n,[{key:"execute",value:function(){var e=fr(cr().mark((function e(){var t,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=iN.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,oN(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,fu(Bt(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:iN.set(this.auth._key(),t);case 21:return this.bypassAuthState||iN.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=fr(cr().mark((function e(t){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",fu(Bt(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",fu(Bt(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}($A);function oN(e,t){return uN.apply(this,arguments)}function uN(){return uN=fr(cr().mark((function e(t,n){var r,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hN(n),i=fN(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),uN.apply(this,arguments)}function sN(e,t){return cN.apply(this,arguments)}function cN(){return cN=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fN(t)._set(hN(n),"true"));case 1:case"end":return e.stop()}}),e)}))),cN.apply(this,arguments)}function lN(e,t){iN.set(e._key(),t)}function fN(e){return uI(e._redirectPersistence)}function hN(e){return lI(rN,e.config.apiKey,e.name)}function dN(e,t,n){return function(e,t,n){return pN.apply(this,arguments)}(e,t,n)}function pN(){return pN=fr(cr().mark((function e(t,n,r){var i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=FI(t),dS(t,n,ET),e.next=4,i._initializationPromise;case 4:return a=qA(i,r),e.next=7,sN(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),pN.apply(this,arguments)}function vN(e,t,n){return function(e,t,n){return mN.apply(this,arguments)}(e,t,n)}function mN(){return(mN=fr(cr().mark((function e(t,n,r){var i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dS((i=Ma(t)).auth,n,ET),e.next=4,i.auth._initializationPromise;case 4:return a=qA(i.auth,r),e.next=7,sN(a,i.auth);case 7:return e.next=9,_N(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yN(e,t,n){return function(e,t,n){return gN.apply(this,arguments)}(e,t,n)}function gN(){return(gN=fr(cr().mark((function e(t,n,r){var i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dS((i=Ma(t)).auth,n,ET),e.next=4,i.auth._initializationPromise;case 4:return a=qA(i.auth,r),e.next=7,GT(!1,i,n.providerId);case 7:return e.next=9,sN(a,i.auth);case 9:return e.next=11,_N(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kN(e,t){return bN.apply(this,arguments)}function bN(){return bN=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FI(t)._initializationPromise;case 2:return e.abrupt("return",wN(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),bN.apply(this,arguments)}function wN(e,t){return xN.apply(this,arguments)}function xN(){return xN=fr(cr().mark((function e(t,n){var r,i,a,o,u,s=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=FI(t),a=qA(i,n),o=new aN(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),xN.apply(this,arguments)}function _N(e){return EN.apply(this,arguments)}function EN(){return(EN=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ZC("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var SN=function(){function e(t){Mt(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Ut(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TN(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!TN(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(fS(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(IN(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(IN(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function IN(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function TN(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function CN(e){return AN.apply(this,arguments)}function AN(){return AN=fr(cr().mark((function e(t){var n,r=arguments;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",TS(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),AN.apply(this,arguments)}var NN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ON=/^https?/;function PN(){return PN=fr(cr().mark((function e(t){var n,r,i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,CN(t);case 4:n=e.sent,r=n.authorizedDomains,i=Qt(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!RN(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:lS(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),PN.apply(this,arguments)}function RN(e){var t=gS(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!ON.test(r))return!1;if(NN.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var DN=new wS(3e4,6e4);function LN(){var e=tA().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Lt(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var MN=null;function FN(e){return MN=MN||function(e){return new Promise((function(t,n){var r,i,a;function o(){LN(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){LN(),n(fS(e,"network-request-failed"))},timeout:DN.get()})}if(null===(i=null===(r=tA().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=tA().gapi)||void 0===a?void 0:a.load)){var u=OI("iframefcb");return tA()[u]=function(){gapi.load?o():n(fS(e,"network-request-failed"))},NI("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw MN=null,e}))}(e),MN}var UN=new wS(5e3,15e3),jN="__/auth/iframe",VN="emulator/auth/iframe",BN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qN(e){var t=e.config;vS(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?xS(t,VN):"https://".concat(e.config.authDomain,"/").concat(jN),r={apiKey:t.apiKey,appName:e.name,v:Po},i=zN.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Na(r).slice(1))}function KN(e){return GN.apply(this,arguments)}function GN(){return GN=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FN(t);case 2:return n=e.sent,vS(r=tA().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:qN(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BN,dontclear:!0},(function(e){return new Promise(function(){var n=fr(cr().mark((function n(r,i){var a,o,u;return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){tA().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=fS(t,"network-request-failed"),o=tA().setTimeout((function(){i(a)}),UN.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),GN.apply(this,arguments)}var WN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HN=function(){function e(t){Mt(this,e),this.window=t,this.associatedEvent=null}return Ut(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function QN(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},WN),{width:r.toString(),height:i.toString(),top:a,left:o}),c=ya().toLowerCase();n&&(u=vI(c)?"_blank":n),dI(c)&&(t=t||"http://localhost",s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=Rt(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return bI(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new HN(null);var f=window.open(t||"",u,l);vS(f,e,"popup-blocked");try{f.focus()}catch(h){}return new HN(f)}var $N="__/auth/handler",YN="emulator/auth/handler",JN=encodeURIComponent("fac");function XN(e,t,n,r,i,a){return ZN.apply(this,arguments)}function ZN(){return ZN=fr(cr().mark((function e(t,n,r,i,a,o){var u,s,c,l,f,h,d,p,v,m,y,g,k;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vS(t.config.authDomain,t,"auth-domain-config-required"),vS(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Po,eventId:a},n instanceof ET)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",Ta(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),s=0,c=Object.entries(o||{});s<c.length;s++)l=Rt(c[s],2),f=l[0],h=l[1],u[f]=h;for(n instanceof ST&&(d=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=d.join(",")),t.tenantId&&(u.tid=t.tenantId),p=u,v=0,m=Object.keys(p);v<m.length;v++)y=m[v],void 0===p[y]&&delete p[y];return e.next=10,t._getAppCheckToken();case 10:return g=e.sent,k=g?"#".concat(JN,"=").concat(encodeURIComponent(g)):"",e.abrupt("return","".concat(eO(t),"?").concat(Na(p).slice(1)).concat(k));case 13:case"end":return e.stop()}}),e)}))),ZN.apply(this,arguments)}function eO(e){var t=e.config;return t.emulator?xS(t,YN):"https://".concat(t.authDomain,"/").concat($N)}var tO="webStorageSupport",nO=function(){function e(){Mt(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YC,this._completeRedirectFn=wN,this._overrideRedirectResult=lN}return Ut(e,[{key:"_openPopup",value:function(){var e=fr(cr().mark((function e(t,n,r,i){var a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yS(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,XN(t,n,r,gS(),i);case 3:return o=e.sent,e.abrupt("return",QN(t,o,ZC()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=fr(cr().mark((function e(t,n,r,i){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,XN(t,n,r,gS(),i);case 4:return nA(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(yS(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,KN(t);case 2:return n=e.sent,r=new SN(t),n.register("authEvent",(function(e){return vS(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(tO,{type:tO},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[tO];void 0!==i&&t(!!i),lS(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return PN.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return wI()||pI()||bI()}}]),e}(),rO=nO,iO=function(){function e(t){Mt(this,e),this.factorId=t}return Ut(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return mS("unexpected MultiFactorSessionType")}}}]),e}(),aO=function(e){Vt(n,e);var t=Kt(n);function n(e){var r;return Mt(this,n),(r=t.call(this,"phone")).credential=e,r}return Ut(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return TS(e,"POST","/v2/accounts/mfaEnrollment:finalize",IS(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return TS(e,"POST","/v2/accounts/mfaSignIn:finalize",IS(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(iO),oO=function(){function e(){Mt(this,e)}return Ut(e,null,[{key:"assertion",value:function(e){return aO._fromCredential(e)}}]),e}();oO.FACTOR_ID="phone";var uO=function(){function e(){Mt(this,e)}return Ut(e,null,[{key:"assertionForEnrollment",value:function(e,t){return sO._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return sO._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vS("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,VC(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",cO._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();uO.FACTOR_ID="totp";var sO=function(e){Vt(n,e);var t=Kt(n);function n(e,r,i){var a;return Mt(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return Ut(n,[{key:"_finalizeEnroll",value:function(){var e=fr(cr().mark((function e(t,n,r){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vS("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",BC(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vS(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",xA(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(iO),cO=function(){function e(t,n,r,i,a,o,u){Mt(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return Ut(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(lO(e)||lO(t))&&(r=!0),r&&(lO(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),lO(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function lO(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var fO="@firebase/auth",hO="0.23.2",dO=function(){function e(t){Mt(this,e),this.auth=t,this.internalListeners=new Map}return Ut(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){vS(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var pO;!function(e){var t;null===(t=pa())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function vO(){return window}pO="Browser",So(new Fa("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;vS(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:pO,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xI(pO)},l=new MI(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(uI);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),So(new Fa("auth-internal",(function(e){return function(e){return new dO(e)}(FI(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Uo(fO,hO,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(pO)),Uo(fO,hO,"esm2017");var mO=2e3;function yO(e,t,n){return gO.apply(this,arguments)}function gO(){return gO=fr(cr().mark((function e(t,n,r){var i,a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=vO(),o=a.BuildInfo,yS(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,EO(n.sessionId);case 4:return u=e.sent,s={},bI()?s.ibi=o.packageName:yI()?s.apn=o.packageName:lS(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",XN(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),gO.apply(this,arguments)}function kO(){return kO=fr(cr().mark((function e(t){var n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vO(),r=n.BuildInfo,i={},bI()?i.iosBundleId=r.packageName:yI()?i.androidPackageName=r.packageName:lS(t,"operation-not-supported-in-this-environment"),e.next=5,CN(t,i);case 5:case"end":return e.stop()}}),e)}))),kO.apply(this,arguments)}function bO(e){var t=vO().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function wO(e,t,n){return xO.apply(this,arguments)}function xO(){return xO=fr(cr().mark((function e(t,n,r){var i,a,o;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vO(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(fS(t,"redirect-cancelled-by-user"))}),mO))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),yI()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),xO.apply(this,arguments)}function _O(e){var t,n,r,i,a,o,u,s,c,l,f=vO();vS("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),vS("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),vS("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),vS("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),vS("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function EO(e){return SO.apply(this,arguments)}function SO(){return(SO=fr(cr().mark((function e(t){var n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=IO(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IO(e){if(yS(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var TO=20,CO=function(e){Vt(n,e);var t=Kt(n);function n(){var e;return Mt(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Ut(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),fu(Bt(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(SN);function AO(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:DO(),postBody:null,tenantId:e.tenantId,error:fS(e,"no-auth-event")}}function NO(e,t){return LO()._set(MO(e),t)}function OO(e){return PO.apply(this,arguments)}function PO(){return PO=fr(cr().mark((function e(t){var n;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LO()._get(MO(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,LO()._remove(MO(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),PO.apply(this,arguments)}function RO(e,t){var n,r,i=function(e){var t=FO(e),n=t.link?decodeURIComponent(t.link):void 0,r=FO(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return FO(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=FO(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?fS(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function DO(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<TO;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function LO(){return uI(QC)}function MO(e){return lI("authEvent",e.config.apiKey,e.name)}function FO(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=Ht(e.split("?"));t[0];return Oa(t.slice(1).join("?"))}var UO=function(){function e(){Mt(this,e),this._redirectPersistence=YC,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wN,this._overrideRedirectResult=lN}return Ut(e,[{key:"_initialize",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new CO(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){lS(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=fr(cr().mark((function e(t,n,r,i){var a,o,u,s;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _O(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),iN.clear(),e.next=10,this._originValidation(t);case 10:return o=AO(t,r,i),e.next=13,NO(t,o);case 13:return e.next=15,yO(t,o,n);case 15:return u=e.sent,e.next=18,bO(u);case 18:return s=e.sent,e.abrupt("return",wO(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return kO.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=vO(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(fr(cr().mark((function n(){return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,OO(e);case 2:t.onEvent(VO());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=fr(cr().mark((function n(r){var i,a;return cr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,OO(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=RO(i,r.url)),t.onEvent(a||VO());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");vO().handleOpenURL=function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),jO=UO;function VO(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:fS("no-auth-event")}}var BO=1e3;function zO(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function qO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya();return!("file:"!==zO()&&"ionic:"!==zO()&&"capacitor:"!==zO()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function KO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya();return wa()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya();return/Edge\/\d+/.test(e)}(e)}function GO(){try{var e=self.localStorage,t=ZC();if(e)return e.setItem(t,"1"),e.removeItem(t),!KO()||xa()}catch(n){return WO()&&xa()}return!1}function WO(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function HO(){return("http:"===zO()||"https:"===zO()||ka()||qO())&&!(ba()||ga())&&GO()&&!WO()}function QO(){return qO()&&"undefined"!==typeof document}function $O(){return YO.apply(this,arguments)}function YO(){return(YO=fr(cr().mark((function e(){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(QO()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),BO);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var JO={LOCAL:"local",NONE:"none",SESSION:"session"},XO=vS,ZO="persistence";function eP(e,t){XO(Object.values(JO).includes(t),e,"invalid-persistence-type"),ba()?XO(t!==JO.SESSION,e,"unsupported-persistence-type"):ga()?XO(t===JO.NONE,e,"unsupported-persistence-type"):WO()?XO(t===JO.NONE||t===JO.LOCAL&&xa(),e,"unsupported-persistence-type"):XO(t===JO.NONE||GO(),e,"unsupported-persistence-type")}function tP(e){return nP.apply(this,arguments)}function nP(){return nP=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=rP(),r=lI(ZO,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),nP.apply(this,arguments)}function rP(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var iP=vS,aP=function(){function e(){Mt(this,e),this.browserResolver=uI(rO),this.cordovaResolver=uI(jO),this.underlyingResolver=null,this._redirectPersistence=YC,this._completeRedirectFn=wN,this._overrideRedirectResult=lN}return Ut(e,[{key:"_initialize",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=fr(cr().mark((function e(t,n,r,i){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=fr(cr().mark((function e(t,n,r,i){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return QO()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return iP(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,$O();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function oP(e){return e.unwrap()}function uP(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new hP(e,function(e,t){var n,r=Ma(e),i=t;return vS(t.customData.operationType,r,"argument-error"),vS(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),UC._fromError(r,i)}(e,t));else if(r){var i=sP(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function sP(e){var t=(e instanceof _a?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof _a)&&"temporaryProof"in t&&"phoneNumber"in t)return zA.credentialFromResult(e);var n,r=t.providerId;if(!r||r===YE.PASSWORD)return null;switch(r){case YE.GOOGLE:n=CT;break;case YE.FACEBOOK:n=TT;break;case YE.GITHUB:n=AT;break;case YE.TWITTER:n=PT;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?NT._create(r,u):pT._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new IT(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof _a?n.credentialFromError(e):n.credentialFromResult(e)}function cP(e,t){return t.catch((function(t){throw t instanceof _a&&uP(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,sP(t)),additionalUserInfo:MC(e),user:dP.getOrCreate(r)}}))}function lP(e,t){return fP.apply(this,arguments)}function fP(){return fP=fr(cr().mark((function e(t,n){var r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return cP(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),fP.apply(this,arguments)}var hP=function(){function e(t,n){Mt(this,e),this.resolver=n,this.auth=t.wrapped()}return Ut(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return cP(oP(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),dP=function(){function e(t){Mt(this,e),this._delegate=t,this.multiFactor=function(e){var t=Ma(e);return KC.has(t)||KC.set(t,qC._fromUser(t)),KC.get(t)}(t)}return Ut(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cP(this.auth,ZT(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lP(this.auth,MA(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cP(this.auth,eN(this._delegate,t,aP)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tP(FI(this.auth));case 2:return e.abrupt("return",yN(this._delegate,t,aP));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cP(this.auth,tC(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return lP(this.auth,function(e,t,n){return UA.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return cP(this.auth,function(e,t,n){return ZA.apply(this,arguments)}(this._delegate,e,aP))}},{key:"reauthenticateWithRedirect",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tP(FI(this.auth));case 2:return e.abrupt("return",vN(this._delegate,t,aP));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return _C.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BT(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return CC(Ma(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return CC(Ma(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return BA.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return TC.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return EC.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();dP.USER_MAP=new WeakMap;var pP=vS,vP=function(){function e(t,n){if(Mt(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;pP(r,"invalid-api-key",{appName:t.name}),pP(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?aP:void 0;this._delegate=n.initialize({options:{persistence:yP(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(iS),this.linkUnderlyingAuth()}return Ut(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?dP.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){jI(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return hC.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return dC(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return fC.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=fr(cr().mark((function e(t,n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cP(this._delegate,mC(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return xC.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=xT.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=fr(cr().mark((function e(){var t;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pP(HO(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,kN(this._delegate,aP);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",cP(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){FI(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=mP(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=mP(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return gC.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return lC.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=fr(cr().mark((function e(t){var n,r;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:eP(this._delegate,t),e.t0=t,e.next=e.t0===JO.SESSION?4:e.t0===JO.LOCAL?6:e.t0===JO.NONE?11:13;break;case 4:return n=YC,e.abrupt("break",14);case 6:return e.next=8,uI(bA)._isAvailable();case 8:return r=e.sent,n=r?bA:QC,e.abrupt("break",14);case 11:return n=cI,e.abrupt("break",14);case 13:return e.abrupt("return",lS("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return cP(this._delegate,function(e){return FT.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return cP(this._delegate,JT(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return cP(this._delegate,function(e,t){return aC.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return cP(this._delegate,function(e,t,n){return JT(Ma(e),_T.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return cP(this._delegate,function(e,t,n){return kC.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return lP(this._delegate,function(e,t,n){return LA.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pP(HO(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",cP(this._delegate,JA(this._delegate,t,aP)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pP(HO(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,tP(this._delegate);case 3:return e.abrupt("return",dN(this._delegate,t,aP));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return vC.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function mP(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&dP.getOrCreate(e))},error:t,complete:n}}function yP(e,t){var n=function(e,t){var n=rP();if(!n)return[];var r=lI(ZO,e,t);switch(n.getItem(r)){case JO.NONE:return[cI];case JO.LOCAL:return[bA,YC];case JO.SESSION:return[YC];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(bA)||n.push(bA),"undefined"!==typeof window)for(var r=0,i=[QC,YC];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(cI)||n.push(cI),n}vP.Persistence=JO;var gP=function(){function e(){Mt(this,e),this.providerId="phone",this._delegate=new zA(oP(lu.auth()))}return Ut(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return zA.credential(e,t)}}]),e}();gP.PHONE_SIGN_IN_METHOD=zA.PHONE_SIGN_IN_METHOD,gP.PROVIDER_ID=zA.PROVIDER_ID;var kP=vS,bP=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lu.app();Mt(this,e),kP(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new PA(t,n,i.auth()),this.type=this._delegate.type}return Ut(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Fa("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new vP(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:JE,PASSWORD_RESET:XE,RECOVER_EMAIL:ZE,REVERT_SECOND_FACTOR_ADDITION:eS,VERIFY_AND_CHANGE_EMAIL:tS,VERIFY_EMAIL:nS}},EmailAuthProvider:_T,FacebookAuthProvider:TT,GithubAuthProvider:AT,GoogleAuthProvider:CT,OAuthProvider:IT,SAMLAuthProvider:OT,PhoneAuthProvider:gP,PhoneMultiFactorGenerator:oO,RecaptchaVerifier:bP,TwitterAuthProvider:PT,Auth:vP,AuthCredential:zI,Error:_a}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.4.2")}(lu);var wP=lu.initializeApp({apiKey:"AIzaSyAdsO138nX0Luv-gPLgjHxI_0DsoQwdf4A",authDomain:"netflix-clone-40569.firebaseapp.com",projectId:"netflix-clone-40569",storageBucket:"netflix-clone-40569.appspot.com",messagingSenderId:"962666496672",appId:"1:962666496672:web:ae51125e5a07368780ffc5"}).firestore(),xP=lu.auth(),_P=wP;function EP(){var e=(0,t.useRef)(null),n=(0,t.useRef)(null);return(0,ur.jsx)("div",{className:"signUp",children:(0,ur.jsxs)("form",{className:"signUp__body",children:[(0,ur.jsx)("h2",{children:"Sign In"}),(0,ur.jsx)("input",{ref:e,type:"text",placeholder:"Email Address"}),(0,ur.jsx)("input",{ref:n,type:"text",placeholder:"Password"}),(0,ur.jsx)("button",{onClick:function(t){t.preventDefault(),xP.signInWithEmailAndPassword(e.current.value,n.current.value).then((function(e){console.log(e)}))},children:"Sign In"}),(0,ur.jsxs)("p",{children:["New to Netflix,"," ",(0,ur.jsx)("strong",{onClick:function(t){t.preventDefault(),xP.createUserWithEmailAndPassword(e.current.value,n.current.value).then((function(e){console.log(e)})).catch((function(e){alert(e.message)}))},style:{cursor:"pointer"},children:"Sign Up now"})]})]})})}function SP(){var e=Rt((0,t.useState)(!1),2),n=e[0],r=e[1];return(0,ur.jsxs)("div",{className:"login",children:[(0,ur.jsxs)("div",{className:"login__background",children:[(0,ur.jsx)("img",{className:"login__logo",src:"https://www.freepnglogos.com/uploads/netflix-logo-0.png",alt:""}),(0,ur.jsx)("button",{onClick:function(){return r(!0)},className:"login__button",children:"Sign In"}),(0,ur.jsx)("div",{className:"login__gradient"})]}),(0,ur.jsx)("div",{className:"login__body",children:n?(0,ur.jsx)(EP,{}):(0,ur.jsxs)(ur.Fragment,{children:[(0,ur.jsx)("h1",{children:"Unlimited Films, TV Programmes and more."}),(0,ur.jsx)("p",{children:"Watch Anywhere, Cancel Anytime..."}),(0,ur.jsx)("span",{children:"Ready to watch? Enter your email to create or restart your membership."}),(0,ur.jsxs)("form",{className:"login__form",action:"",children:[(0,ur.jsx)("input",{className:"loginForm__input",type:"text",placeholder:"Email Address"}),(0,ur.jsx)("button",{onClick:function(){return r(!0)},className:"loginForm__button",children:"Get Started"})]})]})})]})}var IP="https://js.stripe.com/v3",TP=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,CP="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",AP=null,NP=function(e){return null!==AP||(AP=new Promise((function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(CP),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(IP,'"]')),t=0;t<e.length;t++){var n=e[t];if(TP.test(n.src))return n}return null}();r&&e?console.warn(CP):r||(r=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(IP).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n}(e)),r.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(i){return void n(i)}else t(null)}))),AP},OP=Promise.resolve().then((function(){return NP(null)})),PP=!1;OP.catch((function(e){PP||console.warn(e)}));var RP=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];PP=!0;var r=Date.now();return OP.then((function(e){return function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.54.1",startTime:t})}(r,n),r}(e,t,r)}))};function DP(){var e=w(Tt),n=Rt((0,t.useState)([]),2),r=n[0],i=n[1],a=Rt((0,t.useState)(null),2),o=a[0],u=a[1];(0,t.useEffect)((function(){_P.collection("customers").doc(e.uid).collection("subscriptions").get().then((function(e){e.forEach(function(){var e=fr(cr().mark((function e(t){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u({role:t.data().role,current_period_end:t.data().current_period_end.seconds,current_period_start:t.data().current_period_start.seconds});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[e.uid]),(0,t.useEffect)((function(){_P.collection("products").where("active","==",!0).get().then((function(e){var t={};e.forEach(function(){var e=fr(cr().mark((function e(n){return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t[n.id]=n.data(),e.next=3,n.ref.collection("prices").get();case 3:e.sent.docs.forEach((function(e){t[n.id].prices={priceId:e.id,priceData:e.data()}}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i(t)}))}),[]),console.log(r),console.log(o);var s=function(){var t=fr(cr().mark((function t(n){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_P.collection("customers").doc(e.uid).collection("checkout_sessions").add({price:n,success_url:window.location.origin,cancel_url:window.location.origin});case 2:t.sent.onSnapshot(function(){var e=fr(cr().mark((function e(t){var n,r,i;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data(),r=n.error,i=n.sessionId,r&&alert(r.message),!i){e.next=7;break}return e.next=5,RP("pk_test_51NOxbxSDxfw8kG8f0Wpbw4Cm9rNH8dUEnkssrrxZOyO9qCE69230ocKOq6DdDtoc1tlwnkkGP9uBOsmaTbvUAoBM007nDI4zWz");case 5:e.sent.redirectToCheckout({sessionId:i});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,ur.jsxs)("div",{className:"planScreen",children:[o&&(0,ur.jsxs)("p",{className:"renewal",children:["Renewal Date:"," ",new Date(1e3*(null===o||void 0===o?void 0:o.current_period_end)).toLocaleDateString()]}),Object.entries(r).map((function(e){var t,n=Rt(e,2),r=n[0],i=n[1],a=null===(t=i.name)||void 0===t?void 0:t.includes(null===o||void 0===o?void 0:o.role);return(0,ur.jsxs)("div",{className:"".concat(a&&"PlanScreen_plans--disabled"," PlanScreen_plans"),children:[(0,ur.jsxs)("div",{className:"planScreen__info",children:[(0,ur.jsx)("h5",{children:i.name}),(0,ur.jsx)("h6",{children:i.description})]}),(0,ur.jsx)("button",{onClick:function(){return!a&&s(i.prices.priceId)},children:a?"Current Plan":"Subscribe"})]},r)}))]})}function LP(){var e=qn(),t=w(Tt);return(0,ur.jsxs)("div",{className:"profile",children:[(0,ur.jsx)("div",{className:"logo",children:(0,ur.jsx)("img",{onClick:function(){e("/")},className:"nav_logo",src:"https://www.freepnglogos.com/uploads/netflix-logo-0.png",alt:""})}),(0,ur.jsxs)("div",{className:"profileScreen__body",children:[(0,ur.jsx)("h1",{children:"Edit Profile"}),(0,ur.jsxs)("div",{className:"profileScreen__info",children:[(0,ur.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQJY8ri89jq-__7Lt6F8AHtVw1RLdRUIiWtYa6mnb6SUA&s",alt:""}),(0,ur.jsxs)("div",{className:"profileScreen__details",children:[(0,ur.jsx)("h2",{children:t.email}),(0,ur.jsx)("p",{children:"Plans"}),(0,ur.jsx)(DP,{}),(0,ur.jsx)("div",{className:"profileScreen__plans",children:(0,ur.jsx)("button",{onClick:function(){xP.signOut()},className:"profileScreen__signOut",children:"Sign Out"})})]})]})]})]})}var MP=function(){var e=w(Tt),n=N(),r=(0,t.useEffect)((function(){return xP.onAuthStateChanged((function(e){e?(console.log(e),n(St({uid:e.uid,email:e.email}))):n(It())})),r}),[n]);return(0,ur.jsx)("div",{className:"app",children:(0,ur.jsx)(ia,{children:e?(0,ur.jsxs)(ir,{children:[(0,ur.jsx)(nr,{path:"/profile",element:(0,ur.jsx)(LP,{})}),(0,ur.jsx)(nr,{path:"/",element:(0,ur.jsx)(na,{})})]}):(0,ur.jsx)(SP,{})})})},FP=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},UP=document.getElementById("root");(0,i.s)(UP).render((0,ur.jsx)(t.StrictMode,{children:(0,ur.jsx)(S,{store:Ct,children:(0,ur.jsx)(MP,{})})})),FP()}()}();
//# sourceMappingURL=main.5eeea688.js.map